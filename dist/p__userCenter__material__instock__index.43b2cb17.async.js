"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[745],{97410:function(ne,k,r){r.r(k),r.d(k,{default:function(){return N}});var U=r(19632),x=r.n(U),L=r(5574),s=r.n(L),Z=r(68848),g=r(97131),n=r(30077),I=r(12578),o=r(67294),R=[{valueType:"group",columns:[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialName",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m"},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C"}]},width:"m"}]},{valueType:"group",columns:[{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m"},{title:"\u64CD\u4F5C\u65F6\u95F4",dataIndex:"logTime",sorter:!0,valueType:"datetime",formItemProps:{rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u65F6\u95F4"}]},width:"m"}]}],O=[{valueType:"group",columns:[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialName",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m",hideInSearch:!0,readonly:!0},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m",hideInSearch:!0,readonly:!0},{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m",hideInSearch:!0,readonly:!0},{title:"\u5F52\u8FD8\u6570\u91CF",dataIndex:"instockQuantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5F52\u8FD8\u6570\u91CF"}]},width:"m",hideInSearch:!0}]}],y=r(19515),d=r(15009),E=r.n(d),C=r(97857),Y=r.n(C),D=r(99289),q=r.n(D),$=r(37476),v=r(26855),l=r(2453),c=r(28248),_=r(6493),t=r(85893),H=function(u){var i,a,m,e=(i=o.useRef)===null||i===void 0?void 0:i(),P=(0,o.useState)(!1),M=s()(P,2),B=M[0],G=M[1],z=(a=o.useRef)===null||a===void 0?void 0:a(),Q=o.useState===null||o.useState===void 0?void 0:(0,o.useState)([]),X=s()(Q,2),oe=X[0],W=X[1],V=l.ZP===null||l.ZP===void 0||(m=l.ZP.useMessage)===null||m===void 0?void 0:m.call(l.ZP),A=s()(V,2),S=A[0],ve=A[1],le=I.useRequest===null||I.useRequest===void 0?void 0:(0,I.useRequest)(_.IV,{manual:!0,onSuccess:function(){var f,p,b;W==null||W([]),z==null||(f=z.current)===null||f===void 0||(p=f.reload)===null||p===void 0||p.call(f),S==null||(b=S.success)===null||b===void 0||b.call(S,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var f;S==null||(f=S.error)===null||f===void 0||f.call(S,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),ee=le.run,fe=le._,de=function(){var K=q()(E()().mark(function f(){var p,b,h,T,J;return E()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:if(!re){w.next=7;break}return w.next=3,_.FO===null||_.FO===void 0?void 0:(0,_.FO)(re);case 3:if(h=w.sent,!(h!=null&&h.data)){w.next=6;break}return w.abrupt("return",e==null||(T=e.current)===null||T===void 0||(J=T.setFieldsValue)===null||J===void 0?void 0:J.call(T,Y()({},h==null?void 0:h.data)));case 6:return w.abrupt("return",e==null||(p=e.current)===null||p===void 0||(b=p.setFieldsValue)===null||b===void 0?void 0:b.call(p,{id:re}));case 7:case"end":return w.stop()}},f)}));return function(){return K.apply(this,arguments)}}(),_e={id:"",title:""},re=u.id,ce=u.trigger,ue=u.onOk,me=function(){var K=q()(E()().mark(function f(p){var b,h,T;return E()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:return p=Y()(Y()({},p),{},{id:re}),j.next=3,_.Vx===null||_.Vx===void 0?void 0:(0,_.Vx)(p);case 3:if(h=j.sent,(h==null?void 0:h.code)===0){j.next=8;break}return l.ZP===null||l.ZP===void 0||(T=l.ZP.error)===null||T===void 0||T.call(l.ZP,h==null?void 0:h.message),G==null||G(!1),j.abrupt("return",!1);case 8:return l.ZP===null||l.ZP===void 0||(b=l.ZP.success)===null||b===void 0||b.call(l.ZP,"\u63D0\u4EA4\u6210\u529F"),ue==null||ue(),G==null||G(!1),j.abrupt("return",!0);case 12:case"end":return j.stop()}},f)}));return function(p){return K.apply(this,arguments)}}(),he=(0,o.useCallback)(function(){var K=q()(E()().mark(function f(p){var b;return E()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:c.Z===null||c.Z===void 0||(b=c.Z.confirm)===null||b===void 0||b.call(c.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(p==null?void 0:p.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var j;(j=function(){var w=q()(E()().mark(function ie(){var ae;return E()().wrap(function(te){for(;;)switch(te.prev=te.next){case 0:return te.next=2,ee==null?void 0:ee(p==null||(ae=p.map)===null||ae===void 0?void 0:ae.call(p,function(se){return se==null?void 0:se.id}));case 2:case"end":return te.stop()}},ie)}));return function(){return w.apply(this,arguments)}}())===null||j===void 0||j()}});case 1:case"end":return T.stop()}},f)}));return function(f){return K.apply(this,arguments)}}(),[ee]),pe=[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialId",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m",hideInSearch:!0},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C"}]},width:"m",hideInSearch:!0},{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m",hideInSearch:!0}];return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)($.Y,{formRef:e,onFinish:me,modalProps:{destroyOnClose:!0,okButtonProps:{loading:B}},onOpenChange:de,initialValues:_e,title:"\u7F16\u8F91\u4FE1\u606F",trigger:ce,children:[(0,t.jsx)(v.Z,{layoutType:"Embed",columns:R}),(0,t.jsx)(n.Z,{headerTitle:"\u660E\u7EC6\u8868\u683C",rowKey:"id",search:!1,toolBarRender:function(){return[(0,t.jsx)(t.Fragment,{children:" "})]},columns:pe,request:_.Md})]})})},F=r(14726),N=function(){var u,i=(0,o.useState)(""),a=s()(i,2),m=a[0],e=a[1],P=(u=o.useRef)===null||u===void 0?void 0:u(),M=o.useState===null||o.useState===void 0?void 0:(0,o.useState)([]),B=s()(M,2),G=B[0],z=B[1],Q=I.useIntl===null||I.useIntl===void 0?void 0:(0,I.useIntl)(),X=[].concat(x()(y.P===null||y.P===void 0?void 0:(0,y.P)(R)),[{title:(0,t.jsx)(I.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(V,A){var S;return[(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(H,{trigger:(0,t.jsx)(F.ZP,{type:"primary",children:"\u8BE6 \u60C5"}),id:A==null?void 0:A.id,onOk:P==null||(S=P.current)===null||S===void 0?void 0:S.reload},A.id)})]}}]),oe=function(){var V;e==null||e(y.V===null||y.V===void 0?void 0:(0,y.V)()),P==null||(V=P.current)===null||V===void 0||V.reload()};return o.useEffect===null||o.useEffect===void 0||(0,o.useEffect)(function(){e==null||e(y.V===null||y.V===void 0?void 0:(0,y.V)())},[]),(0,t.jsx)(g._z,{children:(0,t.jsx)(n.Z,{headerTitle:Q==null?void 0:Q.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:P,rowKey:"id",toolBarRender:function(){return[]},request:Z.Md,columns:X,rowSelection:{onChange:function(V,A){z(A)}}})})}},68848:function(ne,k,r){r.d(k,{Md:function(){return I},uj:function(){return q}});var U=r(97857),x=r.n(U),L=r(15009),s=r.n(L),Z=r(99289),g=r.n(Z),n=r(12578);function I(v,l,c){return o.apply(this,arguments)}function o(){return o=g()(s()().mark(function v(l,c,_){var t;return s()().wrap(function(F){for(;;)switch(F.prev=F.next){case 0:return t="/staff/web/userCenter/inventory/inbill/page.json",F.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(t,{method:"GET",params:{params:l,sort:c,filter:_}}));case 2:case"end":return F.stop()}},v)})),o.apply(this,arguments)}function R(v){return O.apply(this,arguments)}function O(){return O=_asyncToGenerator(_regeneratorRuntime().mark(function v(l){var c;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c="/staff/web/userCenter/inventory/inbill/update.json",t.abrupt("return",request==null?void 0:request(c,{method:"POST",data:l}));case 2:case"end":return t.stop()}},v)})),O.apply(this,arguments)}function y(v){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime().mark(function v(l){var c;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c="/staff/web/userCenter/inventory/inbill/getById.json",t.abrupt("return",request==null?void 0:request(c,{method:"GET",params:{id:l}}));case 2:case"end":return t.stop()}},v)})),d.apply(this,arguments)}function E(v){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function v(l){var c;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c="/staff/web/userCenter/inventory/inbill/del.json",t.abrupt("return",request==null?void 0:request(c,{method:"POST",data:_objectSpread({},l)}));case 2:case"end":return t.stop()}},v)})),C.apply(this,arguments)}function Y(){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function v(){var l;return _regeneratorRuntime().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return l="/staff/web/userCenter/inventory/inbill/page.json",_.abrupt("return",request==null?void 0:request(l,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return _.stop()}},v)})),D.apply(this,arguments)}function q(v){return $.apply(this,arguments)}function $(){return $=g()(s()().mark(function v(l){var c;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c="/staff/web/userCenter/inventory/inbill/consumeInstock.json",t.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(c,{method:"POST",data:l}));case 2:case"end":return t.stop()}},v)})),$.apply(this,arguments)}},6493:function(ne,k,r){r.d(k,{$G:function(){return v},FO:function(){return y},IV:function(){return E},Md:function(){return I},Ps:function(){return t},Vx:function(){return R},ZI:function(){return q},k9:function(){return F}});var U=r(97857),x=r.n(U),L=r(15009),s=r.n(L),Z=r(99289),g=r.n(Z),n=r(12578);function I(u,i,a){return o.apply(this,arguments)}function o(){return o=g()(s()().mark(function u(i,a,m){var e;return s()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return e="/staff/web/userCenter/purchaseOrder/purchaseOrder/page.json",M.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(e,{method:"GET",params:{params:i,sort:a,filter:m}}));case 2:case"end":return M.stop()}},u)})),o.apply(this,arguments)}function R(u){return O.apply(this,arguments)}function O(){return O=g()(s()().mark(function u(i){var a;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/update.json",e.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"POST",data:i}));case 2:case"end":return e.stop()}},u)})),O.apply(this,arguments)}function y(u){return d.apply(this,arguments)}function d(){return d=g()(s()().mark(function u(i){var a;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/getById.json",e.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"GET",params:{id:i}}));case 2:case"end":return e.stop()}},u)})),d.apply(this,arguments)}function E(u){return C.apply(this,arguments)}function C(){return C=g()(s()().mark(function u(i){var a;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/del.json",e.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"POST",data:x()({},i)}));case 2:case"end":return e.stop()}},u)})),C.apply(this,arguments)}function Y(){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var i;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return i="/staff/web/userCenter/purchaseOrder/purchaseOrder/page.json",m.abrupt("return",request==null?void 0:request(i,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return m.stop()}},u)})),D.apply(this,arguments)}function q(u,i,a,m){return $.apply(this,arguments)}function $(){return $=g()(s()().mark(function u(i,a,m,e){var P;return s()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return P="/staff/web/userCenter/purchaseOrder/purchaseOrderItem/page.json?orderId="+i,B.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(P,{method:"GET",params:{params:a,sort:m,filter:e}}));case 2:case"end":return B.stop()}},u)})),$.apply(this,arguments)}function v(u){return l.apply(this,arguments)}function l(){return l=g()(s()().mark(function u(i){var a;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/updateItem.json",e.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"POST",data:i}));case 2:case"end":return e.stop()}},u)})),l.apply(this,arguments)}function c(u){return _.apply(this,arguments)}function _(){return _=_asyncToGenerator(_regeneratorRuntime().mark(function u(i){var a;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/del.json",e.abrupt("return",request==null?void 0:request(a,{method:"POST",data:_objectSpread({},i)}));case 2:case"end":return e.stop()}},u)})),_.apply(this,arguments)}function t(u){return H.apply(this,arguments)}function H(){return H=g()(s()().mark(function u(i){var a;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/submit.json?id="+i,e.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"POST"}));case 2:case"end":return e.stop()}},u)})),H.apply(this,arguments)}function F(u){return N.apply(this,arguments)}function N(){return N=g()(s()().mark(function u(i){var a;return s()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/inventory/inbill/purchaseInstock.json",e.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"POST",data:i}));case 2:case"end":return e.stop()}},u)})),N.apply(this,arguments)}},19515:function(ne,k,r){r.d(k,{P:function(){return I},V:function(){return n}});var U=r(64599),x=r.n(U),L=r(19632),s=r.n(L),Z=r(27484),g=r.n(Z);function n(){var o=g()().format("YYYYMMDDHHmmssSSS").toString();return o}function I(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],R=s()(o),O=x()(R),y;try{for(O.s();!(y=O.n()).done;){var d=y.value;!(d!=null&&d.valueType)||(d==null?void 0:d.valueType)!=="group"||!(d!=null&&d.columns)||!(d!=null&&d.columns.length)||R.push.apply(R,s()(d==null?void 0:d.columns))}}catch(E){O.e(E)}finally{O.f()}return R.filter(function(E){return E.valueType!=="group"})}}}]);
