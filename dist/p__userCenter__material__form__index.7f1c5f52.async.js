"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[782],{31345:function(me,K,r){r.r(K),r.d(K,{default:function(){return H}});var z=r(19632),N=r.n(z),J=r(5574),i=r.n(J),Q=r(97857),y=r.n(Q),l=r(15009),h=r.n(l),R=r(99289),b=r.n(R),v=r(12578);function U(d,m,c){return o.apply(this,arguments)}function o(){return o=b()(h()().mark(function d(m,c,g){var a;return h()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return a="/staff/web/userCenter/material/form/page.json",C.abrupt("return",v.request===null||v.request===void 0?void 0:(0,v.request)(a,{method:"GET",params:{params:m,sort:c,filter:g}}));case 2:case"end":return C.stop()}},d)})),o.apply(this,arguments)}function L(d){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function d(m){var c;return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c="/staff/web/userCenter/material/form/update.json",a.abrupt("return",request==null?void 0:request(c,{method:"POST",data:m}));case 2:case"end":return a.stop()}},d)})),D.apply(this,arguments)}function he(d){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function d(m){var c;return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c="/staff/web/userCenter/material/form/getById.json",a.abrupt("return",request==null?void 0:request(c,{method:"GET",params:{id:m}}));case 2:case"end":return a.stop()}},d)})),B.apply(this,arguments)}function ve(d){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function d(m){var c;return _regeneratorRuntime().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c="/staff/web/userCenter/material/form/del.json",a.abrupt("return",request==null?void 0:request(c,{method:"POST",data:_objectSpread({},m)}));case 2:case"end":return a.stop()}},d)})),A.apply(this,arguments)}function fe(){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function d(){var m;return _regeneratorRuntime().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:return m="/staff/web/userCenter/material/form/page.json",g.abrupt("return",request==null?void 0:request(m,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return g.stop()}},d)})),F.apply(this,arguments)}var _e=r(97131),W=r(30077),f=r(67294),x=[{valueType:"group",columns:[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialName",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m"},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C"}]},width:"m"}]},{valueType:"group",columns:[{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m"},{title:"\u5931\u6548\u671F",dataIndex:"exp",sorter:!0,valueType:"date",tooltip:"\u65E5\u671F",formItemProps:{rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5931\u6548\u671F"}]},width:"m",hideInSearch:!0,readonly:!0}]}],S=r(19515),X=r(37476),u=r(26855),t=r(2453),n=r(28248),s=r(6493),e=r(85893),ee=function(d){var m,c,g,a=(m=f.useRef)===null||m===void 0?void 0:m(),j=(0,f.useState)(!1),C=i()(j,2),ae=C[0],q=C[1],re=(c=f.useRef)===null||c===void 0?void 0:c(),te=f.useState===null||f.useState===void 0?void 0:(0,f.useState)([]),ue=i()(te,2),ge=ue[0],G=ue[1],V=t.ZP===null||t.ZP===void 0||(g=t.ZP.useMessage)===null||g===void 0?void 0:g.call(t.ZP),M=i()(V,2),I=M[0],Pe=M[1],ye=function(){var Y=b()(h()().mark(function $(){var p,P,_,E,ne;return h()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!se){O.next=7;break}return O.next=3,s.FO===null||s.FO===void 0?void 0:(0,s.FO)(se);case 3:if(_=O.sent,!(_!=null&&_.data)){O.next=6;break}return O.abrupt("return",a==null||(E=a.current)===null||E===void 0||(ne=E.setFieldsValue)===null||ne===void 0?void 0:ne.call(E,y()({},_==null?void 0:_.data)));case 6:return O.abrupt("return",a==null||(p=a.current)===null||p===void 0||(P=p.setFieldsValue)===null||P===void 0?void 0:P.call(p,{id:se}));case 7:case"end":return O.stop()}},$)}));return function(){return Y.apply(this,arguments)}}(),Oe={id:"",title:""},se=d.id,be=d.trigger,ie=d.onOk,Ie=function(){var Y=b()(h()().mark(function $(p){var P,_,E;return h()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return p=y()(y()({},p),{},{id:se}),w.next=3,s.Vx===null||s.Vx===void 0?void 0:(0,s.Vx)(p);case 3:if(_=w.sent,(_==null?void 0:_.code)===0){w.next=8;break}return t.ZP===null||t.ZP===void 0||(E=t.ZP.error)===null||E===void 0||E.call(t.ZP,_==null?void 0:_.message),q==null||q(!1),w.abrupt("return",!1);case 8:return t.ZP===null||t.ZP===void 0||(P=t.ZP.success)===null||P===void 0||P.call(t.ZP,"\u63D0\u4EA4\u6210\u529F"),ie==null||ie(),q==null||q(!1),w.abrupt("return",!0);case 12:case"end":return w.stop()}},$)}));return function(p){return Y.apply(this,arguments)}}(),we=function(){var Y=b()(h()().mark(function $(p){var P;return h()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:n.Z===null||n.Z===void 0||(P=n.Z.confirm)===null||P===void 0||P.call(n.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(p==null?void 0:p.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){b()(h()().mark(function w(){var O,T,oe,le,de,ce;return h()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return k.next=2,s.IV===null||s.IV===void 0?void 0:(0,s.IV)(p==null||(O=p.map)===null||O===void 0?void 0:O.call(p,function(pe){return pe==null?void 0:pe.id}));case 2:if(T=k.sent,(T==null?void 0:T.code)===0){k.next=7;break}return k.abrupt("return",I==null||(oe=I.error)===null||oe===void 0?void 0:oe.call(I,(T==null?void 0:T.message)||"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5"));case 7:G==null||G([]),re==null||(le=re.current)===null||le===void 0||(de=le.reload)===null||de===void 0||de.call(le),I==null||(ce=I.success)===null||ce===void 0||ce.call(I,(T==null?void 0:T.message)||"\u5220\u9664\u64CD\u4F5C\u6210\u529F");case 10:case"end":return k.stop()}},w)}))()}});case 1:case"end":return E.stop()}},$)}));return function(p){return Y.apply(this,arguments)}}(),Ee=[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialId",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m",hideInSearch:!0},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C"}]},width:"m",hideInSearch:!0},{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m",hideInSearch:!0}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(X.Y,{formRef:a,onFinish:Ie,modalProps:{destroyOnClose:!0,okButtonProps:{loading:ae}},onOpenChange:ye,initialValues:Oe,title:"\u7F16\u8F91\u4FE1\u606F",trigger:be,children:[(0,e.jsx)(u.Z,{layoutType:"Embed",columns:x}),(0,e.jsx)(W.Z,{headerTitle:"\u660E\u7EC6\u8868\u683C",rowKey:"id",search:!1,toolBarRender:function(){return[(0,e.jsx)(e.Fragment,{children:" "})]},columns:Ee,request:s.Md})]})})},Z=r(14726),H=function(){var d,m=(0,f.useState)(""),c=i()(m,2),g=c[0],a=c[1],j=(d=f.useRef)===null||d===void 0?void 0:d(),C=f.useState===null||f.useState===void 0?void 0:(0,f.useState)([]),ae=i()(C,2),q=ae[0],re=ae[1],te=v.useIntl===null||v.useIntl===void 0?void 0:(0,v.useIntl)(),ue=[].concat(N()(S.P===null||S.P===void 0?void 0:(0,S.P)(x)),[{title:(0,e.jsx)(v.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(V,M){var I;return[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(ee,{trigger:(0,e.jsx)(Z.ZP,{type:"primary",children:"\u8BE6 \u60C5"}),id:M==null?void 0:M.id,onOk:j==null||(I=j.current)===null||I===void 0?void 0:I.reload},M.id)})]}}]),ge=function(){var V;a==null||a(S.V===null||S.V===void 0?void 0:(0,S.V)()),j==null||(V=j.current)===null||V===void 0||V.reload()};return f.useEffect===null||f.useEffect===void 0||(0,f.useEffect)(function(){a==null||a(S.V===null||S.V===void 0?void 0:(0,S.V)())},[]),(0,e.jsx)(_e._z,{children:(0,e.jsx)(W.Z,{headerTitle:te==null?void 0:te.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:j,rowKey:"id",toolBarRender:function(){return[]},request:U,columns:ue,rowSelection:{onChange:function(V,M){re(M)}}})})}},6493:function(me,K,r){r.d(K,{$G:function(){return fe},FO:function(){return U},IV:function(){return L},Md:function(){return h},Ps:function(){return f},Vx:function(){return b},ZI:function(){return ve}});var z=r(97857),N=r.n(z),J=r(15009),i=r.n(J),Q=r(99289),y=r.n(Q),l=r(12578);function h(u,t,n){return R.apply(this,arguments)}function R(){return R=y()(i()().mark(function u(t,n,s){var e;return i()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:return e="/staff/web/userCenter/purchaseOrder/purchaseOrder/page.json",Z.abrupt("return",l.request===null||l.request===void 0?void 0:(0,l.request)(e,{method:"GET",params:{params:t,sort:n,filter:s}}));case 2:case"end":return Z.stop()}},u)})),R.apply(this,arguments)}function b(u){return v.apply(this,arguments)}function v(){return v=y()(i()().mark(function u(t){var n;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/update.json",e.abrupt("return",l.request===null||l.request===void 0?void 0:(0,l.request)(n,{method:"POST",data:t}));case 2:case"end":return e.stop()}},u)})),v.apply(this,arguments)}function U(u){return o.apply(this,arguments)}function o(){return o=y()(i()().mark(function u(t){var n;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/getById.json",e.abrupt("return",l.request===null||l.request===void 0?void 0:(0,l.request)(n,{method:"GET",params:{id:t}}));case 2:case"end":return e.stop()}},u)})),o.apply(this,arguments)}function L(u){return D.apply(this,arguments)}function D(){return D=y()(i()().mark(function u(t){var n;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/del.json",e.abrupt("return",l.request===null||l.request===void 0?void 0:(0,l.request)(n,{method:"POST",data:N()({},t)}));case 2:case"end":return e.stop()}},u)})),D.apply(this,arguments)}function he(){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var t;return _regeneratorRuntime().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return t="/staff/web/userCenter/purchaseOrder/purchaseOrder/page.json",s.abrupt("return",request==null?void 0:request(t,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return s.stop()}},u)})),B.apply(this,arguments)}function ve(u,t,n,s){return A.apply(this,arguments)}function A(){return A=y()(i()().mark(function u(t,n,s,e){var ee;return i()().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return ee="/staff/web/userCenter/purchaseOrder/purchaseOrderItem/page.json?orderId="+t,H.abrupt("return",l.request===null||l.request===void 0?void 0:(0,l.request)(ee,{method:"GET",params:{params:n,sort:s,filter:e}}));case 2:case"end":return H.stop()}},u)})),A.apply(this,arguments)}function fe(u){return F.apply(this,arguments)}function F(){return F=y()(i()().mark(function u(t){var n;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/updateItem.json",e.abrupt("return",l.request===null||l.request===void 0?void 0:(0,l.request)(n,{method:"POST",data:t}));case 2:case"end":return e.stop()}},u)})),F.apply(this,arguments)}function _e(u){return W.apply(this,arguments)}function W(){return W=_asyncToGenerator(_regeneratorRuntime().mark(function u(t){var n;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/del.json",e.abrupt("return",request==null?void 0:request(n,{method:"POST",data:_objectSpread({},t)}));case 2:case"end":return e.stop()}},u)})),W.apply(this,arguments)}function f(u){return x.apply(this,arguments)}function x(){return x=y()(i()().mark(function u(t){var n;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/submit.json?id="+t,e.abrupt("return",l.request===null||l.request===void 0?void 0:(0,l.request)(n,{method:"POST"}));case 2:case"end":return e.stop()}},u)})),x.apply(this,arguments)}function S(u){return X.apply(this,arguments)}function X(){return X=_asyncToGenerator(_regeneratorRuntime().mark(function u(t){var n;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/inventory/inbill/purchaseInstock.json",e.abrupt("return",request==null?void 0:request(n,{method:"POST",data:t}));case 2:case"end":return e.stop()}},u)})),X.apply(this,arguments)}},19515:function(me,K,r){r.d(K,{P:function(){return h},V:function(){return l}});var z=r(64599),N=r.n(z),J=r(19632),i=r.n(J),Q=r(27484),y=r.n(Q);function l(){var R=y()().format("YYYYMMDDHHmmssSSS").toString();return R}function h(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],b=i()(R),v=N()(b),U;try{for(v.s();!(U=v.n()).done;){var o=U.value;!(o!=null&&o.valueType)||(o==null?void 0:o.valueType)!=="group"||!(o!=null&&o.columns)||!(o!=null&&o.columns.length)||b.push.apply(b,i()(o==null?void 0:o.columns))}}catch(L){v.e(L)}finally{v.f()}return b.filter(function(L){return L.valueType!=="group"})}}}]);
