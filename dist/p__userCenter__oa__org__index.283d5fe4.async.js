"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[273],{77058:function(ae,V,e){e.r(V),e.d(V,{default:function(){return te}});var w=e(15009),h=e.n(w),x=e(99289),s=e.n(x),G=e(19632),T=e.n(G),o=e(5574),I=e.n(o),R=e(97857),j=e.n(R),b=e(37476),U=e(26855),r=e(2453),c=e(36285),v=e(67294),J=[{valueType:"group",columns:[{title:"\u540D \u79F0",dataIndex:"name",sorter:!0,width:"md",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}}]}],i=e(85893),d=function(A){var F,S=(F=v.useRef)===null||F===void 0?void 0:F(),Y=(0,v.useState)(!1),k=I()(Y,2),$=k[0],m=k[1],Q=function(){var L=s()(h()().mark(function p(){var E,M,a,C,W;return h()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!D){P.next=7;break}return P.next=3,c.FO===null||c.FO===void 0?void 0:(0,c.FO)(D);case 3:if(a=P.sent,!(a!=null&&a.data)){P.next=6;break}return P.abrupt("return",S==null||(C=S.current)===null||C===void 0||(W=C.setFieldsValue)===null||W===void 0?void 0:W.call(C,j()({},a==null?void 0:a.data)));case 6:return P.abrupt("return",S==null||(E=S.current)===null||E===void 0||(M=E.setFieldsValue)===null||M===void 0?void 0:M.call(E,{id:D}));case 7:case"end":return P.stop()}},p)}));return function(){return L.apply(this,arguments)}}(),z={id:"",title:""},D=A.id,K=A.trigger,Z=A.onOk,X=function(){var L=s()(h()().mark(function p(E){var M,a,C;return h()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return m(!0),E=j()(j()({},E),{},{id:D}),y.next=4,c.Vx===null||c.Vx===void 0?void 0:(0,c.Vx)(E);case 4:if(a=y.sent,(a==null?void 0:a.code)===0){y.next=9;break}return r.ZP===null||r.ZP===void 0||(C=r.ZP.error)===null||C===void 0||C.call(r.ZP,a==null?void 0:a.message),m(!1),y.abrupt("return",!1);case 9:return r.ZP===null||r.ZP===void 0||(M=r.ZP.success)===null||M===void 0||M.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),Z==null||Z(),m(!1),y.abrupt("return",!0);case 13:case"end":return y.stop()}},p)}));return function(E){return L.apply(this,arguments)}}();return(0,i.jsx)(b.Y,{formRef:S,onFinish:X,modalProps:{destroyOnClose:!0,okButtonProps:{loading:$}},onOpenChange:Q,initialValues:z,title:"\u7F16\u8F91\u4FE1\u606F",trigger:K,children:(0,i.jsx)(U.Z,{layoutType:"Embed",columns:J})})},g=e(97131),_=e(30077),l=e(12578),n=e(14726),H=e(28248),f=e(19515),te=function(){var A,F,S=(0,v.useState)(""),Y=I()(S,2),k=Y[0],$=Y[1],m=(A=v.useRef)===null||A===void 0?void 0:A(),Q=v.useState===null||v.useState===void 0?void 0:(0,v.useState)([]),z=I()(Q,2),D=z[0],K=z[1],Z=l.useIntl===null||l.useIntl===void 0?void 0:(0,l.useIntl)(),X=r.ZP===null||r.ZP===void 0||(F=r.ZP.useMessage)===null||F===void 0?void 0:F.call(r.ZP),L=I()(X,2),p=L[0],E=L[1],M=l.useRequest===null||l.useRequest===void 0?void 0:(0,l.useRequest)(c.IV,{manual:!0,onSuccess:function(){var u,t,O;K==null||K([]),m==null||(u=m.current)===null||u===void 0||(t=u.reload)===null||t===void 0||t.call(u),p==null||(O=p.success)===null||O===void 0||O.call(p,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var u;p==null||(u=p.error)===null||u===void 0||u.call(p,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),a=M.run,C=M.loading,W=[].concat(T()(f.P===null||f.P===void 0?void 0:(0,f.P)(J)),[{title:(0,i.jsx)(l.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(u,t){var O;return[(0,i.jsx)(d,{trigger:(0,i.jsx)(n.ZP,{children:"\u7F16 \u8F91"}),id:t==null?void 0:t.id,onOk:m==null||(O=m.current)===null||O===void 0?void 0:O.reload},t.id)]}}]),y=(0,v.useCallback)(function(){var B=s()(h()().mark(function u(t){var O;return h()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:H.Z===null||H.Z===void 0||(O=H.Z.confirm)===null||O===void 0||O.call(H.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(t==null?void 0:t.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var ee;(ee=function(){var le=s()(h()().mark(function ue(){var re;return h()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,a==null?void 0:a(t==null||(re=t.map)===null||re===void 0?void 0:re.call(t,function(ne){return ne==null?void 0:ne.id}));case 2:case"end":return N.stop()}},ue)}));return function(){return le.apply(this,arguments)}}())===null||ee===void 0||ee()}});case 1:case"end":return q.stop()}},u)}));return function(u){return B.apply(this,arguments)}}(),[a]),P=function(){var u;$==null||$(f.V===null||f.V===void 0?void 0:(0,f.V)()),m==null||(u=m.current)===null||u===void 0||u.reload()};return v.useEffect===null||v.useEffect===void 0||(0,v.useEffect)(function(){$==null||$(f.V===null||f.V===void 0?void 0:(0,f.V)())},[]),(0,i.jsxs)(g._z,{children:[E,(0,i.jsx)(_.Z,{headerTitle:Z==null?void 0:Z.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:m,rowKey:"id",toolBarRender:function(){return[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.ZP,{danger:!0,disabled:!D||!D.length,onClick:function(){y(D)},children:"\u5220 \u9664"}),(0,i.jsx)(d,{trigger:(0,i.jsx)(n.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:k,onOk:P})]})]},request:c.Md,columns:W,rowSelection:{onChange:function(u,t){K(t)}}})]})}},36285:function(ae,V,e){e.d(V,{FO:function(){return U},IV:function(){return c},Md:function(){return I},Vx:function(){return j}});var w=e(97857),h=e.n(w),x=e(15009),s=e.n(x),G=e(99289),T=e.n(G),o=e(12578);function I(d,g,_){return R.apply(this,arguments)}function R(){return R=T()(s()().mark(function d(g,_,l){var n;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return n="/staff/web/userCenter/oa/post/page.json",f.abrupt("return",o.request===null||o.request===void 0?void 0:(0,o.request)(n,{method:"GET",params:{params:g,sort:_,filter:l}}));case 2:case"end":return f.stop()}},d)})),R.apply(this,arguments)}function j(d){return b.apply(this,arguments)}function b(){return b=T()(s()().mark(function d(g){var _;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return _="/staff/web/userCenter/oa/post/update.json",n.abrupt("return",o.request===null||o.request===void 0?void 0:(0,o.request)(_,{method:"POST",data:g}));case 2:case"end":return n.stop()}},d)})),b.apply(this,arguments)}function U(d){return r.apply(this,arguments)}function r(){return r=T()(s()().mark(function d(g){var _;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return _="/staff/web/userCenter/oa/post/getById.json",n.abrupt("return",o.request===null||o.request===void 0?void 0:(0,o.request)(_,{method:"GET",params:{id:g}}));case 2:case"end":return n.stop()}},d)})),r.apply(this,arguments)}function c(d){return v.apply(this,arguments)}function v(){return v=T()(s()().mark(function d(g){var _;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return _="/staff/web/userCenter/oa/post/del.json",n.abrupt("return",o.request===null||o.request===void 0?void 0:(0,o.request)(_,{method:"POST",data:h()({},g)}));case 2:case"end":return n.stop()}},d)})),v.apply(this,arguments)}function J(){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function d(){var g;return _regeneratorRuntime().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return g="/staff/web/userCenter/oa/post/page.json",l.abrupt("return",request==null?void 0:request(g,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return l.stop()}},d)})),i.apply(this,arguments)}},19515:function(ae,V,e){e.d(V,{P:function(){return I},V:function(){return o}});var w=e(64599),h=e.n(w),x=e(19632),s=e.n(x),G=e(27484),T=e.n(G);function o(){var R=T()().format("YYYYMMDDHHmmssSSS").toString();return R}function I(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],j=s()(R),b=h()(j),U;try{for(b.s();!(U=b.n()).done;){var r=U.value;!(r!=null&&r.valueType)||(r==null?void 0:r.valueType)!=="group"||!(r!=null&&r.columns)||!(r!=null&&r.columns.length)||j.push.apply(j,s()(r==null?void 0:r.columns))}}catch(c){b.e(c)}finally{b.f()}return j.filter(function(c){return c.valueType!=="group"})}}}]);
