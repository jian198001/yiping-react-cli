"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[337],{23970:function(te,A,e){e.r(A),e.d(A,{default:function(){return de}});var V=e(15009),s=e.n(V),x=e(99289),m=e.n(x),U=e(19632),K=e.n(U),L=e(5574),R=e.n(L),$=e(97857),E=e.n($),_=e(37476),D=e(26855),r=e(2453),n=e(12578);function ue(a,l,c){return k.apply(this,arguments)}function k(){return k=m()(s()().mark(function a(l,c,f){var t;return s()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return t="/staff/web/userCenter/oa/staff/page.json",d.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(t,{method:"GET",params:{params:l,sort:c,filter:f}}));case 2:case"end":return d.stop()}},a)})),k.apply(this,arguments)}function G(a){return W.apply(this,arguments)}function W(){return W=m()(s()().mark(function a(l){var c;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c="/staff/web/userCenter/oa/staff/update.json",t.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(c,{method:"POST",data:l}));case 2:case"end":return t.stop()}},a)})),W.apply(this,arguments)}function le(a){return H.apply(this,arguments)}function H(){return H=m()(s()().mark(function a(l){var c;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c="/staff/web/userCenter/oa/staff/getById.json",t.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(c,{method:"GET",params:{id:l}}));case 2:case"end":return t.stop()}},a)})),H.apply(this,arguments)}function se(a){return Y.apply(this,arguments)}function Y(){return Y=m()(s()().mark(function a(l){var c;return s()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c="/staff/web/userCenter/oa/staff/del.json",t.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(c,{method:"POST",data:E()({},l)}));case 2:case"end":return t.stop()}},a)})),Y.apply(this,arguments)}function me(){return z.apply(this,arguments)}function z(){return z=_asyncToGenerator(_regeneratorRuntime().mark(function a(){var l;return _regeneratorRuntime().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return l="/staff/web/userCenter/oa/staff/page.json",f.abrupt("return",request==null?void 0:request(l,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return f.stop()}},a)})),z.apply(this,arguments)}var g=e(67294),re=[{valueType:"group",columns:[{title:"\u59D3 \u540D",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}},{title:"\u624B\u673A\u53F7\u7801",dataIndex:"mobile",sorter:!0}]},{valueType:"group",columns:[{title:"\u90AE \u7BB1",dataIndex:"email",sorter:!0,width:"md"}]},{valueType:"group",columns:[{title:"\u90E8 \u95E8",dataIndex:"deptId",sorter:!0,valueType:"cascader",width:"md",formItemProps:{mode:"multiple"}},{title:"\u5C97 \u4F4D",dataIndex:"postId",sorter:!0,valueType:"select",width:"md",formItemProps:{mode:"multiple"}}]},{valueType:"group",columns:[{title:"\u5907 \u6CE8",dataIndex:"remark",sorter:!1,valueType:"textarea",width:"lg",hideInTable:!0,hideInSearch:!0}]}],p=e(85893),ne=function(a){var l=(0,g.useRef)(),c=(0,g.useState)(!1),f=R()(c,2),t=f[0],h=f[1],d=function(){var F=m()(s()().mark(function S(){var v;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:if(!j){u.next=7;break}return u.next=3,le(j);case 3:if(v=u.sent,!v.data){u.next=6;break}return u.abrupt("return",l.current.setFieldsValue(E()({},v.data)));case 6:return u.abrupt("return",l.current.setFieldsValue({id:j}));case 7:case"end":return u.stop()}},S)}));return function(){return F.apply(this,arguments)}}(),J={id:"",title:""},j=a.id,Z=a.trigger,I=a.onOk,M=function(){var F=m()(s()().mark(function S(v){var b,u,O;return s()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return h(!0),v=E()(E()({},v),{},{id:j}),P.next=4,G==null?void 0:G(v);case 4:if(u=P.sent,(u==null?void 0:u.code)===0){P.next=9;break}return r.ZP===null||r.ZP===void 0||(O=r.ZP.error)===null||O===void 0||O.call(r.ZP,u==null?void 0:u.message),h(!1),P.abrupt("return",!1);case 9:return r.ZP===null||r.ZP===void 0||(b=r.ZP.success)===null||b===void 0||b.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),I==null||I(),h(!1),P.abrupt("return",!0);case 13:case"end":return P.stop()}},S)}));return function(v){return F.apply(this,arguments)}}();return(0,p.jsx)(_.Y,{formRef:l,onFinish:M,modalProps:{destroyOnClose:!0,okButtonProps:{loading:t}},onOpenChange:d,initialValues:J,title:"\u7F16\u8F91\u4FE1\u606F",trigger:Z,children:(0,p.jsx)(D.Z,{layoutType:"Embed",columns:re,onFinish:M})})},oe=e(97131),ie=e(30077),N=e(14726),w=e(28248),T=e(19515),de=function(){var a,l,c=(0,g.useState)(""),f=R()(c,2),t=f[0],h=f[1],d=(a=g.useRef)===null||a===void 0?void 0:a(),J=g.useState===null||g.useState===void 0?void 0:(0,g.useState)([]),j=R()(J,2),Z=j[0],I=j[1],M=n.useIntl===null||n.useIntl===void 0?void 0:(0,n.useIntl)(),F=r.ZP===null||r.ZP===void 0||(l=r.ZP.useMessage)===null||l===void 0?void 0:l.call(r.ZP),S=R()(F,2),v=S[0],b=S[1],u=n.useRequest===null||n.useRequest===void 0?void 0:(0,n.useRequest)(se,{manual:!0,onSuccess:function(){var o,i,y;I==null||I([]),d==null||(o=d.current)===null||o===void 0||(i=o.reload)===null||i===void 0||i.call(o),v==null||(y=v.success)===null||y===void 0||y.call(v,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var o;v==null||(o=v.error)===null||o===void 0||o.call(v,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),O=u.run,ve=u.loading,P=[].concat(K()(T.P===null||T.P===void 0?void 0:(0,T.P)(re)),[{title:(0,p.jsx)(n.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(o,i){var y;return[(0,p.jsx)(ne,{trigger:(0,p.jsx)(N.ZP,{children:"\u7F16 \u8F91"}),id:i==null?void 0:i.id,onOk:d==null||(y=d.current)===null||y===void 0?void 0:y.reload},i.id)]}}]),ce=(0,g.useCallback)(function(){var C=m()(s()().mark(function o(i){var y;return s()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:w.Z===null||w.Z===void 0||(y=w.Z.confirm)===null||y===void 0||y.call(w.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(i==null?void 0:i.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var X;(X=function(){var pe=m()(s()().mark(function ae(){var q;return s()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,O==null?void 0:O(i==null||(q=i.map)===null||q===void 0?void 0:q.call(i,function(ee){return ee==null?void 0:ee.id}));case 2:case"end":return B.stop()}},ae)}));return function(){return pe.apply(this,arguments)}}())===null||X===void 0||X()}});case 1:case"end":return Q.stop()}},o)}));return function(o){return C.apply(this,arguments)}}(),[O]),fe=function(){var o;h==null||h(T.V===null||T.V===void 0?void 0:(0,T.V)()),d==null||(o=d.current)===null||o===void 0||o.reload()};return g.useEffect===null||g.useEffect===void 0||(0,g.useEffect)(function(){h==null||h(T.V===null||T.V===void 0?void 0:(0,T.V)())},[]),(0,p.jsxs)(oe._z,{children:[b,(0,p.jsx)(ie.Z,{headerTitle:M==null?void 0:M.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:d,rowKey:"id",toolBarRender:function(){return[(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(N.ZP,{danger:!0,disabled:!Z||!Z.length,onClick:function(){ce(Z)},children:"\u5220 \u9664"}),(0,p.jsx)(ne,{trigger:(0,p.jsx)(N.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:t,onOk:fe})]})]},request:ue,columns:P,rowSelection:{onChange:function(o,i){I(i)}}})]})}},19515:function(te,A,e){e.d(A,{P:function(){return R},V:function(){return L}});var V=e(64599),s=e.n(V),x=e(19632),m=e.n(x),U=e(27484),K=e.n(U);function L(){var $=K()().format("YYYYMMDDHHmmssSSS").toString();return $}function R(){var $=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=m()($),_=s()(E),D;try{for(_.s();!(D=_.n()).done;){var r=D.value;!(r!=null&&r.valueType)||(r==null?void 0:r.valueType)!=="group"||!(r!=null&&r.columns)||!(r!=null&&r.columns.length)||E.push.apply(E,m()(r==null?void 0:r.columns))}}catch(n){_.e(n)}finally{_.f()}return E.filter(function(n){return n.valueType!=="group"})}}}]);
