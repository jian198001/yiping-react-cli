"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[337],{23970:function(oe,D,e){e.r(D),e.d(D,{default:function(){return fe}});var U=e(15009),s=e.n(U),x=e(99289),p=e.n(x),K=e(19632),L=e.n(K),k=e(5574),b=e.n(k),Z=e(97857),P=e.n(Z),M=e(37476),w=e(26855),r=e(2453),t=e(12578);function ie(n,u,d){return G.apply(this,arguments)}function G(){return G=p()(s()().mark(function n(u,d,v){var a;return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a="/staff/web/userCenter/oa/staff/page.json",o.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(a,{method:"GET",params:{params:u,sort:d,filter:v}}));case 2:case"end":return o.stop()}},n)})),G.apply(this,arguments)}function W(n){return H.apply(this,arguments)}function H(){return H=p()(s()().mark(function n(u){var d;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d="/staff/web/userCenter/oa/staff/update.json",a.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(d,{method:"POST",data:u}));case 2:case"end":return a.stop()}},n)})),H.apply(this,arguments)}function de(n){return Y.apply(this,arguments)}function Y(){return Y=p()(s()().mark(function n(u){var d;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d="/staff/web/userCenter/oa/staff/getById.json",a.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(d,{method:"GET",params:{id:u}}));case 2:case"end":return a.stop()}},n)})),Y.apply(this,arguments)}function z(n){return N.apply(this,arguments)}function N(){return N=p()(s()().mark(function n(u){var d;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return d="/staff/web/userCenter/oa/staff/del.json",a.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(d,{method:"POST",data:P()({},u)}));case 2:case"end":return a.stop()}},n)})),N.apply(this,arguments)}function pe(){return J.apply(this,arguments)}function J(){return J=_asyncToGenerator(_regeneratorRuntime().mark(function n(){var u;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return u="/staff/web/userCenter/oa/staff/page.json",v.abrupt("return",request==null?void 0:request(u,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return v.stop()}},n)})),J.apply(this,arguments)}var h=e(67294),ue=[{valueType:"group",columns:[{title:"\u59D3 \u540D",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}},{title:"\u624B\u673A\u53F7\u7801",dataIndex:"mobile",sorter:!0}]},{valueType:"group",columns:[{title:"\u90AE \u7BB1",dataIndex:"email",sorter:!0,width:"md"}]},{valueType:"group",columns:[{title:"\u90E8 \u95E8",dataIndex:"deptId",sorter:!0,valueType:"cascader",width:"md",formItemProps:{mode:"multiple"}},{title:"\u5C97 \u4F4D",dataIndex:"postId",sorter:!0,valueType:"select",width:"md",formItemProps:{mode:"multiple"}}]},{valueType:"group",columns:[{title:"\u5907 \u6CE8",dataIndex:"remark",sorter:!1,valueType:"textarea",width:"lg",hideInTable:!0,hideInSearch:!0}]}],m=e(85893),le=function(n){var u=(0,h.useRef)(),d=(0,h.useState)(!1),v=b()(d,2),a=v[0],g=v[1],o=function(){var _=p()(s()().mark(function O(){var i;return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!j){l.next=7;break}return l.next=3,de(j);case 3:if(i=l.sent,!i.data){l.next=6;break}return l.abrupt("return",u.current.setFieldsValue(P()({},i.data)));case 6:return l.abrupt("return",u.current.setFieldsValue({id:j}));case 7:case"end":return l.stop()}},O)}));return function(){return _.apply(this,arguments)}}(),X={id:"",title:""},j=n.id,F=n.trigger,I=n.onOk,$=function(){var _=p()(s()().mark(function O(i){var R,l,A;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return g(!0),i=P()(P()({},i),{},{id:j}),f.next=4,W==null?void 0:W(i);case 4:if(l=f.sent,(l==null?void 0:l.code)===0){f.next=9;break}return r.ZP===null||r.ZP===void 0||(A=r.ZP.error)===null||A===void 0||A.call(r.ZP,l==null?void 0:l.message),g(!1),f.abrupt("return",!1);case 9:return r.ZP===null||r.ZP===void 0||(R=r.ZP.success)===null||R===void 0||R.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),I==null||I(),g(!1),f.abrupt("return",!0);case 13:case"end":return f.stop()}},O)}));return function(i){return _.apply(this,arguments)}}();return(0,m.jsx)(M.Y,{formRef:u,onFinish:$,modalProps:{destroyOnClose:!0,okButtonProps:{loading:a}},onOpenChange:o,initialValues:X,title:"\u7F16\u8F91\u4FE1\u606F",trigger:F,children:(0,m.jsx)(w.Z,{layoutType:"Embed",columns:ue,onFinish:$})})},ve=e(97131),ce=e(30077),Q=e(14726),B=e(28248),T=e(19515),fe=function(){var n,u,d=(0,h.useState)(""),v=b()(d,2),a=v[0],g=v[1],o=(n=h.useRef)===null||n===void 0?void 0:n(),X=h.useState===null||h.useState===void 0?void 0:(0,h.useState)([]),j=b()(X,2),F=j[0],I=j[1],$=t.useIntl===null||t.useIntl===void 0?void 0:(0,t.useIntl)(),_=r.ZP===null||r.ZP===void 0||(u=r.ZP.useMessage)===null||u===void 0?void 0:u.call(r.ZP),O=b()(_,2),i=O[0],R=O[1],l=[].concat(L()(T.P===null||T.P===void 0?void 0:(0,T.P)(ue)),[{title:(0,m.jsx)(t.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(E,c){var S;return[(0,m.jsx)(le,{trigger:(0,m.jsx)(Q.ZP,{children:"\u7F16 \u8F91"}),id:c==null?void 0:c.id,onOk:o==null||(S=o.current)===null||S===void 0?void 0:S.reload},c.id)]}}]),A=function(){var f=p()(s()().mark(function E(c){var S;return s()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:B.Z===null||B.Z===void 0||(S=B.Z.confirm)===null||S===void 0||S.call(B.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(c==null?void 0:c.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){p()(s()().mark(function me(){var ee,y,re,V,ne,ae;return s()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return C.next=2,z==null?void 0:z(c==null||(ee=c.map)===null||ee===void 0?void 0:ee.call(c,function(te){return te==null?void 0:te.id}));case 2:if(y=C.sent,(y==null?void 0:y.code)===0){C.next=7;break}return C.abrupt("return",i==null||(re=i.error)===null||re===void 0?void 0:re.call(i,(y==null?void 0:y.message)||"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5"));case 7:I==null||I([]),o==null||(V=o.current)===null||V===void 0||(ne=V.reload)===null||ne===void 0||ne.call(V),i==null||(ae=i.success)===null||ae===void 0||ae.call(i,(y==null?void 0:y.message)||"\u5220\u9664\u64CD\u4F5C\u6210\u529F");case 10:case"end":return C.stop()}},me)}))()}});case 1:case"end":return q.stop()}},E)}));return function(c){return f.apply(this,arguments)}}(),se=function(){var E;g==null||g(T.V===null||T.V===void 0?void 0:(0,T.V)()),o==null||(E=o.current)===null||E===void 0||E.reload()};return h.useEffect===null||h.useEffect===void 0||(0,h.useEffect)(function(){g==null||g(T.V===null||T.V===void 0?void 0:(0,T.V)())},[]),(0,m.jsxs)(ve._z,{children:[R,(0,m.jsx)(ce.Z,{headerTitle:$==null?void 0:$.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:o,rowKey:"id",toolBarRender:function(){return[(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(Q.ZP,{danger:!0,disabled:!F||!F.length,onClick:function(){A(F)},children:"\u5220 \u9664"}),(0,m.jsx)(le,{trigger:(0,m.jsx)(Q.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:a,onOk:se})]})]},request:ie,columns:l,rowSelection:{onChange:function(E,c){I(c)}}})]})}},19515:function(oe,D,e){e.d(D,{P:function(){return b},V:function(){return k}});var U=e(64599),s=e.n(U),x=e(19632),p=e.n(x),K=e(27484),L=e.n(K);function k(){var Z=L()().format("YYYYMMDDHHmmssSSS").toString();return Z}function b(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=p()(Z),M=s()(P),w;try{for(M.s();!(w=M.n()).done;){var r=w.value;!(r!=null&&r.valueType)||(r==null?void 0:r.valueType)!=="group"||!(r!=null&&r.columns)||!(r!=null&&r.columns.length)||P.push.apply(P,p()(r==null?void 0:r.columns))}}catch(t){M.e(t)}finally{M.f()}return P.filter(function(t){return t.valueType!=="group"})}}}]);
