"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[745],{22136:function(pe,L,r){r.r(L),r.d(L,{default:function(){return Ie}});var z=r(19632),Q=r.n(z),J=r(5574),i=r.n(J),X=r(97857),b=r.n(X),s=r(15009),I=r.n(s),C=r(99289),P=r.n(C),f=r(12578);function W(l,m,d){return o.apply(this,arguments)}function o(){return o=P()(I()().mark(function l(m,d,y){var t;return I()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return t="/staff/web/userCenter/inventory/inbill/page.json",$.abrupt("return",f.request===null||f.request===void 0?void 0:(0,f.request)(t,{method:"GET",params:{params:m,sort:d,filter:y}}));case 2:case"end":return $.stop()}},l)})),o.apply(this,arguments)}function x(l){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function l(m){var d;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d="/staff/web/userCenter/inventory/inbill/update.json",t.abrupt("return",request==null?void 0:request(d,{method:"POST",data:m}));case 2:case"end":return t.stop()}},l)})),B.apply(this,arguments)}function _e(l){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function l(m){var d;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d="/staff/web/userCenter/inventory/inbill/getById.json",t.abrupt("return",request==null?void 0:request(d,{method:"GET",params:{id:m}}));case 2:case"end":return t.stop()}},l)})),k.apply(this,arguments)}function ve(l){return A.apply(this,arguments)}function A(){return A=_asyncToGenerator(_regeneratorRuntime().mark(function l(m){var d;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d="/staff/web/userCenter/inventory/inbill/del.json",t.abrupt("return",request==null?void 0:request(d,{method:"POST",data:_objectSpread({},m)}));case 2:case"end":return t.stop()}},l)})),A.apply(this,arguments)}function fe(){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function l(){var m;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return m="/staff/web/userCenter/inventory/inbill/page.json",y.abrupt("return",request==null?void 0:request(m,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return y.stop()}},l)})),F.apply(this,arguments)}function he(l){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime().mark(function l(m){var d;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return d="/staff/web/userCenter/inventory/inbill/consumeInstock.json",t.abrupt("return",request==null?void 0:request(d,{method:"POST",data:m}));case 2:case"end":return t.stop()}},l)})),Z.apply(this,arguments)}var le=r(97131),H=r(30077),g=r(67294),Y=[{valueType:"group",columns:[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialName",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m"},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C"}]},width:"m"}]},{valueType:"group",columns:[{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m"},{title:"\u64CD\u4F5C\u65F6\u95F4",dataIndex:"logTime",sorter:!0,valueType:"datetime",formItemProps:{rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u65F6\u95F4"}]},width:"m"}]}],u=[{valueType:"group",columns:[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialName",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m",hideInSearch:!0,readonly:!0},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m",hideInSearch:!0,readonly:!0},{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m",hideInSearch:!0,readonly:!0},{title:"\u5F52\u8FD8\u6570\u91CF",dataIndex:"instockQuantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5F52\u8FD8\u6570\u91CF"}]},width:"m",hideInSearch:!0}]}],n=r(19515),a=r(37476),p=r(26855),e=r(2453),q=r(28248),_=r(6493),c=r(85893),ge=function(l){var m,d,y,t=(m=g.useRef)===null||m===void 0?void 0:m(),j=(0,g.useState)(!1),$=i()(j,2),ne=$[0],G=$[1],ee=(d=g.useRef)===null||d===void 0?void 0:d(),re=g.useState===null||g.useState===void 0?void 0:(0,g.useState)([]),ue=i()(re,2),be=ue[0],V=ue[1],K=e.ZP===null||e.ZP===void 0||(y=e.ZP.useMessage)===null||y===void 0?void 0:y.call(e.ZP),M=i()(K,2),w=M[0],Te=M[1],Oe=function(){var N=P()(I()().mark(function D(){var v,S,h,E,te;return I()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!ae){O.next=7;break}return O.next=3,_.FO===null||_.FO===void 0?void 0:(0,_.FO)(ae);case 3:if(h=O.sent,!(h!=null&&h.data)){O.next=6;break}return O.abrupt("return",t==null||(E=t.current)===null||E===void 0||(te=E.setFieldsValue)===null||te===void 0?void 0:te.call(E,b()({},h==null?void 0:h.data)));case 6:return O.abrupt("return",t==null||(v=t.current)===null||v===void 0||(S=v.setFieldsValue)===null||S===void 0?void 0:S.call(v,{id:ae}));case 7:case"end":return O.stop()}},D)}));return function(){return N.apply(this,arguments)}}(),Pe={id:"",title:""},ae=l.id,we=l.trigger,ie=l.onOk,Ee=function(){var N=P()(I()().mark(function D(v){var S,h,E;return I()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return v=b()(b()({},v),{},{id:ae}),T.next=3,_.Vx===null||_.Vx===void 0?void 0:(0,_.Vx)(v);case 3:if(h=T.sent,(h==null?void 0:h.code)===0){T.next=8;break}return e.ZP===null||e.ZP===void 0||(E=e.ZP.error)===null||E===void 0||E.call(e.ZP,h==null?void 0:h.message),G==null||G(!1),T.abrupt("return",!1);case 8:return e.ZP===null||e.ZP===void 0||(S=e.ZP.success)===null||S===void 0||S.call(e.ZP,"\u63D0\u4EA4\u6210\u529F"),ie==null||ie(),G==null||G(!1),T.abrupt("return",!0);case 12:case"end":return T.stop()}},D)}));return function(v){return N.apply(this,arguments)}}(),je=function(){var N=P()(I()().mark(function D(v){var S;return I()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:q.Z===null||q.Z===void 0||(S=q.Z.confirm)===null||S===void 0||S.call(q.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(v==null?void 0:v.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){P()(I()().mark(function T(){var O,R,oe,se,de,ce;return I()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,_.IV===null||_.IV===void 0?void 0:(0,_.IV)(v==null||(O=v.map)===null||O===void 0?void 0:O.call(v,function(me){return me==null?void 0:me.id}));case 2:if(R=U.sent,(R==null?void 0:R.code)===0){U.next=7;break}return U.abrupt("return",w==null||(oe=w.error)===null||oe===void 0?void 0:oe.call(w,(R==null?void 0:R.message)||"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5"));case 7:V==null||V([]),ee==null||(se=ee.current)===null||se===void 0||(de=se.reload)===null||de===void 0||de.call(se),w==null||(ce=w.success)===null||ce===void 0||ce.call(w,(R==null?void 0:R.message)||"\u5220\u9664\u64CD\u4F5C\u6210\u529F");case 10:case"end":return U.stop()}},T)}))()}});case 1:case"end":return E.stop()}},D)}));return function(v){return N.apply(this,arguments)}}(),Se=[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialId",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m",hideInSearch:!0},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C"}]},width:"m",hideInSearch:!0},{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m",hideInSearch:!0}];return(0,c.jsx)(c.Fragment,{children:(0,c.jsxs)(a.Y,{formRef:t,onFinish:Ee,modalProps:{destroyOnClose:!0,okButtonProps:{loading:ne}},onOpenChange:Oe,initialValues:Pe,title:"\u7F16\u8F91\u4FE1\u606F",trigger:we,children:[(0,c.jsx)(p.Z,{layoutType:"Embed",columns:Y}),(0,c.jsx)(H.Z,{headerTitle:"\u660E\u7EC6\u8868\u683C",rowKey:"id",search:!1,toolBarRender:function(){return[(0,c.jsx)(c.Fragment,{children:" "})]},columns:Se,request:_.Md})]})})},ye=r(14726),Ie=function(){var l,m=(0,g.useState)(""),d=i()(m,2),y=d[0],t=d[1],j=(l=g.useRef)===null||l===void 0?void 0:l(),$=g.useState===null||g.useState===void 0?void 0:(0,g.useState)([]),ne=i()($,2),G=ne[0],ee=ne[1],re=f.useIntl===null||f.useIntl===void 0?void 0:(0,f.useIntl)(),ue=[].concat(Q()(n.P===null||n.P===void 0?void 0:(0,n.P)(Y)),[{title:(0,c.jsx)(f.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(K,M){var w;return[(0,c.jsx)(c.Fragment,{children:(0,c.jsx)(ge,{trigger:(0,c.jsx)(ye.ZP,{type:"primary",children:"\u8BE6 \u60C5"}),id:M==null?void 0:M.id,onOk:j==null||(w=j.current)===null||w===void 0?void 0:w.reload},M.id)})]}}]),be=function(){var K;t==null||t(n.V===null||n.V===void 0?void 0:(0,n.V)()),j==null||(K=j.current)===null||K===void 0||K.reload()};return g.useEffect===null||g.useEffect===void 0||(0,g.useEffect)(function(){t==null||t(n.V===null||n.V===void 0?void 0:(0,n.V)())},[]),(0,c.jsx)(le._z,{children:(0,c.jsx)(H.Z,{headerTitle:re==null?void 0:re.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:j,rowKey:"id",toolBarRender:function(){return[]},request:W,columns:ue,rowSelection:{onChange:function(K,M){ee(M)}}})})}},6493:function(pe,L,r){r.d(L,{$G:function(){return fe},FO:function(){return W},IV:function(){return x},Md:function(){return I},Ps:function(){return le},Vx:function(){return P},ZI:function(){return ve}});var z=r(97857),Q=r.n(z),J=r(15009),i=r.n(J),X=r(99289),b=r.n(X),s=r(12578);function I(u,n,a){return C.apply(this,arguments)}function C(){return C=b()(i()().mark(function u(n,a,p){var e;return i()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return e="/staff/web/userCenter/purchaseOrder/purchaseOrder/page.json",_.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(e,{method:"GET",params:{params:n,sort:a,filter:p}}));case 2:case"end":return _.stop()}},u)})),C.apply(this,arguments)}function P(u){return f.apply(this,arguments)}function f(){return f=b()(i()().mark(function u(n){var a;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/update.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(a,{method:"POST",data:n}));case 2:case"end":return e.stop()}},u)})),f.apply(this,arguments)}function W(u){return o.apply(this,arguments)}function o(){return o=b()(i()().mark(function u(n){var a;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/getById.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(a,{method:"GET",params:{id:n}}));case 2:case"end":return e.stop()}},u)})),o.apply(this,arguments)}function x(u){return B.apply(this,arguments)}function B(){return B=b()(i()().mark(function u(n){var a;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/del.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(a,{method:"POST",data:Q()({},n)}));case 2:case"end":return e.stop()}},u)})),B.apply(this,arguments)}function _e(){return k.apply(this,arguments)}function k(){return k=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var n;return _regeneratorRuntime().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/page.json",p.abrupt("return",request==null?void 0:request(n,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return p.stop()}},u)})),k.apply(this,arguments)}function ve(u,n,a,p){return A.apply(this,arguments)}function A(){return A=b()(i()().mark(function u(n,a,p,e){var q;return i()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return q="/staff/web/userCenter/purchaseOrder/purchaseOrderItem/page.json?orderId="+n,c.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(q,{method:"GET",params:{params:a,sort:p,filter:e}}));case 2:case"end":return c.stop()}},u)})),A.apply(this,arguments)}function fe(u){return F.apply(this,arguments)}function F(){return F=b()(i()().mark(function u(n){var a;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/updateItem.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(a,{method:"POST",data:n}));case 2:case"end":return e.stop()}},u)})),F.apply(this,arguments)}function he(u){return Z.apply(this,arguments)}function Z(){return Z=_asyncToGenerator(_regeneratorRuntime().mark(function u(n){var a;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/del.json",e.abrupt("return",request==null?void 0:request(a,{method:"POST",data:_objectSpread({},n)}));case 2:case"end":return e.stop()}},u)})),Z.apply(this,arguments)}function le(u){return H.apply(this,arguments)}function H(){return H=b()(i()().mark(function u(n){var a;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/submit.json?id="+n,e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(a,{method:"POST"}));case 2:case"end":return e.stop()}},u)})),H.apply(this,arguments)}function g(u){return Y.apply(this,arguments)}function Y(){return Y=_asyncToGenerator(_regeneratorRuntime().mark(function u(n){var a;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/inventory/inbill/purchaseInstock.json",e.abrupt("return",request==null?void 0:request(a,{method:"POST",data:n}));case 2:case"end":return e.stop()}},u)})),Y.apply(this,arguments)}},19515:function(pe,L,r){r.d(L,{P:function(){return I},V:function(){return s}});var z=r(64599),Q=r.n(z),J=r(19632),i=r.n(J),X=r(27484),b=r.n(X);function s(){var C=b()().format("YYYYMMDDHHmmssSSS").toString();return C}function I(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=i()(C),f=Q()(P),W;try{for(f.s();!(W=f.n()).done;){var o=W.value;!(o!=null&&o.valueType)||(o==null?void 0:o.valueType)!=="group"||!(o!=null&&o.columns)||!(o!=null&&o.columns.length)||P.push.apply(P,i()(o==null?void 0:o.columns))}}catch(x){f.e(x)}finally{f.f()}return P.filter(function(x){return x.valueType!=="group"})}}}]);
