"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[170],{8795:function(re,A,e){e.r(A),e.d(A,{default:function(){return te}});var K=e(15009),m=e.n(K),L=e(99289),a=e.n(L),W=e(19632),M=e.n(W),t=e(5574),T=e.n(t),R=e(97857),P=e.n(R),j=e(37476),F=e(26855),r=e(2453),i=e(12578),b=e(51876),f=e(67294),B=[{valueType:"group",columns:[{title:"\u540D \u79F0",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]},width:"md"},{title:"\u6743 \u9650",dataIndex:"permission",sorter:!0,valueType:"select",width:"md",formItemProps:{mode:"multiple"}}]}],n=e(85893),v=function(I){var D,S=(D=f.useRef)===null||D===void 0?void 0:D(),k=function(){var U=a()(m()().mark(function g(){var l,V,d,C,z;return m()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!E){y.next=7;break}return y.next=3,b.FO===null||b.FO===void 0?void 0:(0,b.FO)(E);case 3:if(d=y.sent,!(d!=null&&d.data)){y.next=6;break}return y.abrupt("return",S==null||(C=S.current)===null||C===void 0||(z=C.setFieldsValue)===null||z===void 0?void 0:z.call(C,P()({},d==null?void 0:d.data)));case 6:return y.abrupt("return",S==null||(l=S.current)===null||l===void 0||(V=l.setFieldsValue)===null||V===void 0?void 0:V.call(l,{id:E}));case 7:case"end":return y.stop()}},g)}));return function(){return U.apply(this,arguments)}}(),J={id:"",title:""},E=I.id,p=I.trigger,x=I.onOk,G=i.useRequest===null||i.useRequest===void 0?void 0:(0,i.useRequest)(b.Vx,{manual:!0,onSuccess:function(){var g;r.ZP===null||r.ZP===void 0||(g=r.ZP.success)===null||g===void 0||g.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),x==null||x()}}),H=G.run,Z=G.loading,Y=function(){var U=a()(m()().mark(function g(l){return m()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return l=P()(P()({},l),{},{id:E}),H==null||H(l),d.abrupt("return",!0);case 3:case"end":return d.stop()}},g)}));return function(l){return U.apply(this,arguments)}}();return(0,n.jsx)(j.Y,{formRef:S,onFinish:Y,modalProps:{destroyOnClose:!0,okButtonProps:{loading:Z}},onOpenChange:k,initialValues:J,title:"\u7F16\u8F91\u4FE1\u606F",trigger:p,children:(0,n.jsx)(F.Z,{layoutType:"Embed",columns:B})})},c=e(97131),h=e(30077),u=e(14726),w=e(28248),_=e(19515),te=function(){var I,D,S=(0,f.useState)(""),k=T()(S,2),J=k[0],E=k[1],p=(I=f.useRef)===null||I===void 0?void 0:I(),x=f.useState===null||f.useState===void 0?void 0:(0,f.useState)([]),G=T()(x,2),H=G[0],Z=G[1],Y=i.useIntl===null||i.useIntl===void 0?void 0:(0,i.useIntl)(),U=r.ZP===null||r.ZP===void 0||(D=r.ZP.useMessage)===null||D===void 0?void 0:D.call(r.ZP),g=T()(U,2),l=g[0],V=g[1],d=i.useRequest===null||i.useRequest===void 0?void 0:(0,i.useRequest)(b.IV,{manual:!0,onSuccess:function(){var o,s,O;Z==null||Z([]),p==null||(o=p.current)===null||o===void 0||(s=o.reload)===null||s===void 0||s.call(o),l==null||(O=l.success)===null||O===void 0||O.call(l,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var o;l==null||(o=l.error)===null||o===void 0||o.call(l,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),C=d.run,z=d.loading,ne=[].concat(M()(_.P===null||_.P===void 0?void 0:(0,_.P)(B)),[{title:(0,n.jsx)(i.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(o,s){var O;return[(0,n.jsx)(v,{trigger:(0,n.jsx)(u.ZP,{type:"primary",disabled:!0,children:"\u7F16 \u8F91"}),id:s==null?void 0:s.id,onOk:p==null||(O=p.current)===null||O===void 0?void 0:O.reload},s.id),(0,n.jsx)(u.ZP,{disabled:!0,danger:!0,onClick:function(){y(H)},children:"\u5220 \u9664"})]}}]),y=(0,f.useCallback)(function(){var $=a()(m()().mark(function o(s){var O;return m()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:w.Z===null||w.Z===void 0||(O=w.Z.confirm)===null||O===void 0||O.call(w.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(s==null?void 0:s.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var X;(X=function(){var se=a()(m()().mark(function ue(){var q;return m()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,C==null?void 0:C(s==null||(q=s.map)===null||q===void 0?void 0:q.call(s,function(ee){return ee==null?void 0:ee.id}));case 2:case"end":return N.stop()}},ue)}));return function(){return se.apply(this,arguments)}}())===null||X===void 0||X()}});case 1:case"end":return Q.stop()}},o)}));return function(o){return $.apply(this,arguments)}}(),[C]),ae=function(){var o;E==null||E(_.V===null||_.V===void 0?void 0:(0,_.V)()),p==null||(o=p.current)===null||o===void 0||o.reload()};return f.useEffect===null||f.useEffect===void 0||(0,f.useEffect)(function(){E==null||E(_.V===null||_.V===void 0?void 0:(0,_.V)())},[]),(0,n.jsxs)(c._z,{children:[V,(0,n.jsx)(h.Z,{headerTitle:Y==null?void 0:Y.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:p,rowKey:"id",toolBarRender:function(){return[(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(v,{trigger:(0,n.jsx)(u.ZP,{type:"primary",disabled:!0,children:"\u65B0 \u5EFA"}),id:J,onOk:ae})})]},request:b.Md,columns:ne,rowSelection:{onChange:function(o,s){Z(s)}}})]})}},51876:function(re,A,e){e.d(A,{FO:function(){return F},IV:function(){return i},Md:function(){return T},Vx:function(){return P},ah:function(){return f}});var K=e(97857),m=e.n(K),L=e(15009),a=e.n(L),W=e(99289),M=e.n(W),t=e(12578);function T(n,v,c){return R.apply(this,arguments)}function R(){return R=M()(a()().mark(function n(v,c,h){var u;return a()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return u="/staff/web/userCenter/auth/role/page.json",_.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(u,{method:"GET",params:{params:v,sort:c,filter:h}}));case 2:case"end":return _.stop()}},n)})),R.apply(this,arguments)}function P(n){return j.apply(this,arguments)}function j(){return j=M()(a()().mark(function n(v){var c;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return c="/staff/web/userCenter/auth/role/update.json",u.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(c,{method:"POST",data:v}));case 2:case"end":return u.stop()}},n)})),j.apply(this,arguments)}function F(n){return r.apply(this,arguments)}function r(){return r=M()(a()().mark(function n(v){var c;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return c="/staff/web/userCenter/auth/role/getById.json",u.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(c,{method:"GET",params:{id:v}}));case 2:case"end":return u.stop()}},n)})),r.apply(this,arguments)}function i(n){return b.apply(this,arguments)}function b(){return b=M()(a()().mark(function n(v){var c;return a()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return c="/staff/web/userCenter/auth/role/del.json",u.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(c,{method:"POST",data:m()({},v)}));case 2:case"end":return u.stop()}},n)})),b.apply(this,arguments)}function f(){return B.apply(this,arguments)}function B(){return B=M()(a()().mark(function n(){var v;return a()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return v="/staff/web/userCenter/auth/role/page.json",h.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(v,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return h.stop()}},n)})),B.apply(this,arguments)}},19515:function(re,A,e){e.d(A,{P:function(){return T},V:function(){return t}});var K=e(64599),m=e.n(K),L=e(19632),a=e.n(L),W=e(27484),M=e.n(W);function t(){var R=M()().format("YYYYMMDDHHmmssSSS").toString();return R}function T(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=a()(R),j=m()(P),F;try{for(j.s();!(F=j.n()).done;){var r=F.value;!(r!=null&&r.valueType)||(r==null?void 0:r.valueType)!=="group"||!(r!=null&&r.columns)||!(r!=null&&r.columns.length)||P.push.apply(P,a()(r==null?void 0:r.columns))}}catch(i){j.e(i)}finally{j.f()}return P.filter(function(i){return i.valueType!=="group"})}}}]);
