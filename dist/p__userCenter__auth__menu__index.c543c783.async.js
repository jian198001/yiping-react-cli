"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[65],{95840:function(se,D,e){e.r(D),e.d(D,{default:function(){return ce}});var K=e(15009),o=e.n(K),L=e(99289),m=e.n(L),W=e(19632),H=e.n(W),Y=e(5574),I=e.n(Y),b=e(97857),O=e.n(b),M=e(37476),B=e(26855),n=e(2453),u=e(12578);function oe(s,v,t){return k.apply(this,arguments)}function k(){return k=m()(o()().mark(function s(v,t,T){var a;return o()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a="/userCenter/auth/menu/page.json",r.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(a,{method:"GET",params:{params:v,sort:t,filter:T}}));case 2:case"end":return r.stop()}},s)})),k.apply(this,arguments)}function G(s){return w.apply(this,arguments)}function w(){return w=m()(o()().mark(function s(v){var t;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t="/userCenter/auth/menu",a.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(t,{method:"POST",data:v}));case 2:case"end":return a.stop()}},s)})),w.apply(this,arguments)}function z(s){return J.apply(this,arguments)}function J(){return J=m()(o()().mark(function s(v){var t;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t="/userCenter/auth/menu/getById.json",a.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(t,{method:"GET",params:{id:v}}));case 2:case"end":return a.stop()}},s)})),J.apply(this,arguments)}function ie(s){return N.apply(this,arguments)}function N(){return N=m()(o()().mark(function s(v){var t;return o()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return t="/userCenter/auth/menu/del.json",a.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(t,{method:"POST",data:O()({},v)}));case 2:case"end":return a.stop()}},s)})),N.apply(this,arguments)}var p=e(67294),ae=[{valueType:"group",columns:[{title:"\u6807 \u9898",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]},width:"m"},{title:"\u8DEF \u5F84",dataIndex:"name",sorter:!0}]},{valueType:"group",columns:[{title:"\u56FE \u6807",dataIndex:"name",sorter:!0,valueType:"select"},{title:"\u7EC4\u4EF6\u8DEF\u5F84",dataIndex:"name",sorter:!0}]},{valueType:"group",columns:[{title:"\u76F4\u63A5\u8DF3\u8F6C",dataIndex:"name",sorter:!0,valueType:"select"}]}],f=e(85893),te=function(s){var v,t=(v=p.useRef)===null||v===void 0?void 0:v(),T=(0,p.useState)(!1),a=I()(T,2),$=a[0],r=a[1],X=function(){var F=m()(o()().mark(function c(){var g,E,l,j,A;return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!C){y.next=7;break}return y.next=3,z==null?void 0:z(C);case 3:if(l=y.sent,!(l!=null&&l.data)){y.next=6;break}return y.abrupt("return",t==null||(j=t.current)===null||j===void 0||(A=j.setFieldsValue)===null||A===void 0?void 0:A.call(j,O()({},l==null?void 0:l.data)));case 6:return y.abrupt("return",t==null||(g=t.current)===null||g===void 0||(E=g.setFieldsValue)===null||E===void 0?void 0:E.call(g,{id:C}));case 7:case"end":return y.stop()}},c)}));return function(){return F.apply(this,arguments)}}(),x={id:"",title:""},C=s.id,Z=s.trigger,R=s.onOk,q=function(){var F=m()(o()().mark(function c(g){var E,l,j;return o()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return g=O()(O()({},g),{},{id:C}),h.next=4,G==null?void 0:G(g);case 4:if(l=h.sent,(l==null?void 0:l.code)===0){h.next=9;break}return n.ZP===null||n.ZP===void 0||(j=n.ZP.error)===null||j===void 0||j.call(n.ZP,l==null?void 0:l.message),r==null||r(!1),h.abrupt("return",!1);case 9:return n.ZP===null||n.ZP===void 0||(E=n.ZP.success)===null||E===void 0||E.call(n.ZP,"\u63D0\u4EA4\u6210\u529F"),R==null||R(),r==null||r(!1),r==null||r(!1),h.abrupt("return",!0);case 14:case"end":return h.stop()}},c)}));return function(g){return F.apply(this,arguments)}}();return(0,f.jsx)(M.Y,{formRef:t,onFinish:q,modalProps:{destroyOnClose:!0,okButtonProps:{loading:$}},onOpenChange:X,initialValues:x,title:"\u7F16\u8F91\u4FE1\u606F",trigger:Z,children:(0,f.jsx)(B.Z,{layoutType:"Embed",columns:ae})})},de=e(97131),ve=e(30077),Q=e(14726),V=e(28248),S=e(19515),ce=function(){var s,v,t=(0,p.useState)(""),T=I()(t,2),a=T[0],$=T[1],r=(s=p.useRef)===null||s===void 0?void 0:s(),X=p.useState===null||p.useState===void 0?void 0:(0,p.useState)([]),x=I()(X,2),C=x[0],Z=x[1],R=u.useIntl===null||u.useIntl===void 0?void 0:(0,u.useIntl)(),q=n.ZP===null||n.ZP===void 0||(v=n.ZP.useMessage)===null||v===void 0?void 0:v.call(n.ZP),F=I()(q,2),c=F[0],g=F[1],E=u.useRequest===null||u.useRequest===void 0?void 0:(0,u.useRequest)(ie,{manual:!0,onSuccess:function(){var i,d,P;Z==null||Z([]),r==null||(i=r.current)===null||i===void 0||(d=i.reload)===null||d===void 0||d.call(i),c==null||(P=c.success)===null||P===void 0||P.call(c,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var i;c==null||(i=c.error)===null||i===void 0||i.call(c,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),l=E.run,j=E.loading,A=[].concat(H()(S.P===null||S.P===void 0?void 0:(0,S.P)(ae)),[{title:(0,f.jsx)(u.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(i,d){var P;return[(0,f.jsx)(te,{trigger:(0,f.jsx)(Q.ZP,{children:"\u7F16 \u8F91"}),id:d==null?void 0:d.id,onOk:r==null||(P=r.current)===null||P===void 0?void 0:P.reload},d.id)]}}]),h=(0,p.useCallback)(function(){var _=m()(o()().mark(function i(d){var P;return o()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:V.Z===null||V.Z===void 0||(P=V.Z.confirm)===null||P===void 0||P.call(V.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(d==null?void 0:d.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var ne;(ne=function(){var fe=m()(o()().mark(function le(){var re;return o()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,l==null?void 0:l(d==null||(re=d.map)===null||re===void 0?void 0:re.call(d,function(ue){return ue==null?void 0:ue.id}));case 2:case"end":return U.stop()}},le)}));return function(){return fe.apply(this,arguments)}}())===null||ne===void 0||ne()}});case 1:case"end":return ee.stop()}},i)}));return function(i){return _.apply(this,arguments)}}(),[l]),y=function(){var i;$==null||$(S.V===null||S.V===void 0?void 0:(0,S.V)()),r==null||(i=r.current)===null||i===void 0||i.reload()};return p.useEffect===null||p.useEffect===void 0||(0,p.useEffect)(function(){$==null||$(S.V===null||S.V===void 0?void 0:(0,S.V)())},[]),(0,f.jsxs)(de._z,{children:[g,(0,f.jsx)(ve.Z,{headerTitle:R==null?void 0:R.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:r,rowKey:"id",toolBarRender:function(){return[(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Q.ZP,{danger:!0,disabled:!C||!C.length,onClick:function(){h(C)},children:"\u5220 \u9664"}),(0,f.jsx)(te,{trigger:(0,f.jsx)(Q.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:a,onOk:y})]})]},request:oe,columns:A,rowSelection:{onChange:function(i,d){Z(d)}}})]})}},19515:function(se,D,e){e.d(D,{P:function(){return I},V:function(){return Y}});var K=e(64599),o=e.n(K),L=e(19632),m=e.n(L),W=e(27484),H=e.n(W);function Y(){var b=H()().format("YYYYMMDDHHmmssSSS").toString();return b}function I(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],O=m()(b),M=o()(O),B;try{for(M.s();!(B=M.n()).done;){var n=B.value;!(n!=null&&n.valueType)||(n==null?void 0:n.valueType)!=="group"||!(n!=null&&n.columns)||!(n!=null&&n.columns.length)||O.push.apply(O,m()(n==null?void 0:n.columns))}}catch(u){M.e(u)}finally{M.f()}return O.filter(function(u){return u.valueType!=="group"})}}}]);
