"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[800],{16141:function(ie,A,e){e.r(A),e.d(A,{default:function(){return fe}});var U=e(15009),d=e.n(U),K=e(99289),p=e.n(K),L=e(19632),G=e.n(L),W=e(5574),_=e.n(W),F=e(97857),O=e.n(F),b=e(37476),D=e(26855),r=e(2453),s=e(12578);function de(l,o,u){return k.apply(this,arguments)}function k(){return k=p()(d()().mark(function l(o,u,c){var t;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return t="/staff/web/userCenter/trade/goods/category/page.json",n.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(t,{method:"GET",params:{params:o,sort:u,filter:c}}));case 2:case"end":return n.stop()}},l)})),k.apply(this,arguments)}function H(l){return Y.apply(this,arguments)}function Y(){return Y=p()(d()().mark(function l(o){var u;return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u="/staff/web/userCenter/trade/goods/category/update.json",t.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(u,{method:"POST",data:o}));case 2:case"end":return t.stop()}},l)})),Y.apply(this,arguments)}function x(l){return z.apply(this,arguments)}function z(){return z=p()(d()().mark(function l(o){var u;return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u="/staff/web/userCenter/trade/goods/category/getById.json",t.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(u,{method:"GET",params:{id:o}}));case 2:case"end":return t.stop()}},l)})),z.apply(this,arguments)}function N(l){return J.apply(this,arguments)}function J(){return J=p()(d()().mark(function l(o){var u;return d()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u="/staff/web/userCenter/trade/goods/category/del.json",t.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(u,{method:"POST",data:O()({},o)}));case 2:case"end":return t.stop()}},l)})),J.apply(this,arguments)}function pe(){return Q.apply(this,arguments)}function Q(){return Q=_asyncToGenerator(_regeneratorRuntime().mark(function l(){var o;return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return o="/staff/web/userCenter/trade/goods/category/page.json",c.abrupt("return",request==null?void 0:request(o,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return c.stop()}},l)})),Q.apply(this,arguments)}var h=e(67294),se=[{valueType:"group",columns:[{title:"\u540D \u79F0",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}}]},{valueType:"group",columns:[{title:"\u7EA7 \u522B",dataIndex:"name",sorter:!0,valueType:"digit",tooltip:"\u8BF7\u8F93\u5165\u6B63\u6574\u6570"}]},{valueType:"group",columns:[{title:"\u56FE \u7247",dataIndex:"name",sorter:!0}]}],m=e(85893),oe=function(l){var o,u=(o=h.useRef)===null||o===void 0?void 0:o(),c=(0,h.useState)(!1),t=_()(c,2),T=t[0],n=t[1],q=function(){var Z=p()(d()().mark(function f(){var g,$,v,y,P;return d()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(!S){a.next=7;break}return a.next=3,x==null?void 0:x(S);case 3:if(v=a.sent,!(v!=null&&v.data)){a.next=6;break}return a.abrupt("return",u==null||(y=u.current)===null||y===void 0||(P=y.setFieldsValue)===null||P===void 0?void 0:P.call(y,O()({},v==null?void 0:v.data)));case 6:return a.abrupt("return",u==null||(g=u.current)===null||g===void 0||($=g.setFieldsValue)===null||$===void 0?void 0:$.call(g,{id:S}));case 7:case"end":return a.stop()}},f)}));return function(){return Z.apply(this,arguments)}}(),V={id:"",title:""},S=l.id,I=l.trigger,C=l.onOk,ee=function(){var Z=p()(d()().mark(function f(g){var $,v,y;return d()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n==null||n(!0),g=O()(O()({},g),{},{id:S}),i.next=4,H==null?void 0:H(g);case 4:if(v=i.sent,(v==null?void 0:v.code)===0){i.next=9;break}return r.ZP===null||r.ZP===void 0||(y=r.ZP.error)===null||y===void 0||y.call(r.ZP,v==null?void 0:v.message),n==null||n(!1),i.abrupt("return",!1);case 9:return r.ZP===null||r.ZP===void 0||($=r.ZP.success)===null||$===void 0||$.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),C==null||C(),n==null||n(!1),i.abrupt("return",!0);case 13:case"end":return i.stop()}},f)}));return function(g){return Z.apply(this,arguments)}}();return(0,m.jsx)(b.Y,{formRef:u,onFinish:ee,modalProps:{destroyOnClose:!0,okButtonProps:{loading:T}},onOpenChange:q,initialValues:V,title:"\u7F16\u8F91\u4FE1\u606F",trigger:I,children:(0,m.jsx)(D.Z,{layoutType:"Embed",columns:se})})},ve=e(97131),ce=e(30077),X=e(14726),B=e(28248),j=e(19515),fe=function(){var l,o,u=(0,h.useState)(""),c=_()(u,2),t=c[0],T=c[1],n=(l=h.useRef)===null||l===void 0?void 0:l(),q=h.useState===null||h.useState===void 0?void 0:(0,h.useState)([]),V=_()(q,2),S=V[0],I=V[1],C=s.useIntl===null||s.useIntl===void 0?void 0:(0,s.useIntl)(),ee=r.ZP===null||r.ZP===void 0||(o=r.ZP.useMessage)===null||o===void 0?void 0:o.call(r.ZP),Z=_()(ee,2),f=Z[0],g=Z[1],$=[].concat(G()(j.P===null||j.P===void 0?void 0:(0,j.P)(se)),[{title:(0,m.jsx)(s.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(i,a){var R;return[(0,m.jsx)(oe,{trigger:(0,m.jsx)(X.ZP,{children:"\u7F16 \u8F91"}),id:a==null?void 0:a.id,onOk:n==null||(R=n.current)===null||R===void 0?void 0:R.reload})]}}]),v=function(){var P=p()(d()().mark(function i(a){var R;return d()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:B.Z===null||B.Z===void 0||(R=B.Z.confirm)===null||R===void 0||R.call(B.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(a==null?void 0:a.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){p()(d()().mark(function me(){var ne,E,ae,w,ue,te;return d()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,N==null?void 0:N(a==null||(ne=a.map)===null||ne===void 0?void 0:ne.call(a,function(le){return le==null?void 0:le.id}));case 2:if(E=M.sent,(E==null?void 0:E.code)===0){M.next=7;break}return M.abrupt("return",f==null||(ae=f.error)===null||ae===void 0?void 0:ae.call(f,(E==null?void 0:E.message)||"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5"));case 7:I==null||I([]),n==null||(w=n.current)===null||w===void 0||(ue=w.reload)===null||ue===void 0||ue.call(w),f==null||(te=f.success)===null||te===void 0||te.call(f,(E==null?void 0:E.message)||"\u5220\u9664\u64CD\u4F5C\u6210\u529F");case 10:case"end":return M.stop()}},me)}))()}});case 1:case"end":return re.stop()}},i)}));return function(a){return P.apply(this,arguments)}}(),y=function(){var i;T==null||T(j.V===null||j.V===void 0?void 0:(0,j.V)()),n==null||(i=n.current)===null||i===void 0||i.reload()};return h.useEffect===null||h.useEffect===void 0||(0,h.useEffect)(function(){T==null||T(j.V===null||j.V===void 0?void 0:(0,j.V)())},[]),(0,m.jsxs)(ve._z,{children:[g,(0,m.jsx)(ce.Z,{headerTitle:C==null?void 0:C.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:n,rowKey:"id",toolBarRender:function(){return[(0,m.jsxs)(m.Fragment,{children:[" ",(0,m.jsx)(X.ZP,{danger:!0,disabled:!S||!S.length,onClick:function(){v(S)},children:"\u5220 \u9664"}),(0,m.jsx)(oe,{trigger:(0,m.jsx)(X.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:t,onOk:y})]})]},request:de,columns:$,rowSelection:{onChange:function(i,a){I(a)}}})]})}},19515:function(ie,A,e){e.d(A,{P:function(){return _},V:function(){return W}});var U=e(64599),d=e.n(U),K=e(19632),p=e.n(K),L=e(27484),G=e.n(L);function W(){var F=G()().format("YYYYMMDDHHmmssSSS").toString();return F}function _(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],O=p()(F),b=d()(O),D;try{for(b.s();!(D=b.n()).done;){var r=D.value;!(r!=null&&r.valueType)||(r==null?void 0:r.valueType)!=="group"||!(r!=null&&r.columns)||!(r!=null&&r.columns.length)||O.push.apply(O,p()(r==null?void 0:r.columns))}}catch(s){b.e(s)}finally{b.f()}return O.filter(function(s){return s.valueType!=="group"})}}}]);
