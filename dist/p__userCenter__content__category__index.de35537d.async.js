"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[58],{92532:function(oe,D,e){e.r(D),e.d(D,{default:function(){return fe}});var U=e(15009),s=e.n(U),K=e(99289),g=e.n(K),L=e(19632),G=e.n(L),W=e(5574),$=e.n(W),I=e(97857),P=e.n(I),b=e(37476),B=e(26855),r=e(2453),t=e(12578);function ie(n,u,v){return k.apply(this,arguments)}function k(){return k=g()(s()().mark(function n(u,v,c){var a;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return a="/staff/web/userCenter/content/category/page.json",i.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(a,{method:"GET",params:{params:u,sort:v,filter:c}}));case 2:case"end":return i.stop()}},n)})),k.apply(this,arguments)}function H(n){return Y.apply(this,arguments)}function Y(){return Y=g()(s()().mark(function n(u){var v;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return v="/staff/web/userCenter/content/category/update.json",a.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(v,{method:"POST",data:u}));case 2:case"end":return a.stop()}},n)})),Y.apply(this,arguments)}function de(n){return z.apply(this,arguments)}function z(){return z=g()(s()().mark(function n(u){var v;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return v="/staff/web/userCenter/content/category/getById.json",a.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(v,{method:"GET",params:{id:u}}));case 2:case"end":return a.stop()}},n)})),z.apply(this,arguments)}function x(n){return N.apply(this,arguments)}function N(){return N=g()(s()().mark(function n(u){var v;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return v="/staff/web/userCenter/content/category/del.json",a.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(v,{method:"POST",data:P()({},u)}));case 2:case"end":return a.stop()}},n)})),N.apply(this,arguments)}function pe(){return J.apply(this,arguments)}function J(){return J=_asyncToGenerator(_regeneratorRuntime().mark(function n(){var u;return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return u="/staff/web/userCenter/content/category/page.json",c.abrupt("return",request==null?void 0:request(u,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return c.stop()}},n)})),J.apply(this,arguments)}var h=e(67294),te=[{valueType:"group",columns:[{title:"\u6807 \u9898",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]},width:"m"}]}],p=e(85893),ue=function(n){var u=(0,h.useRef)(),v=(0,h.useState)(!1),c=$()(v,2),a=c[0],o=c[1],i=function(){var _=g()(s()().mark(function S(){var d;return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!C){l.next=7;break}return l.next=3,de(C);case 3:if(d=l.sent,!d.data){l.next=6;break}return l.abrupt("return",u.current.setFieldsValue(P()({},d.data)));case 6:return l.abrupt("return",u.current.setFieldsValue({id:C}));case 7:case"end":return l.stop()}},S)}));return function(){return _.apply(this,arguments)}}(),Q={id:"",title:""},C=n.id,Z=n.trigger,j=n.onOk,F=function(){var _=g()(s()().mark(function S(d){var R,l,A;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return o==null||o(!0),d=P()(P()({},d),{},{id:C}),f.next=4,H==null?void 0:H(d);case 4:if(l=f.sent,(l==null?void 0:l.code)===0){f.next=9;break}return r.ZP===null||r.ZP===void 0||(A=r.ZP.error)===null||A===void 0||A.call(r.ZP,l==null?void 0:l.message),o==null||o(!1),f.abrupt("return",!1);case 9:return r.ZP===null||r.ZP===void 0||(R=r.ZP.success)===null||R===void 0||R.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),j==null||j(),o==null||o(!1),f.abrupt("return",!0);case 13:case"end":return f.stop()}},S)}));return function(d){return _.apply(this,arguments)}}();return(0,p.jsx)(b.Y,{formRef:u,onFinish:F,modalProps:{destroyOnClose:!0,okButtonProps:{loading:a}},onOpenChange:i,initialValues:Q,title:"\u7F16\u8F91\u4FE1\u606F",trigger:Z,children:(0,p.jsx)(B.Z,{layoutType:"Embed",columns:te})})},ve=e(97131),ce=e(30077),V=e(28248),le=e(14726),E=e(19515),fe=function(){var n,u,v=(0,h.useState)(""),c=$()(v,2),a=c[0],o=c[1],i=(n=h.useRef)===null||n===void 0?void 0:n(),Q=h.useState===null||h.useState===void 0?void 0:(0,h.useState)([]),C=$()(Q,2),Z=C[0],j=C[1],F=t.useIntl===null||t.useIntl===void 0?void 0:(0,t.useIntl)(),_=r.ZP===null||r.ZP===void 0||(u=r.ZP.useMessage)===null||u===void 0?void 0:u.call(r.ZP),S=$()(_,2),d=S[0],R=S[1],l=[].concat(G()(E.P===null||E.P===void 0?void 0:(0,E.P)(te)),[{title:(0,p.jsx)(t.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(O,m){var T;return[(0,p.jsx)(ue,{trigger:(0,p.jsx)("a",{children:"\u7F16 \u8F91"}),id:m==null?void 0:m.id,onOk:i==null||(T=i.current)===null||T===void 0?void 0:T.reload})]}}]),A=function(){var f=g()(s()().mark(function O(m){var T;return s()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:V.Z===null||V.Z===void 0||(T=V.Z.confirm)===null||T===void 0||T.call(V.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(m==null?void 0:m.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){g()(s()().mark(function me(){var q,y,ee,w,re,ne;return s()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,x==null?void 0:x(m==null||(q=m.map)===null||q===void 0?void 0:q.call(m,function(ae){return ae==null?void 0:ae.id}));case 2:if(y=M.sent,(y==null?void 0:y.code)===0){M.next=7;break}return M.abrupt("return",d==null||(ee=d.error)===null||ee===void 0?void 0:ee.call(d,(y==null?void 0:y.message)||"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5"));case 7:j==null||j([]),i==null||(w=i.current)===null||w===void 0||(re=w.reload)===null||re===void 0||re.call(w),d==null||(ne=d.success)===null||ne===void 0||ne.call(d,(y==null?void 0:y.message)||"\u5220\u9664\u64CD\u4F5C\u6210\u529F");case 10:case"end":return M.stop()}},me)}))()}});case 1:case"end":return X.stop()}},O)}));return function(m){return f.apply(this,arguments)}}(),se=function(){var O;o==null||o(E.V===null||E.V===void 0?void 0:(0,E.V)()),i==null||(O=i.current)===null||O===void 0||O.reload()};return h.useEffect===null||h.useEffect===void 0||(0,h.useEffect)(function(){o==null||o(E.V===null||E.V===void 0?void 0:(0,E.V)())},[]),(0,p.jsxs)(ve._z,{children:[R,(0,p.jsx)(ce.Z,{headerTitle:F==null?void 0:F.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:i,rowKey:"id",toolBarRender:function(){return[(0,p.jsxs)(p.Fragment,{children:[" ",(0,p.jsx)(le.ZP,{danger:!0,disabled:!Z||!Z.length,onClick:function(){A(Z)},children:"\u5220 \u9664"}),(0,p.jsx)(ue,{trigger:(0,p.jsx)(le.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:a,onOk:se})]})]},request:ie,columns:l,rowSelection:{onChange:function(O,m){j(m)}}})]})}},19515:function(oe,D,e){e.d(D,{P:function(){return $},V:function(){return W}});var U=e(64599),s=e.n(U),K=e(19632),g=e.n(K),L=e(27484),G=e.n(L);function W(){var I=G()().format("YYYYMMDDHHmmssSSS").toString();return I}function $(){var I=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=g()(I),b=s()(P),B;try{for(b.s();!(B=b.n()).done;){var r=B.value;!(r!=null&&r.valueType)||(r==null?void 0:r.valueType)!=="group"||!(r!=null&&r.columns)||!(r!=null&&r.columns.length)||P.push.apply(P,g()(r==null?void 0:r.columns))}}catch(t){b.e(t)}finally{b.f()}return P.filter(function(t){return t.valueType!=="group"})}}}]);
