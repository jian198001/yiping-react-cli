"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[337],{23970:function(ne,b,e){e.r(b),e.d(b,{default:function(){return ie}});var B=e(15009),l=e.n(B),x=e(99289),p=e.n(x),V=e(19632),U=e.n(V),K=e(5574),R=e.n(K),_=e(97857),E=e.n(_),C=e(37476),$=e(26855),t=e(2453),r=e(12578);function te(a,u,d){return G.apply(this,arguments)}function G(){return G=p()(l()().mark(function a(u,d,c){var n;return l()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n="/staff/web/userCenter/oa/staff/page.json",i.abrupt("return",r.request===null||r.request===void 0?void 0:(0,r.request)(n,{method:"GET",params:{params:u,sort:d,filter:c}}));case 2:case"end":return i.stop()}},a)})),G.apply(this,arguments)}function ae(a){return L.apply(this,arguments)}function L(){return L=p()(l()().mark(function a(u){var d;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return d="/staff/web/userCenter/oa/staff/update.json",n.abrupt("return",r.request===null||r.request===void 0?void 0:(0,r.request)(d,{method:"POST",data:u}));case 2:case"end":return n.stop()}},a)})),L.apply(this,arguments)}function ue(a){return W.apply(this,arguments)}function W(){return W=p()(l()().mark(function a(u){var d;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return d="/staff/web/userCenter/oa/staff/getById.json",n.abrupt("return",r.request===null||r.request===void 0?void 0:(0,r.request)(d,{method:"GET",params:{id:u}}));case 2:case"end":return n.stop()}},a)})),W.apply(this,arguments)}function le(a){return k.apply(this,arguments)}function k(){return k=p()(l()().mark(function a(u){var d;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return d="/staff/web/userCenter/oa/staff/del.json",n.abrupt("return",r.request===null||r.request===void 0?void 0:(0,r.request)(d,{method:"POST",data:E()({},u)}));case 2:case"end":return n.stop()}},a)})),k.apply(this,arguments)}function pe(){return H.apply(this,arguments)}function H(){return H=_asyncToGenerator(_regeneratorRuntime().mark(function a(){var u;return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return u="/staff/web/userCenter/oa/staff/page.json",c.abrupt("return",request==null?void 0:request(u,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return c.stop()}},a)})),H.apply(this,arguments)}var h=e(67294),X=[{valueType:"group",columns:[{title:"\u59D3 \u540D",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}},{title:"\u624B\u673A\u53F7\u7801",dataIndex:"mobile",sorter:!0}]},{valueType:"group",columns:[{title:"\u90AE \u7BB1",dataIndex:"email",sorter:!0,width:"md"}]},{valueType:"group",columns:[{title:"\u90E8 \u95E8",dataIndex:"deptId",sorter:!0,valueType:"cascader",width:"md",formItemProps:{mode:"multiple"}},{title:"\u5C97 \u4F4D",dataIndex:"postId",sorter:!0,valueType:"select",width:"md",formItemProps:{mode:"multiple"}}]},{valueType:"group",columns:[{title:"\u5907 \u6CE8",dataIndex:"remark",sorter:!1,valueType:"textarea",width:"lg",hideInTable:!0,hideInSearch:!0}]}],f=e(85893),q=function(a){var u=(0,h.useRef)(),d=function(){var I=p()(l()().mark(function S(){var m;return l()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(!n){v.next=7;break}return v.next=3,ue(n);case 3:if(m=v.sent,!m.data){v.next=6;break}return v.abrupt("return",u.current.setFieldsValue(E()({},m.data)));case 6:return v.abrupt("return",u.current.setFieldsValue({id:n}));case 7:case"end":return v.stop()}},S)}));return function(){return I.apply(this,arguments)}}(),c={id:"",title:""},n=a.id,P=a.trigger,i=a.onOk,A=(0,r.useRequest)(ae,{manual:!0,onSuccess:function(){t.ZP.success("\u63D0\u4EA4\u6210\u529F"),i()}}),D=A.run,M=A.loading,O=function(){var I=p()(l()().mark(function S(m){return l()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return m=E()(E()({},m),{},{id:n}),D(m),v.abrupt("return",!0);case 3:case"end":return v.stop()}},S)}));return function(m){return I.apply(this,arguments)}}();return(0,f.jsx)(C.Y,{formRef:u,onFinish:O,modalProps:{destroyOnClose:!0,okButtonProps:{loading:M}},onOpenChange:d,initialValues:c,title:"\u7F16\u8F91\u4FE1\u606F",trigger:P,children:(0,f.jsx)($.Z,{layoutType:"Embed",columns:X,onFinish:O})})},se=e(97131),oe=e(30077),Y=e(14726),F=e(28248),T=e(19515),ie=function(){var a,u,d=(0,h.useState)(""),c=R()(d,2),n=c[0],P=c[1],i=(a=h.useRef)===null||a===void 0?void 0:a(),A=h.useState===null||h.useState===void 0?void 0:(0,h.useState)([]),D=R()(A,2),M=D[0],O=D[1],I=r.useIntl===null||r.useIntl===void 0?void 0:(0,r.useIntl)(),S=t.ZP===null||t.ZP===void 0||(u=t.ZP.useMessage)===null||u===void 0?void 0:u.call(t.ZP),m=R()(S,2),y=m[0],v=m[1],ee=r.useRequest===null||r.useRequest===void 0?void 0:(0,r.useRequest)(le,{manual:!0,onSuccess:function(){var s,o,g;O==null||O([]),i==null||(s=i.current)===null||s===void 0||(o=s.reload)===null||o===void 0||o.call(s),y==null||(g=y.success)===null||g===void 0||g.call(y,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var s;y==null||(s=y.error)===null||s===void 0||s.call(y,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),Z=ee.run,me=ee.loading,de=[].concat(U()(T.P===null||T.P===void 0?void 0:(0,T.P)(X)),[{title:(0,f.jsx)(r.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(s,o){var g;return[(0,f.jsx)(q,{trigger:(0,f.jsx)(Y.ZP,{children:"\u7F16 \u8F91"}),id:o==null?void 0:o.id,onOk:i==null||(g=i.current)===null||g===void 0?void 0:g.reload},o.id)]}}]),ve=(0,h.useCallback)(function(){var j=p()(l()().mark(function s(o){var g;return l()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:F.Z===null||F.Z===void 0||(g=F.Z.confirm)===null||g===void 0||g.call(F.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(o==null?void 0:o.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var N;(N=function(){var fe=p()(l()().mark(function re(){var J;return l()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,Z==null?void 0:Z(o==null||(J=o.map)===null||J===void 0?void 0:J.call(o,function(Q){return Q==null?void 0:Q.id}));case 2:case"end":return w.stop()}},re)}));return function(){return fe.apply(this,arguments)}}())===null||N===void 0||N()}});case 1:case"end":return z.stop()}},s)}));return function(s){return j.apply(this,arguments)}}(),[Z]),ce=function(){var s;P==null||P(T.V===null||T.V===void 0?void 0:(0,T.V)()),i==null||(s=i.current)===null||s===void 0||s.reload()};return h.useEffect===null||h.useEffect===void 0||(0,h.useEffect)(function(){P==null||P(T.V===null||T.V===void 0?void 0:(0,T.V)())},[]),(0,f.jsxs)(se._z,{children:[v,(0,f.jsx)(oe.Z,{headerTitle:I==null?void 0:I.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:i,rowKey:"id",toolBarRender:function(){return[(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(Y.ZP,{danger:!0,disabled:!M||!M.length,onClick:function(){ve(M)},children:"\u5220 \u9664"}),(0,f.jsx)(q,{trigger:(0,f.jsx)(Y.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:n,onOk:ce})]})]},request:te,columns:de,rowSelection:{onChange:function(s,o){O(o)}}})]})}},19515:function(ne,b,e){e.d(b,{P:function(){return R},V:function(){return K}});var B=e(64599),l=e.n(B),x=e(19632),p=e.n(x),V=e(27484),U=e.n(V);function K(){var _=U()().format("YYYYMMDDHHmmssSSS").toString();return _}function R(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=p()(_),C=l()(E),$;try{for(C.s();!($=C.n()).done;){var t=$.value;!(t!=null&&t.valueType)||(t==null?void 0:t.valueType)!=="group"||!(t!=null&&t.columns)||!(t!=null&&t.columns.length)||E.push.apply(E,p()(t==null?void 0:t.columns))}}catch(r){C.e(r)}finally{C.f()}return E.filter(function(r){return r.valueType!=="group"})}}}]);
