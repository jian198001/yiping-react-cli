"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[800],{16141:function(le,D,e){e.r(D),e.d(D,{default:function(){return ce}});var x=e(15009),o=e.n(x),K=e(99289),h=e.n(K),G=e(19632),L=e.n(G),W=e(5574),I=e.n(W),Z=e(97857),R=e.n(Z),$=e(37476),B=e(26855),r=e(2453),n=e(12578);function oe(a,l,u){return H.apply(this,arguments)}function H(){return H=h()(o()().mark(function a(l,u,m){var t;return o()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return t="/staff/web/userCenter/trade/goods/category/page.json",d.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(t,{method:"GET",params:{params:l,sort:u,filter:m}}));case 2:case"end":return d.stop()}},a)})),H.apply(this,arguments)}function se(a){return Y.apply(this,arguments)}function Y(){return Y=h()(o()().mark(function a(l){var u;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u="/staff/web/userCenter/trade/goods/category/update.json",t.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(u,{method:"POST",data:l}));case 2:case"end":return t.stop()}},a)})),Y.apply(this,arguments)}function k(a){return z.apply(this,arguments)}function z(){return z=h()(o()().mark(function a(l){var u;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u="/staff/web/userCenter/trade/goods/category/getById.json",t.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(u,{method:"GET",params:{id:l}}));case 2:case"end":return t.stop()}},a)})),z.apply(this,arguments)}function ie(a){return N.apply(this,arguments)}function N(){return N=h()(o()().mark(function a(l){var u;return o()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u="/staff/web/userCenter/trade/goods/category/del.json",t.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(u,{method:"POST",data:R()({},l)}));case 2:case"end":return t.stop()}},a)})),N.apply(this,arguments)}function pe(){return J.apply(this,arguments)}function J(){return J=_asyncToGenerator(_regeneratorRuntime().mark(function a(){var l;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return l="/staff/web/userCenter/trade/goods/category/page.json",m.abrupt("return",request==null?void 0:request(l,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return m.stop()}},a)})),J.apply(this,arguments)}var E=e(67294),ne=[{valueType:"group",columns:[{title:"\u540D \u79F0",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}}]},{valueType:"group",columns:[{title:"\u7EA7 \u522B",dataIndex:"name",sorter:!0,valueType:"digit",tooltip:"\u8BF7\u8F93\u5165\u6B63\u6574\u6570"}]},{valueType:"group",columns:[{title:"\u56FE \u7247",dataIndex:"name",sorter:!0}]}],p=e(85893),ue=function(a){var l,u=(l=E.useRef)===null||l===void 0?void 0:l(),m=function(){var S=h()(o()().mark(function c(){var s,M,f,O,w;return o()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!g){y.next=7;break}return y.next=3,k==null?void 0:k(g);case 3:if(f=y.sent,!(f!=null&&f.data)){y.next=6;break}return y.abrupt("return",u==null||(O=u.current)===null||O===void 0||(w=O.setFieldsValue)===null||w===void 0?void 0:w.call(O,R()({},f==null?void 0:f.data)));case 6:return y.abrupt("return",u==null||(s=u.current)===null||s===void 0||(M=s.setFieldsValue)===null||M===void 0?void 0:M.call(s,{id:g}));case 7:case"end":return y.stop()}},c)}));return function(){return S.apply(this,arguments)}}(),t={id:"",title:""},g=a.id,d=a.trigger,b=a.onOk,F=n.useRequest===null||n.useRequest===void 0?void 0:(0,n.useRequest)(se,{manual:!0,onSuccess:function(){var c;r.ZP===null||r.ZP===void 0||(c=r.ZP.success)===null||c===void 0||c.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),b==null||b()},onError:function(){var c;r.ZP===null||r.ZP===void 0||(c=r.ZP.error)===null||c===void 0||c.call(r.ZP,"\u63D0\u4EA4\u5931\u8D25, \u8BF7\u91CD\u8BD5!")}}),j=F.run,C=F.loading,A=function(){var S=h()(o()().mark(function c(s){return o()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return s=R()(R()({},s),{},{id:g}),j==null||j(s),f.abrupt("return",!0);case 3:case"end":return f.stop()}},c)}));return function(s){return S.apply(this,arguments)}}();return(0,p.jsx)($.Y,{formRef:u,onFinish:A,modalProps:{destroyOnClose:!0,okButtonProps:{loading:C}},onOpenChange:m,initialValues:t,title:"\u7F16\u8F91\u4FE1\u606F",trigger:d,children:(0,p.jsx)(B.Z,{layoutType:"Embed",columns:ne})})},de=e(97131),ve=e(30077),Q=e(14726),V=e(28248),_=e(19515),ce=function(){var a,l,u=(0,E.useState)(""),m=I()(u,2),t=m[0],g=m[1],d=(a=E.useRef)===null||a===void 0?void 0:a(),b=E.useState===null||E.useState===void 0?void 0:(0,E.useState)([]),F=I()(b,2),j=F[0],C=F[1],A=n.useIntl===null||n.useIntl===void 0?void 0:(0,n.useIntl)(),S=r.ZP===null||r.ZP===void 0||(l=r.ZP.useMessage)===null||l===void 0?void 0:l.call(r.ZP),c=I()(S,2),s=c[0],M=c[1],f=n.useRequest===null||n.useRequest===void 0?void 0:(0,n.useRequest)(ie,{manual:!0,onSuccess:function(){var i,v,P;C==null||C([]),d==null||(i=d.current)===null||i===void 0||(v=i.reload)===null||v===void 0||v.call(i),s==null||(P=s.success)===null||P===void 0||P.call(s,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var i;s==null||(i=s.error)===null||i===void 0||i.call(s,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),O=f.run,w=f.loading,ae=[].concat(L()(_.P===null||_.P===void 0?void 0:(0,_.P)(ne)),[{title:(0,p.jsx)(n.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(i,v){var P;return[(0,p.jsx)(ue,{trigger:(0,p.jsx)(Q.ZP,{children:"\u7F16 \u8F91"}),id:v==null?void 0:v.id,onOk:d==null||(P=d.current)===null||P===void 0?void 0:P.reload})]}}]),y=(0,E.useCallback)(function(){var T=h()(o()().mark(function i(v){var P;return o()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:V.Z===null||V.Z===void 0||(P=V.Z.confirm)===null||P===void 0||P.call(V.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(v==null?void 0:v.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var q;(q=function(){var me=h()(o()().mark(function te(){var ee;return o()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,O==null?void 0:O(v==null||(ee=v.map)===null||ee===void 0?void 0:ee.call(v,function(re){return re==null?void 0:re.id}));case 2:case"end":return U.stop()}},te)}));return function(){return me.apply(this,arguments)}}())===null||q===void 0||q()}});case 1:case"end":return X.stop()}},i)}));return function(i){return T.apply(this,arguments)}}(),[O]),fe=function(){var i;g==null||g(_.V===null||_.V===void 0?void 0:(0,_.V)()),d==null||(i=d.current)===null||i===void 0||i.reload()};return E.useEffect===null||E.useEffect===void 0||(0,E.useEffect)(function(){g==null||g(_.V===null||_.V===void 0?void 0:(0,_.V)())},[]),(0,p.jsxs)(de._z,{children:[M,(0,p.jsx)(ve.Z,{headerTitle:A==null?void 0:A.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:d,rowKey:"id",toolBarRender:function(){return[(0,p.jsxs)(p.Fragment,{children:[" ",(0,p.jsx)(Q.ZP,{danger:!0,disabled:!j||!j.length,onClick:function(){y(j)},children:"\u5220 \u9664"}),(0,p.jsx)(ue,{trigger:(0,p.jsx)(Q.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:t,onOk:fe})]})]},request:oe,columns:ae,rowSelection:{onChange:function(i,v){C(v)}}})]})}},19515:function(le,D,e){e.d(D,{P:function(){return I},V:function(){return W}});var x=e(64599),o=e.n(x),K=e(19632),h=e.n(K),G=e(27484),L=e.n(G);function W(){var Z=L()().format("YYYYMMDDHHmmssSSS").toString();return Z}function I(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],R=h()(Z),$=o()(R),B;try{for($.s();!(B=$.n()).done;){var r=B.value;!(r!=null&&r.valueType)||(r==null?void 0:r.valueType)!=="group"||!(r!=null&&r.columns)||!(r!=null&&r.columns.length)||R.push.apply(R,h()(r==null?void 0:r.columns))}}catch(n){$.e(n)}finally{$.f()}return R.filter(function(n){return n.valueType!=="group"})}}}]);
