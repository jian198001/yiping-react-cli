"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[940],{51565:function(oe,D,e){e.r(D),e.d(D,{default:function(){return fe}});var U=e(15009),s=e.n(U),K=e(99289),m=e.n(K),L=e(19632),G=e.n(L),W=e(5574),$=e.n(W),Z=e(97857),P=e.n(Z),b=e(37476),B=e(26855),r=e(2453),u=e(12578);function ie(n,t,v){return k.apply(this,arguments)}function k(){return k=m()(s()().mark(function n(t,v,c){var a;return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return a="/staff/web/userCenter/promotion/coupon/page.json",o.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(a,{method:"GET",params:{params:t,sort:v,filter:c}}));case 2:case"end":return o.stop()}},n)})),k.apply(this,arguments)}function H(n){return Y.apply(this,arguments)}function Y(){return Y=m()(s()().mark(function n(t){var v;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return v="/staff/web/userCenter/promotion/coupon/update.json",a.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(v,{method:"POST",data:t}));case 2:case"end":return a.stop()}},n)})),Y.apply(this,arguments)}function de(n){return z.apply(this,arguments)}function z(){return z=m()(s()().mark(function n(t){var v;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return v="/staff/web/userCenter/promotion/coupon/getById.json",a.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(v,{method:"GET",params:{id:t}}));case 2:case"end":return a.stop()}},n)})),z.apply(this,arguments)}function x(n){return N.apply(this,arguments)}function N(){return N=m()(s()().mark(function n(t){var v;return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return v="/staff/web/userCenter/promotion/coupon/del.json",a.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(v,{method:"POST",data:P()({},t)}));case 2:case"end":return a.stop()}},n)})),N.apply(this,arguments)}function me(){return J.apply(this,arguments)}function J(){return J=_asyncToGenerator(_regeneratorRuntime().mark(function n(){var t;return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return t="/staff/web/userCenter/promotion/coupon/page.json",c.abrupt("return",request==null?void 0:request(t,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return c.stop()}},n)})),J.apply(this,arguments)}var h=e(67294),te=[{valueType:"group",columns:[{title:"\u540D \u79F0",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}}]}],p=e(85893),le=function(n){var t=(0,h.useRef)(),v=(0,h.useState)(!1),c=$()(v,2),a=c[0],g=c[1],o=function(){var _=m()(s()().mark(function S(){var i;return s()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:if(!C){l.next=7;break}return l.next=3,de(C);case 3:if(i=l.sent,!i.data){l.next=6;break}return l.abrupt("return",t.current.setFieldsValue(P()({},i.data)));case 6:return l.abrupt("return",t.current.setFieldsValue({id:C}));case 7:case"end":return l.stop()}},S)}));return function(){return _.apply(this,arguments)}}(),X={id:"",title:""},C=n.id,I=n.trigger,j=n.onOk,F=function(){var _=m()(s()().mark(function S(i){var R,l,A;return s()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return g(!0),i=P()(P()({},i),{},{id:C}),f.next=4,H==null?void 0:H(i);case 4:if(l=f.sent,(l==null?void 0:l.code)===0){f.next=9;break}return r.ZP===null||r.ZP===void 0||(A=r.ZP.error)===null||A===void 0||A.call(r.ZP,l==null?void 0:l.message),g(!1),f.abrupt("return",!1);case 9:return r.ZP===null||r.ZP===void 0||(R=r.ZP.success)===null||R===void 0||R.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),j==null||j(),g(!1),f.abrupt("return",!0);case 13:case"end":return f.stop()}},S)}));return function(i){return _.apply(this,arguments)}}();return(0,p.jsx)(b.Y,{formRef:t,onFinish:F,modalProps:{destroyOnClose:!0,okButtonProps:{loading:a}},onOpenChange:o,initialValues:X,title:"\u7F16\u8F91\u4FE1\u606F",trigger:I,children:(0,p.jsx)(B.Z,{layoutType:"Embed",columns:te})})},ve=e(97131),ce=e(30077),Q=e(14726),V=e(28248),E=e(19515),fe=function(){var n,t,v=(0,h.useState)(""),c=$()(v,2),a=c[0],g=c[1],o=(n=h.useRef)===null||n===void 0?void 0:n(),X=h.useState===null||h.useState===void 0?void 0:(0,h.useState)([]),C=$()(X,2),I=C[0],j=C[1],F=u.useIntl===null||u.useIntl===void 0?void 0:(0,u.useIntl)(),_=r.ZP===null||r.ZP===void 0||(t=r.ZP.useMessage)===null||t===void 0?void 0:t.call(r.ZP),S=$()(_,2),i=S[0],R=S[1],l=[].concat(G()(E.P===null||E.P===void 0?void 0:(0,E.P)(te)),[{title:(0,p.jsx)(u.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(O,d){var T;return[(0,p.jsx)(le,{trigger:(0,p.jsx)(Q.ZP,{children:"\u7F16 \u8F91"}),id:d==null?void 0:d.id,onOk:o==null||(T=o.current)===null||T===void 0?void 0:T.reload},d==null?void 0:d.id)]}}]),A=function(){var f=m()(s()().mark(function O(d){var T;return s()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:V.Z===null||V.Z===void 0||(T=V.Z.confirm)===null||T===void 0||T.call(V.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(d==null?void 0:d.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){m()(s()().mark(function pe(){var ee,y,re,w,ne,ae;return s()().wrap(function(M){for(;;)switch(M.prev=M.next){case 0:return M.next=2,x==null?void 0:x(d==null||(ee=d.map)===null||ee===void 0?void 0:ee.call(d,function(ue){return ue==null?void 0:ue.id}));case 2:if(y=M.sent,(y==null?void 0:y.code)===0){M.next=7;break}return M.abrupt("return",i==null||(re=i.error)===null||re===void 0?void 0:re.call(i,(y==null?void 0:y.message)||"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5"));case 7:j==null||j([]),o==null||(w=o.current)===null||w===void 0||(ne=w.reload)===null||ne===void 0||ne.call(w),i==null||(ae=i.success)===null||ae===void 0||ae.call(i,(y==null?void 0:y.message)||"\u5220\u9664\u64CD\u4F5C\u6210\u529F");case 10:case"end":return M.stop()}},pe)}))()}});case 1:case"end":return q.stop()}},O)}));return function(d){return f.apply(this,arguments)}}(),se=function(){var O;g==null||g(E.V===null||E.V===void 0?void 0:(0,E.V)()),o==null||(O=o.current)===null||O===void 0||O.reload()};return h.useEffect===null||h.useEffect===void 0||(0,h.useEffect)(function(){g==null||g(E.V===null||E.V===void 0?void 0:(0,E.V)())},[]),(0,p.jsxs)(ve._z,{children:[R,(0,p.jsx)(ce.Z,{headerTitle:F==null?void 0:F.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:o,rowKey:"id",toolBarRender:function(){return[(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Q.ZP,{danger:!0,disabled:!I||!I.length,onClick:function(){A(I)},children:"\u5220 \u9664"}),(0,p.jsx)(le,{trigger:(0,p.jsx)(Q.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:a,onOk:se})]})]},request:ie,columns:l,rowSelection:{onChange:function(O,d){j(d)}}})]})}},19515:function(oe,D,e){e.d(D,{P:function(){return $},V:function(){return W}});var U=e(64599),s=e.n(U),K=e(19632),m=e.n(K),L=e(27484),G=e.n(L);function W(){var Z=G()().format("YYYYMMDDHHmmssSSS").toString();return Z}function $(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=m()(Z),b=s()(P),B;try{for(b.s();!(B=b.n()).done;){var r=B.value;!(r!=null&&r.valueType)||(r==null?void 0:r.valueType)!=="group"||!(r!=null&&r.columns)||!(r!=null&&r.columns.length)||P.push.apply(P,m()(r==null?void 0:r.columns))}}catch(u){b.e(u)}finally{b.f()}return P.filter(function(u){return u.valueType!=="group"})}}}]);
