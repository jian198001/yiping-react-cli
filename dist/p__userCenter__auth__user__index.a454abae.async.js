"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[355],{25171:function(ve,W,e){e.r(W),e.d(W,{default:function(){return X}});var Y=e(15009),_=e.n(Y),q=e(99289),l=e.n(q),H=e(19632),I=e.n(H),t=e(5574),j=e.n(t),C=e(97857),w=e.n(C),R=e(37476),k=e(26855),r=e(2453),m=e(12578),h=e(24982),g=e(67294),D=e(51876),i=e(85893),y=function(F){var B,ne=(0,g.useState)({}),G=j()(ne,2),ie=G[0],oe=G[1],P=(B=g.useRef)===null||B===void 0?void 0:B(),ee=function(){var f=l()(_()().mark(function o(){var E,U,p,A,b,M,T;return _()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,D.ah)();case 2:if(E=c.sent,U=E.data,console.log(U),oe(U),!Z){c.next=13;break}return c.next=9,h.FO===null||h.FO===void 0?void 0:(0,h.FO)(Z);case 9:if(b=c.sent,!(b!=null&&b.data)){c.next=12;break}return c.abrupt("return",P==null||(M=P.current)===null||M===void 0||(T=M.setFieldsValue)===null||T===void 0?void 0:T.call(M,w()({},b==null?void 0:b.data)));case 12:return c.abrupt("return",P==null||(p=P.current)===null||p===void 0||(A=p.setFieldsValue)===null||A===void 0?void 0:A.call(p,{id:Z}));case 13:case"end":return c.stop()}},o)}));return function(){return f.apply(this,arguments)}}(),J={id:"",title:""},Z=F.id,re=F.trigger,K=F.onOk,z=m.useRequest===null||m.useRequest===void 0?void 0:(0,m.useRequest)(h.Vx,{manual:!0,onSuccess:function(){var o;r.ZP===null||r.ZP===void 0||(o=r.ZP.success)===null||o===void 0||o.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),K==null||K()},onError:function(){var o;r.ZP===null||r.ZP===void 0||(o=r.ZP.error)===null||o===void 0||o.call(r.ZP,"\u63D0\u4EA4\u5931\u8D25, \u8BF7\u91CD\u8BD5!")}}),L=z.run,ue=z.loading,te=[{valueType:"group",columns:[{title:"\u7528\u6237\u540D",dataIndex:"username",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}}]},{valueType:"group",columns:[{title:"\u5BC6 \u7801",dataIndex:"password",sorter:!0,hideInTable:!0,hideInSearch:!0,valueType:"password"},{title:"\u786E\u8BA4\u5BC6\u7801",dataIndex:"confirmPassword",sorter:!0,hideInTable:!0,hideInSearch:!0,valueType:"password"}]},{valueType:"group",columns:[{title:"\u89D2 \u8272",dataIndex:"roleIds",sorter:!0,valueType:"select",hideInTable:!0,hideInSearch:!0,mode:"multiple",formItemProps:{mode:"multiple"},fieldProps:{mode:"multiple"},valueEnum:ie}]}],x=function(){var f=l()(_()().mark(function o(E){return _()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return E=w()(w()({},E),{},{id:Z}),L==null||L(E),p.abrupt("return",!0);case 3:case"end":return p.stop()}},o)}));return function(E){return f.apply(this,arguments)}}();return(0,i.jsx)(R.Y,{formRef:P,onFinish:x,modalProps:{destroyOnClose:!0,okButtonProps:{loading:ue}},onOpenChange:ee,initialValues:J,title:"\u7F16\u8F91\u4FE1\u606F",trigger:re,children:(0,i.jsx)(k.Z,{layoutType:"Embed",columns:te})})},s=e(97131),v=e(30077),u=e(14726),O=e(28248),n=e(19515),fe=function(F){var B,ne=(0,g.useState)({}),G=j()(ne,2),ie=G[0],oe=G[1],P=(B=g.useRef)===null||B===void 0?void 0:B(),ee=function(){var f=l()(_()().mark(function o(){var E,U,p,A,b,M,T;return _()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,D.ah)();case 2:if(E=c.sent,U=E.data,console.log(U),oe(U),!Z){c.next=13;break}return c.next=9,h.FO===null||h.FO===void 0?void 0:(0,h.FO)(Z);case 9:if(b=c.sent,!(b!=null&&b.data)){c.next=12;break}return c.abrupt("return",P==null||(M=P.current)===null||M===void 0||(T=M.setFieldsValue)===null||T===void 0?void 0:T.call(M,w()({},b==null?void 0:b.data)));case 12:return c.abrupt("return",P==null||(p=P.current)===null||p===void 0||(A=p.setFieldsValue)===null||A===void 0?void 0:A.call(p,{id:Z}));case 13:case"end":return c.stop()}},o)}));return function(){return f.apply(this,arguments)}}(),J={id:"",title:""},Z=F.id,re=F.trigger,K=F.onOk,z=m.useRequest===null||m.useRequest===void 0?void 0:(0,m.useRequest)(h.Vx,{manual:!0,onSuccess:function(){var o;r.ZP===null||r.ZP===void 0||(o=r.ZP.success)===null||o===void 0||o.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),K==null||K()},onError:function(){var o;r.ZP===null||r.ZP===void 0||(o=r.ZP.error)===null||o===void 0||o.call(r.ZP,"\u63D0\u4EA4\u5931\u8D25, \u8BF7\u91CD\u8BD5!")}}),L=z.run,ue=z.loading,te=[{valueType:"group",columns:[{title:"\u7528\u6237\u540D",dataIndex:"username",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}}]},{valueType:"group",columns:[{title:"\u5BC6 \u7801",dataIndex:"password",sorter:!0,hideInTable:!0,hideInSearch:!0,valueType:"password"},{title:"\u786E\u8BA4\u5BC6\u7801",dataIndex:"confirmPassword",sorter:!0,hideInTable:!0,hideInSearch:!0,valueType:"password"}]},{valueType:"group",columns:[{title:"\u89D2 \u8272",dataIndex:"roleIds",sorter:!0,valueType:"select",hideInTable:!0,hideInSearch:!0,mode:"multiple",formItemProps:{mode:"multiple"},fieldProps:{mode:"multiple"},valueEnum:ie}]}],x=function(){var f=l()(_()().mark(function o(E){return _()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return E=w()(w()({},E),{},{id:Z}),L==null||L(E),p.abrupt("return",!0);case 3:case"end":return p.stop()}},o)}));return function(E){return f.apply(this,arguments)}}();return(0,i.jsx)(R.Y,{formRef:P,onFinish:x,modalProps:{destroyOnClose:!0,okButtonProps:{loading:ue}},onOpenChange:ee,initialValues:J,title:"\u7F16\u8F91\u4FE1\u606F",trigger:re,children:(0,i.jsx)(k.Z,{layoutType:"Embed",columns:te})})},X=function(){var F,B,ne=(0,g.useState)(""),G=j()(ne,2),ie=G[0],oe=G[1],P=(0,m.useModel)("@@initialState"),ee=P.initialState.currentUser,J=ee===void 0?{}:ee,Z=(0,g.useState)({}),re=j()(Z,2),K=re[0],z=re[1],L=(0,g.useState)(""),ue=j()(L,2),te=ue[0],x=ue[1],f=(F=g.useRef)===null||F===void 0?void 0:F(),o=g.useState===null||g.useState===void 0?void 0:(0,g.useState)([]),E=j()(o,2),U=E[0],p=E[1],A=m.useIntl===null||m.useIntl===void 0?void 0:(0,m.useIntl)(),b=r.ZP===null||r.ZP===void 0||(B=r.ZP.useMessage)===null||B===void 0?void 0:B.call(r.ZP),M=j()(b,2),T=M[0],pe=M[1],c=m.useRequest===null||m.useRequest===void 0?void 0:(0,m.useRequest)(h.IV,{manual:!0,onSuccess:function(){var d,a,S;p==null||p([]),f==null||(d=f.current)===null||d===void 0||(a=d.reload)===null||a===void 0||a.call(d),T==null||(S=T.success)===null||S===void 0||S.call(T,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var d;T==null||(d=T.error)===null||d===void 0||d.call(T,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),ae=c.run,Ie=c.loading,he=[{valueType:"group",columns:[{title:"\u7528\u6237\u540D",dataIndex:"username",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}}]},{valueType:"group",columns:[{title:"\u5BC6 \u7801",dataIndex:"password",sorter:!0,hideInTable:!0,hideInSearch:!0,valueType:"password"},{title:"\u786E\u8BA4\u5BC6\u7801",dataIndex:"confirmPassword",sorter:!0,hideInTable:!0,hideInSearch:!0,valueType:"password"}]},{valueType:"group",columns:[{title:"\u89D2 \u8272",dataIndex:"roleIds",sorter:!0,valueType:"select",hideInTable:!0,hideInSearch:!0,formItemProps:{mode:"multiple"},valueEnum:K}]}],ge=[].concat(I()(n.P===null||n.P===void 0?void 0:(0,n.P)(he)),[{title:(0,i.jsx)(m.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(d,a){var S;return[(0,i.jsx)(y,{trigger:(0,i.jsx)(u.ZP,{type:"primary",disabled:(a==null?void 0:a.username)==="admin"||!de(),children:"\u7F16 \u8F91"}),id:a==null?void 0:a.id,onOk:f==null||(S=f.current)===null||S===void 0?void 0:S.reload},a==null?void 0:a.id),(0,i.jsx)(u.ZP,{disabled:(a==null?void 0:a.username)==="admin"||!de(),onClick:function(){ye(a)},children:"\u5BC6\u7801\u91CD\u7F6E"}),(0,i.jsx)(u.ZP,{danger:!0,onClick:function(){Ee(a)},disabled:(a==null?void 0:a.username)==="admin"||!de(),children:"\u5220 \u9664"})]}}]),Ee=(0,g.useCallback)(function(){var $=l()(_()().mark(function d(a){var S;return _()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:O.Z===null||O.Z===void 0||(S=O.Z.confirm)===null||S===void 0||S.call(O.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u7528\u6237\u540D\u4E3A".concat(a.username,"\u7684\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D"),onOk:function(){var Q;(Q=function(){var le=l()(_()().mark(function ce(){return _()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,ae==null?void 0:ae([a==null?void 0:a.id]);case 2:case"end":return se.stop()}},ce)}));return function(){return le.apply(this,arguments)}}())===null||Q===void 0||Q()}});case 1:case"end":return N.stop()}},d)}));return function(d){return $.apply(this,arguments)}}(),[ae]),ye=(0,g.useCallback)(function(){var $=l()(_()().mark(function d(a){var S;return _()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:O.Z===null||O.Z===void 0||(S=O.Z.confirm)===null||S===void 0||S.call(O.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u91CD\u7F6E\u7528\u6237\u540D\u4E3A".concat(a.username,"\u7684\u5BC6\u7801?\u91CD\u7F6E\u540E\u6B64\u7528\u6237\u5BC6\u7801\u5C06\u4E3A\u521D\u59CB\u5BC6\u7801aaaa1111"),onOk:function(){var Q,le;(Q=function(){var ce=l()(_()().mark(function me(){return _()().wrap(function(_e){for(;;)switch(_e.prev=_e.next){case 0:return _e.next=2,h.J$===null||h.J$===void 0?void 0:(0,h.J$)(a==null?void 0:a.id);case 2:case"end":return _e.stop()}},me)}));return function(){return ce.apply(this,arguments)}}())===null||Q===void 0||Q(),r.ZP===null||r.ZP===void 0||(le=r.ZP.success)===null||le===void 0||le.call(r.ZP,"\u63D0\u4EA4\u6210\u529F")}});case 1:case"end":return N.stop()}},d)}));return function(d){return $.apply(this,arguments)}}(),[ae]),Pe=function(){var d;x==null||x(n.V===null||n.V===void 0?void 0:(0,n.V)()),f==null||(d=f.current)===null||d===void 0||d.reload()},de=function(){var d;return J!=null&&(d=J.roleIds)!==null&&d!==void 0&&d.includes("1")?(console.log("isAdmin"),!0):!1};return g.useEffect===null||g.useEffect===void 0||(0,g.useEffect)(function(){x((0,n.V)()),l()(_()().mark(function $(){var d,a;return _()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,(0,D.ah)();case 2:d=V.sent,a=d.data,console.log(a),z(a);case 6:case"end":return V.stop()}},$)}))()},[]),(0,i.jsxs)(s._z,{children:[pe,(0,i.jsx)(v.Z,{headerTitle:A==null?void 0:A.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:f,rowKey:"id",toolBarRender:function(){return[(0,i.jsxs)(i.Fragment,{children:[" ",(0,i.jsx)(fe,{trigger:(0,i.jsx)(u.ZP,{type:"primary",disabled:!de(),children:" \u65B0 \u5EFA "}),id:te,onOk:Pe})]})]},request:h.Md,columns:ge,rowSelection:{onChange:function(d,a){p(a)}}})]})}},51876:function(ve,W,e){e.d(W,{FO:function(){return k},IV:function(){return m},Md:function(){return j},Vx:function(){return w},ah:function(){return g}});var Y=e(97857),_=e.n(Y),q=e(15009),l=e.n(q),H=e(99289),I=e.n(H),t=e(12578);function j(i,y,s){return C.apply(this,arguments)}function C(){return C=I()(l()().mark(function i(y,s,v){var u;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u="/staff/web/userCenter/auth/role/page.json",n.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(u,{method:"GET",params:{params:y,sort:s,filter:v}}));case 2:case"end":return n.stop()}},i)})),C.apply(this,arguments)}function w(i){return R.apply(this,arguments)}function R(){return R=I()(l()().mark(function i(y){var s;return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s="/staff/web/userCenter/auth/role/update.json",u.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(s,{method:"POST",data:y}));case 2:case"end":return u.stop()}},i)})),R.apply(this,arguments)}function k(i){return r.apply(this,arguments)}function r(){return r=I()(l()().mark(function i(y){var s;return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s="/staff/web/userCenter/auth/role/getById.json",u.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(s,{method:"GET",params:{id:y}}));case 2:case"end":return u.stop()}},i)})),r.apply(this,arguments)}function m(i){return h.apply(this,arguments)}function h(){return h=I()(l()().mark(function i(y){var s;return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return s="/staff/web/userCenter/auth/role/del.json",u.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(s,{method:"POST",data:_()({},y)}));case 2:case"end":return u.stop()}},i)})),h.apply(this,arguments)}function g(){return D.apply(this,arguments)}function D(){return D=I()(l()().mark(function i(){var y;return l()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return y="/staff/web/userCenter/auth/role/page.json",v.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(y,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return v.stop()}},i)})),D.apply(this,arguments)}},24982:function(ve,W,e){e.d(W,{FO:function(){return m},IV:function(){return i},J$:function(){return g},Md:function(){return j},Vx:function(){return w},pt:function(){return k}});var Y=e(97857),_=e.n(Y),q=e(15009),l=e.n(q),H=e(99289),I=e.n(H),t=e(12578);function j(s,v,u){return C.apply(this,arguments)}function C(){return C=I()(l()().mark(function s(v,u,O){var n;return l()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:return n="/staff/web/userCenter/auth/user/page.json",X.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(n,{method:"GET",params:{params:v,sort:u,filter:O}}));case 2:case"end":return X.stop()}},s)})),C.apply(this,arguments)}function w(s){return R.apply(this,arguments)}function R(){return R=I()(l()().mark(function s(v){var u;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u="/staff/web/userCenter/auth/user/update.json",n.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(u,{method:"POST",data:v}));case 2:case"end":return n.stop()}},s)})),R.apply(this,arguments)}function k(s){return r.apply(this,arguments)}function r(){return r=I()(l()().mark(function s(v){var u;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u="/staff/web/userCenter/auth/user/updatePwd.json",n.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(u,{method:"POST",data:v}));case 2:case"end":return n.stop()}},s)})),r.apply(this,arguments)}function m(s){return h.apply(this,arguments)}function h(){return h=I()(l()().mark(function s(v){var u;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u="/staff/web/userCenter/auth/user/getById.json",n.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(u,{method:"GET",params:{id:v}}));case 2:case"end":return n.stop()}},s)})),h.apply(this,arguments)}function g(s){return D.apply(this,arguments)}function D(){return D=I()(l()().mark(function s(v){var u;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u="/staff/web/userCenter/auth/user/resetPwd.json",n.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(u,{method:"GET",params:{id:v}}));case 2:case"end":return n.stop()}},s)})),D.apply(this,arguments)}function i(s){return y.apply(this,arguments)}function y(){return y=I()(l()().mark(function s(v){var u;return l()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return u="/staff/web/userCenter/auth/user/del.json",n.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(u,{method:"POST",data:_()({},v)}));case 2:case"end":return n.stop()}},s)})),y.apply(this,arguments)}},19515:function(ve,W,e){e.d(W,{P:function(){return j},V:function(){return t}});var Y=e(64599),_=e.n(Y),q=e(19632),l=e.n(q),H=e(27484),I=e.n(H);function t(){var C=I()().format("YYYYMMDDHHmmssSSS").toString();return C}function j(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],w=l()(C),R=_()(w),k;try{for(R.s();!(k=R.n()).done;){var r=k.value;!(r!=null&&r.valueType)||(r==null?void 0:r.valueType)!=="group"||!(r!=null&&r.columns)||!(r!=null&&r.columns.length)||w.push.apply(w,l()(r==null?void 0:r.columns))}}catch(m){R.e(m)}finally{R.f()}return w.filter(function(m){return m.valueType!=="group"})}}}]);
