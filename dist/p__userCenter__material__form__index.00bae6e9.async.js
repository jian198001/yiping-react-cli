(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[782],{60463:function(){var le=[{valueType:"group",columns:[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialName",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m"},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C"}]},width:"m"}]},{valueType:"group",columns:[{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m"},{title:"\u5931\u6548\u671F",dataIndex:"exp",sorter:!0,valueType:"date",tooltip:"\u65E5\u671F",formItemProps:{rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5931\u6548\u671F"}]},width:"m",hideInSearch:!0,readonly:!0}]}]},62995:function(le,k,r){"use strict";r.r(k),r.d(k,{default:function(){return x}});var H=r(19632),Y=r.n(H),z=r(5574),l=r.n(z),N=r(97857),y=r.n(N),s=r(15009),O=r.n(s),R=r(99289),b=r.n(R),p=r(12578);function K(d,f,m){return o.apply(this,arguments)}function o(){return o=b()(O()().mark(function d(f,m,E){var u;return O()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return u="/staff/web/userCenter/material/form/page.json",C.abrupt("return",p.request===null||p.request===void 0?void 0:(0,p.request)(u,{method:"GET",params:{params:f,sort:m,filter:E}}));case 2:case"end":return C.stop()}},d)})),o.apply(this,arguments)}function U(d){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var m;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m="/staff/web/userCenter/material/form/update.json",u.abrupt("return",request==null?void 0:request(m,{method:"POST",data:f}));case 2:case"end":return u.stop()}},d)})),D.apply(this,arguments)}function _e(d){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var m;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m="/staff/web/userCenter/material/form/getById.json",u.abrupt("return",request==null?void 0:request(m,{method:"GET",params:{id:f}}));case 2:case"end":return u.stop()}},d)})),B.apply(this,arguments)}function ce(d){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime().mark(function d(f){var m;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return m="/staff/web/userCenter/material/form/del.json",u.abrupt("return",request==null?void 0:request(m,{method:"POST",data:_objectSpread({},f)}));case 2:case"end":return u.stop()}},d)})),q.apply(this,arguments)}function pe(){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function d(){var f;return _regeneratorRuntime().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return f="/staff/web/userCenter/material/form/page.json",E.abrupt("return",request==null?void 0:request(f,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return E.stop()}},d)})),F.apply(this,arguments)}var me=r(97131),L=r(30077),v=r(67294),W=r(60463),w=r(19515),J=r(37476),a=r(26855),t=r(2453),n=r(28248),i=r(6493),e=r(85893),Q=function(d){var f,m,E,u=(f=v.useRef)===null||f===void 0?void 0:f(),T=(0,v.useState)(!1),C=l()(T,2),te=C[0],Z=C[1],X=(m=v.useRef)===null||m===void 0?void 0:m(),ee=v.useState===null||v.useState===void 0?void 0:(0,v.useState)([]),ne=l()(ee,2),he=ne[0],G=ne[1],V=t.ZP===null||t.ZP===void 0||(E=t.ZP.useMessage)===null||E===void 0?void 0:E.call(t.ZP),M=l()(V,2),P=M[0],be=M[1],ve=p.useRequest===null||p.useRequest===void 0?void 0:(0,p.useRequest)(i.IV,{manual:!0,onSuccess:function(){var _,c,g;G==null||G([]),X==null||(_=X.current)===null||_===void 0||(c=_.reload)===null||c===void 0||c.call(_),P==null||(g=P.success)===null||g===void 0||g.call(P,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var _;P==null||(_=P.error)===null||_===void 0||_.call(P,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),ue=ve.run,Pe=ve._,ge=function(){var $=b()(O()().mark(function _(){var c,g,h,S,re;return O()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:if(!ae){j.next=7;break}return j.next=3,i.FO===null||i.FO===void 0?void 0:(0,i.FO)(ae);case 3:if(h=j.sent,!(h!=null&&h.data)){j.next=6;break}return j.abrupt("return",u==null||(S=u.current)===null||S===void 0||(re=S.setFieldsValue)===null||re===void 0?void 0:re.call(S,y()({},h==null?void 0:h.data)));case 6:return j.abrupt("return",u==null||(c=u.current)===null||c===void 0||(g=c.setFieldsValue)===null||g===void 0?void 0:g.call(c,{id:ae}));case 7:case"end":return j.stop()}},_)}));return function(){return $.apply(this,arguments)}}(),ye={id:"",title:""},ae=d.id,Oe=d.trigger,ie=d.onOk,Ee=function(){var $=b()(O()().mark(function _(c){var g,h,S;return O()().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return c=y()(y()({},c),{},{id:ae}),I.next=3,i.Vx===null||i.Vx===void 0?void 0:(0,i.Vx)(c);case 3:if(h=I.sent,(h==null?void 0:h.code)===0){I.next=8;break}return t.ZP===null||t.ZP===void 0||(S=t.ZP.error)===null||S===void 0||S.call(t.ZP,h==null?void 0:h.message),Z==null||Z(!1),I.abrupt("return",!1);case 8:return t.ZP===null||t.ZP===void 0||(g=t.ZP.success)===null||g===void 0||g.call(t.ZP,"\u63D0\u4EA4\u6210\u529F"),ie==null||ie(),Z==null||Z(!1),I.abrupt("return",!0);case 12:case"end":return I.stop()}},_)}));return function(c){return $.apply(this,arguments)}}(),Se=(0,v.useCallback)(function(){var $=b()(O()().mark(function _(c){var g;return O()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:n.Z===null||n.Z===void 0||(g=n.Z.confirm)===null||g===void 0||g.call(n.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(c==null?void 0:c.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var I;(I=function(){var j=b()(O()().mark(function fe(){var oe;return O()().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:return se.next=2,ue==null?void 0:ue(c==null||(oe=c.map)===null||oe===void 0?void 0:oe.call(c,function(de){return de==null?void 0:de.id}));case 2:case"end":return se.stop()}},fe)}));return function(){return j.apply(this,arguments)}}())===null||I===void 0||I()}});case 1:case"end":return S.stop()}},_)}));return function(_){return $.apply(this,arguments)}}(),[ue]),Ie=[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialId",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m",hideInSearch:!0},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C"}]},width:"m",hideInSearch:!0},{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m",hideInSearch:!0}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(J.Y,{formRef:u,onFinish:Ee,modalProps:{destroyOnClose:!0,okButtonProps:{loading:te}},onOpenChange:ge,initialValues:ye,title:"\u7F16\u8F91\u4FE1\u606F",trigger:Oe,children:[(0,e.jsx)(a.Z,{layoutType:"Embed",columns:W.formItems}),(0,e.jsx)(L.Z,{headerTitle:"\u660E\u7EC6\u8868\u683C",rowKey:"id",search:!1,toolBarRender:function(){return[(0,e.jsx)(e.Fragment,{children:" "})]},columns:Ie,request:i.Md})]})})},A=r(14726),x=function(){var d,f=(0,v.useState)(""),m=l()(f,2),E=m[0],u=m[1],T=(d=v.useRef)===null||d===void 0?void 0:d(),C=v.useState===null||v.useState===void 0?void 0:(0,v.useState)([]),te=l()(C,2),Z=te[0],X=te[1],ee=p.useIntl===null||p.useIntl===void 0?void 0:(0,p.useIntl)(),ne=[].concat(Y()(w.P===null||w.P===void 0?void 0:(0,w.P)(W.formItems)),[{title:(0,e.jsx)(p.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(V,M){var P;return[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(Q,{trigger:(0,e.jsx)(A.ZP,{type:"primary",children:"\u8BE6 \u60C5"}),id:M==null?void 0:M.id,onOk:T==null||(P=T.current)===null||P===void 0?void 0:P.reload},M.id)})]}}]),he=function(){var V;u==null||u(w.V===null||w.V===void 0?void 0:(0,w.V)()),T==null||(V=T.current)===null||V===void 0||V.reload()};return v.useEffect===null||v.useEffect===void 0||(0,v.useEffect)(function(){u==null||u(w.V===null||w.V===void 0?void 0:(0,w.V)())},[]),(0,e.jsx)(me._z,{children:(0,e.jsx)(L.Z,{headerTitle:ee==null?void 0:ee.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:T,rowKey:"id",toolBarRender:function(){return[]},request:K,columns:ne,rowSelection:{onChange:function(V,M){X(M)}}})})}},6493:function(le,k,r){"use strict";r.d(k,{$G:function(){return pe},FO:function(){return K},IV:function(){return U},Md:function(){return O},Ps:function(){return v},Vx:function(){return b},ZI:function(){return ce},k9:function(){return w}});var H=r(97857),Y=r.n(H),z=r(15009),l=r.n(z),N=r(99289),y=r.n(N),s=r(12578);function O(a,t,n){return R.apply(this,arguments)}function R(){return R=y()(l()().mark(function a(t,n,i){var e;return l()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return e="/staff/web/userCenter/purchaseOrder/purchaseOrder/page.json",A.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(e,{method:"GET",params:{params:t,sort:n,filter:i}}));case 2:case"end":return A.stop()}},a)})),R.apply(this,arguments)}function b(a){return p.apply(this,arguments)}function p(){return p=y()(l()().mark(function a(t){var n;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/update.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(n,{method:"POST",data:t}));case 2:case"end":return e.stop()}},a)})),p.apply(this,arguments)}function K(a){return o.apply(this,arguments)}function o(){return o=y()(l()().mark(function a(t){var n;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/getById.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(n,{method:"GET",params:{id:t}}));case 2:case"end":return e.stop()}},a)})),o.apply(this,arguments)}function U(a){return D.apply(this,arguments)}function D(){return D=y()(l()().mark(function a(t){var n;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/del.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(n,{method:"POST",data:Y()({},t)}));case 2:case"end":return e.stop()}},a)})),D.apply(this,arguments)}function _e(){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function a(){var t;return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return t="/staff/web/userCenter/purchaseOrder/purchaseOrder/page.json",i.abrupt("return",request==null?void 0:request(t,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return i.stop()}},a)})),B.apply(this,arguments)}function ce(a,t,n,i){return q.apply(this,arguments)}function q(){return q=y()(l()().mark(function a(t,n,i,e){var Q;return l()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return Q="/staff/web/userCenter/purchaseOrder/purchaseOrderItem/page.json?orderId="+t,x.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(Q,{method:"GET",params:{params:n,sort:i,filter:e}}));case 2:case"end":return x.stop()}},a)})),q.apply(this,arguments)}function pe(a){return F.apply(this,arguments)}function F(){return F=y()(l()().mark(function a(t){var n;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/updateItem.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(n,{method:"POST",data:t}));case 2:case"end":return e.stop()}},a)})),F.apply(this,arguments)}function me(a){return L.apply(this,arguments)}function L(){return L=_asyncToGenerator(_regeneratorRuntime().mark(function a(t){var n;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/del.json",e.abrupt("return",request==null?void 0:request(n,{method:"POST",data:_objectSpread({},t)}));case 2:case"end":return e.stop()}},a)})),L.apply(this,arguments)}function v(a){return W.apply(this,arguments)}function W(){return W=y()(l()().mark(function a(t){var n;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/submit.json?id="+t,e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(n,{method:"POST"}));case 2:case"end":return e.stop()}},a)})),W.apply(this,arguments)}function w(a){return J.apply(this,arguments)}function J(){return J=y()(l()().mark(function a(t){var n;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/inventory/inbill/purchaseInstock.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(n,{method:"POST",data:t}));case 2:case"end":return e.stop()}},a)})),J.apply(this,arguments)}},19515:function(le,k,r){"use strict";r.d(k,{P:function(){return O},V:function(){return s}});var H=r(64599),Y=r.n(H),z=r(19632),l=r.n(z),N=r(27484),y=r.n(N);function s(){var R=y()().format("YYYYMMDDHHmmssSSS").toString();return R}function O(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],b=l()(R),p=Y()(b),K;try{for(p.s();!(K=p.n()).done;){var o=K.value;!(o!=null&&o.valueType)||(o==null?void 0:o.valueType)!=="group"||!(o!=null&&o.columns)||!(o!=null&&o.columns.length)||b.push.apply(b,l()(o==null?void 0:o.columns))}}catch(U){p.e(U)}finally{p.f()}return b.filter(function(U){return U.valueType!=="group"})}}}]);
