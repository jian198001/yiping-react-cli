"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[49],{97881:function(ie,D,e){e.r(D),e.d(D,{default:function(){return pe}});var L=e(15009),d=e.n(L),k=e(99289),g=e.n(k),G=e(19632),H=e.n(G),W=e(5574),R=e.n(W),F=e(97857),j=e.n(F),M=e(37476),Z=e(26855),u=e(2453),a=e(12578);function de(l,f,v){return Y.apply(this,arguments)}function Y(){return Y=g()(d()().mark(function l(f,v,i){var s;return d()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s="/staff/web/userCenter/notice/notice/page.json",c.abrupt("return",a.request===null||a.request===void 0?void 0:(0,a.request)(s,{method:"GET",params:{params:f,sort:v,filter:i}}));case 2:case"end":return c.stop()}},l)})),Y.apply(this,arguments)}function x(l){return z.apply(this,arguments)}function z(){return z=g()(d()().mark(function l(f){var v;return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return v="/staff/web/userCenter/notice/notice/update.json",s.abrupt("return",a.request===null||a.request===void 0?void 0:(0,a.request)(v,{method:"POST",data:f}));case 2:case"end":return s.stop()}},l)})),z.apply(this,arguments)}function N(l){return J.apply(this,arguments)}function J(){return J=g()(d()().mark(function l(f){var v;return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return v="/staff/web/userCenter/notice/notice/getById.json",s.abrupt("return",a.request===null||a.request===void 0?void 0:(0,a.request)(v,{method:"GET",params:{id:f}}));case 2:case"end":return s.stop()}},l)})),J.apply(this,arguments)}function ve(l){return Q.apply(this,arguments)}function Q(){return Q=g()(d()().mark(function l(f){var v;return d()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return v="/staff/web/userCenter/notice/notice/del.json",s.abrupt("return",a.request===null||a.request===void 0?void 0:(0,a.request)(v,{method:"POST",data:j()({},f)}));case 2:case"end":return s.stop()}},l)})),Q.apply(this,arguments)}function ge(){return X.apply(this,arguments)}function X(){return X=_asyncToGenerator(_regeneratorRuntime().mark(function l(){var f;return _regeneratorRuntime().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return f="/staff/web/userCenter/notice/notice/page.json",i.abrupt("return",request==null?void 0:request(f,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return i.stop()}},l)})),X.apply(this,arguments)}var h=e(67294),le=[{valueType:"group",columns:[{title:"\u6807 \u9898",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]},width:"m"},{title:"\u521B\u5EFA\u65F6\u95F4",dataIndex:"createDate",sorter:!0,hideInForm:!0,valueType:"datetime"}]},{valueType:"group",columns:[{title:"\u5185 \u5BB9",dataIndex:"content",sorter:!1,valueType:"textarea",hideInTable:!0,hideInSearch:!0,width:"lg"}]}],p=e(85893),se=function(l,f){var v,i=(v=h.useRef)===null||v===void 0?void 0:v(),s=(0,h.useState)(!1),S=R()(s,2),c=S[0],y=S[1],w=u.ZP.useMessage(),_=R()(w,2),T=_[0],A=_[1],ee=function(){var U=g()(d()().mark(function C(){var E,$,o,r,t;return d()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:if(!m){O.next=8;break}return O.next=3,N==null?void 0:N(m);case 3:if(o=O.sent,console.log(o),!(o!=null&&o.data)){O.next=7;break}return O.abrupt("return",i==null||(r=i.current)===null||r===void 0||(t=r.setFieldsValue)===null||t===void 0?void 0:t.call(r,j()({},o==null?void 0:o.data)));case 7:return O.abrupt("return",i==null||(E=i.current)===null||E===void 0||($=E.setFieldsValue)===null||$===void 0?void 0:$.call(E,{id:m}));case 8:case"end":return O.stop()}},C)}));return function(){return U.apply(this,arguments)}}(),V={id:"",title:""},m=l.id,re=l.trigger,I=l.onOk,b=function(){var U=g()(d()().mark(function C(E){var $,o,r;return d()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return y==null||y(!0),E=j()(j()({},E),{},{id:m}),console.log("test"),n.prev=3,n.next=6,x==null?void 0:x(E);case 6:o=n.sent,n.next=12;break;case 9:n.prev=9,n.t0=n.catch(3),console.log(n.t0);case 12:if(console.log(JSON.stringify(o)),console.log(o),(($=o)===null||$===void 0?void 0:$.code)===0){n.next=19;break}return y==null||y(!1),n.abrupt("return",!1);case 19:return T==null||(r=T.success)===null||r===void 0||r.call(T,"\u63D0\u4EA4\u6210\u529F"),I==null||I(),y==null||y(!1),n.abrupt("return",!0);case 23:case"end":return n.stop()}},C,null,[[3,9]])}));return function(E){return U.apply(this,arguments)}}();return(0,p.jsxs)(p.Fragment,{children:[A,(0,p.jsx)(M.Y,{formRef:i,onFinish:b,modalProps:{destroyOnClose:!0,okButtonProps:{loading:c}},onOpenChange:ee,initialValues:V,title:"\u7F16\u8F91\u4FE1\u606F",trigger:re,children:(0,p.jsx)(Z.Z,{layoutType:"Embed",columns:le})})]})},ce=e(97131),fe=e(30077),q=e(14726),B=e(28248),P=e(19515),pe=function(){var l,f,v=(0,h.useState)(""),i=R()(v,2),s=i[0],S=i[1],c=(l=h.useRef)===null||l===void 0?void 0:l(),y=h.useState===null||h.useState===void 0?void 0:(0,h.useState)([]),w=R()(y,2),_=w[0],T=w[1],A=a.useIntl===null||a.useIntl===void 0?void 0:(0,a.useIntl)(),ee=u.ZP===null||u.ZP===void 0||(f=u.ZP.useMessage)===null||f===void 0?void 0:f.call(u.ZP),V=R()(ee,2),m=V[0],re=V[1],I=a.useRequest===null||a.useRequest===void 0?void 0:(0,a.useRequest)(ve,{manual:!0,onSuccess:function(){var r,t,n;T==null||T([]),c==null||(r=c.current)===null||r===void 0||(t=r.reload)===null||t===void 0||t.call(r),m==null||(n=m.success)===null||n===void 0||n.call(m,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var r;m==null||(r=m.error)===null||r===void 0||r.call(m,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),b=I.run,U=I.loading,C=[].concat(H()(P.P===null||P.P===void 0?void 0:(0,P.P)(le)),[{title:(0,p.jsx)(a.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(r,t){var n;return[(0,p.jsx)(se,{trigger:(0,p.jsx)(q.ZP,{children:"\u7F16 \u8F91"}),id:t==null?void 0:t.id,onOk:c==null||(n=c.current)===null||n===void 0?void 0:n.reload},t.id)]}}]),E=(0,h.useCallback)(function(){var o=g()(d()().mark(function r(t){var n;return d()().wrap(function(ne){for(;;)switch(ne.prev=ne.next){case 0:B.Z===null||B.Z===void 0||(n=B.Z.confirm)===null||n===void 0||n.call(B.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(t==null?void 0:t.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var ae;(ae=function(){var me=g()(d()().mark(function oe(){var te;return d()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,b==null?void 0:b(t==null||(te=t.map)===null||te===void 0?void 0:te.call(t,function(ue){return ue==null?void 0:ue.id}));case 2:case"end":return K.stop()}},oe)}));return function(){return me.apply(this,arguments)}}())===null||ae===void 0||ae()}});case 1:case"end":return ne.stop()}},r)}));return function(r){return o.apply(this,arguments)}}(),[b]),$=function(){var r;S==null||S(P.V===null||P.V===void 0?void 0:(0,P.V)()),c==null||(r=c.current)===null||r===void 0||r.reload()};return h.useEffect===null||h.useEffect===void 0||(0,h.useEffect)(function(){S==null||S(P.V===null||P.V===void 0?void 0:(0,P.V)())},[]),(0,p.jsxs)(ce._z,{children:[re,(0,p.jsx)(fe.Z,{headerTitle:A==null?void 0:A.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:c,rowKey:"id",toolBarRender:function(){return[(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(q.ZP,{danger:!0,disabled:!_||!_.length,onClick:function(){E(_)},children:"\u5220 \u9664"}),(0,p.jsx)(se,{trigger:(0,p.jsx)(q.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:s,onOk:$})]})]},request:de,columns:C,rowSelection:{onChange:function(r,t){T(t)}}})]})}},19515:function(ie,D,e){e.d(D,{P:function(){return R},V:function(){return W}});var L=e(64599),d=e.n(L),k=e(19632),g=e.n(k),G=e(27484),H=e.n(G);function W(){var F=H()().format("YYYYMMDDHHmmssSSS").toString();return F}function R(){var F=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],j=g()(F),M=d()(j),Z;try{for(M.s();!(Z=M.n()).done;){var u=Z.value;!(u!=null&&u.valueType)||(u==null?void 0:u.valueType)!=="group"||!(u!=null&&u.columns)||!(u!=null&&u.columns.length)||j.push.apply(j,g()(u==null?void 0:u.columns))}}catch(a){M.e(a)}finally{M.f()}return j.filter(function(a){return a.valueType!=="group"})}}}]);
