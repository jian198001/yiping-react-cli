"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[170],{8795:function(ne,A,e){e.r(A),e.d(A,{default:function(){return te}});var K=e(15009),m=e.n(K),L=e(99289),l=e.n(L),W=e(19632),R=e.n(W),a=e(5574),T=e.n(a),b=e(97857),P=e.n(b),j=e(37476),F=e(26855),n=e(2453),i=e(12578),M=e(51876),f=e(67294),B=[{valueType:"group",columns:[{title:"\u540D \u79F0",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]},width:"md"},{title:"\u6743 \u9650",dataIndex:"permission",sorter:!0,valueType:"select",width:"md",formItemProps:{mode:"multiple"}}]}],r=e(85893),v=function(I){var D,S=(D=f.useRef)===null||D===void 0?void 0:D(),k=function(){var U=l()(m()().mark(function g(){var s,V,d,C,z;return m()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:if(!E){y.next=7;break}return y.next=3,M.FO===null||M.FO===void 0?void 0:(0,M.FO)(E);case 3:if(d=y.sent,!(d!=null&&d.data)){y.next=6;break}return y.abrupt("return",S==null||(C=S.current)===null||C===void 0||(z=C.setFieldsValue)===null||z===void 0?void 0:z.call(C,P()({},d==null?void 0:d.data)));case 6:return y.abrupt("return",S==null||(s=S.current)===null||s===void 0||(V=s.setFieldsValue)===null||V===void 0?void 0:V.call(s,{id:E}));case 7:case"end":return y.stop()}},g)}));return function(){return U.apply(this,arguments)}}(),J={id:"",title:""},E=I.id,p=I.trigger,x=I.onOk,G=i.useRequest===null||i.useRequest===void 0?void 0:(0,i.useRequest)(M.Vx,{manual:!0,onSuccess:function(){var g;n.ZP===null||n.ZP===void 0||(g=n.ZP.success)===null||g===void 0||g.call(n.ZP,"\u63D0\u4EA4\u6210\u529F"),x==null||x()}}),H=G.run,Z=G.loading,Y=function(){var U=l()(m()().mark(function g(s){return m()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return s=P()(P()({},s),{},{id:E}),H==null||H(s),d.abrupt("return",!0);case 3:case"end":return d.stop()}},g)}));return function(s){return U.apply(this,arguments)}}();return(0,r.jsx)(j.Y,{formRef:S,onFinish:Y,modalProps:{destroyOnClose:!0,okButtonProps:{loading:Z}},onOpenChange:k,initialValues:J,title:"\u7F16\u8F91\u4FE1\u606F",trigger:p,children:(0,r.jsx)(F.Z,{layoutType:"Embed",columns:B})})},c=e(97131),h=e(30077),t=e(14726),w=e(28248),_=e(19515),te=function(){var I,D,S=(0,f.useState)(""),k=T()(S,2),J=k[0],E=k[1],p=(I=f.useRef)===null||I===void 0?void 0:I(),x=f.useState===null||f.useState===void 0?void 0:(0,f.useState)([]),G=T()(x,2),H=G[0],Z=G[1],Y=i.useIntl===null||i.useIntl===void 0?void 0:(0,i.useIntl)(),U=n.ZP===null||n.ZP===void 0||(D=n.ZP.useMessage)===null||D===void 0?void 0:D.call(n.ZP),g=T()(U,2),s=g[0],V=g[1],d=i.useRequest===null||i.useRequest===void 0?void 0:(0,i.useRequest)(M.IV,{manual:!0,onSuccess:function(){var o,u,O;Z==null||Z([]),p==null||(o=p.current)===null||o===void 0||(u=o.reload)===null||u===void 0||u.call(o),s==null||(O=s.success)===null||O===void 0||O.call(s,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var o;s==null||(o=s.error)===null||o===void 0||o.call(s,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),C=d.run,z=d.loading,re=[].concat(R()(_.P===null||_.P===void 0?void 0:(0,_.P)(B)),[{title:(0,r.jsx)(i.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(o,u){var O;return[(0,r.jsx)(v,{trigger:(0,r.jsx)(t.ZP,{type:"primary",disabled:(u==null?void 0:u.name)==="\u7CFB\u7EDF\u7BA1\u7406\u5458",children:"\u7F16 \u8F91"}),id:u==null?void 0:u.id,onOk:p==null||(O=p.current)===null||O===void 0?void 0:O.reload},u.id),(0,r.jsx)(t.ZP,{danger:!0,onClick:function(){y(H)},disabled:(u==null?void 0:u.name)==="\u7CFB\u7EDF\u7BA1\u7406\u5458",children:"\u5220 \u9664"})]}}]),y=(0,f.useCallback)(function(){var $=l()(m()().mark(function o(u){var O;return m()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:w.Z===null||w.Z===void 0||(O=w.Z.confirm)===null||O===void 0||O.call(w.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(u==null?void 0:u.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var X;(X=function(){var se=l()(m()().mark(function ue(){var q;return m()().wrap(function(N){for(;;)switch(N.prev=N.next){case 0:return N.next=2,C==null?void 0:C(u==null||(q=u.map)===null||q===void 0?void 0:q.call(u,function(ee){return ee==null?void 0:ee.id}));case 2:case"end":return N.stop()}},ue)}));return function(){return se.apply(this,arguments)}}())===null||X===void 0||X()}});case 1:case"end":return Q.stop()}},o)}));return function(o){return $.apply(this,arguments)}}(),[C]),ae=function(){var o;E==null||E(_.V===null||_.V===void 0?void 0:(0,_.V)()),p==null||(o=p.current)===null||o===void 0||o.reload()};return f.useEffect===null||f.useEffect===void 0||(0,f.useEffect)(function(){E==null||E(_.V===null||_.V===void 0?void 0:(0,_.V)())},[]),(0,r.jsxs)(c._z,{children:[V,(0,r.jsx)(h.Z,{headerTitle:Y==null?void 0:Y.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:p,rowKey:"id",toolBarRender:function(){return[(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(v,{trigger:(0,r.jsx)(t.ZP,{type:"primary",children:"\u65B0 \u5EFA"}),id:J,onOk:ae})})]},request:M.Md,columns:re,rowSelection:{onChange:function(o,u){Z(u)}}})]})}},51876:function(ne,A,e){e.d(A,{FO:function(){return F},IV:function(){return i},Md:function(){return T},Vx:function(){return P},ah:function(){return f}});var K=e(97857),m=e.n(K),L=e(15009),l=e.n(L),W=e(99289),R=e.n(W),a=e(12578);function T(r,v,c){return b.apply(this,arguments)}function b(){return b=R()(l()().mark(function r(v,c,h){var t;return l()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return t="/staff/web/userCenter/auth/role/page.json",_.abrupt("return",a.request===null||a.request===void 0?void 0:(0,a.request)(t,{method:"GET",params:{params:v,sort:c,filter:h}}));case 2:case"end":return _.stop()}},r)})),b.apply(this,arguments)}function P(r){return j.apply(this,arguments)}function j(){return j=R()(l()().mark(function r(v){var c;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c="/staff/web/userCenter/auth/role/update.json",t.abrupt("return",a.request===null||a.request===void 0?void 0:(0,a.request)(c,{method:"POST",data:v}));case 2:case"end":return t.stop()}},r)})),j.apply(this,arguments)}function F(r){return n.apply(this,arguments)}function n(){return n=R()(l()().mark(function r(v){var c;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c="/staff/web/userCenter/auth/role/getById.json",t.abrupt("return",a.request===null||a.request===void 0?void 0:(0,a.request)(c,{method:"GET",params:{id:v}}));case 2:case"end":return t.stop()}},r)})),n.apply(this,arguments)}function i(r){return M.apply(this,arguments)}function M(){return M=R()(l()().mark(function r(v){var c;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c="/staff/web/userCenter/auth/role/del.json",t.abrupt("return",a.request===null||a.request===void 0?void 0:(0,a.request)(c,{method:"POST",data:m()({},v)}));case 2:case"end":return t.stop()}},r)})),M.apply(this,arguments)}function f(){return B.apply(this,arguments)}function B(){return B=R()(l()().mark(function r(){var v;return l()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return v="/staff/web/userCenter/auth/role/page.json",h.abrupt("return",a.request===null||a.request===void 0?void 0:(0,a.request)(v,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return h.stop()}},r)})),B.apply(this,arguments)}},19515:function(ne,A,e){e.d(A,{P:function(){return T},V:function(){return a}});var K=e(64599),m=e.n(K),L=e(19632),l=e.n(L),W=e(27484),R=e.n(W);function a(){var b=R()().format("YYYYMMDDHHmmssSSS").toString();return b}function T(){var b=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],P=l()(b),j=m()(P),F;try{for(j.s();!(F=j.n()).done;){var n=F.value;!(n!=null&&n.valueType)||(n==null?void 0:n.valueType)!=="group"||!(n!=null&&n.columns)||!(n!=null&&n.columns.length)||P.push.apply(P,l()(n==null?void 0:n.columns))}}catch(i){j.e(i)}finally{j.f()}return P.filter(function(i){return i.valueType!=="group"})}}}]);
