"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[273],{77058:function(ue,U,e){e.r(U),e.d(U,{default:function(){return te}});var w=e(15009),g=e.n(w),G=e(99289),l=e.n(G),x=e(19632),R=e.n(x),s=e(5574),I=e.n(s),M=e(97857),E=e.n(M),y=e(37476),K=e(26855),r=e(2453),o=e(36285),v=e(67294),N=[{valueType:"group",columns:[{title:"\u540D \u79F0",dataIndex:"name",sorter:!0,width:"md",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]}}]}],i=e(85893),d=function(A){var F,T=(F=v.useRef)===null||F===void 0?void 0:F(),H=(0,v.useState)(!1),Y=I()(H,2),$=Y[0],_=Y[1],J=function(){var W=l()(g()().mark(function m(){var h,C,t,O,j;return g()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!D){n.next=7;break}return n.next=3,o.FO===null||o.FO===void 0?void 0:(0,o.FO)(D);case 3:if(t=n.sent,!(t!=null&&t.data)){n.next=6;break}return n.abrupt("return",T==null||(O=T.current)===null||O===void 0||(j=O.setFieldsValue)===null||j===void 0?void 0:j.call(O,E()({},t==null?void 0:t.data)));case 6:return n.abrupt("return",T==null||(h=T.current)===null||h===void 0||(C=h.setFieldsValue)===null||C===void 0?void 0:C.call(h,{id:D}));case 7:case"end":return n.stop()}},m)}));return function(){return W.apply(this,arguments)}}(),k={id:"",title:""},D=A.id,L=A.trigger,Z=A.onOk,Q=function(){var W=l()(g()().mark(function m(h){var C,t,O;return g()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return _(!0),h=E()(E()({},h),{},{id:D}),u.next=4,o.Vx===null||o.Vx===void 0?void 0:(0,o.Vx)(h);case 4:if(t=u.sent,(t==null?void 0:t.code)===0){u.next=9;break}return r.ZP===null||r.ZP===void 0||(O=r.ZP.error)===null||O===void 0||O.call(r.ZP,t==null?void 0:t.message),_(!1),u.abrupt("return",!1);case 9:return r.ZP===null||r.ZP===void 0||(C=r.ZP.success)===null||C===void 0||C.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),Z==null||Z(),_(!1),u.abrupt("return",!0);case 13:case"end":return u.stop()}},m)}));return function(h){return W.apply(this,arguments)}}();return(0,i.jsx)(y.Y,{formRef:T,onFinish:Q,modalProps:{destroyOnClose:!0,okButtonProps:{loading:$}},onOpenChange:J,initialValues:k,title:"\u7F16\u8F91\u4FE1\u606F",trigger:L,children:(0,i.jsx)(K.Z,{layoutType:"Embed",columns:N})})},f=e(97131),c=e(30077),p=e(14726),a=e(28248),P=e(19515),S=e(12578),te=function(){var A,F,T=(0,v.useState)(""),H=I()(T,2),Y=H[0],$=H[1],_=(A=v.useRef)===null||A===void 0?void 0:A(),J=v.useState===null||v.useState===void 0?void 0:(0,v.useState)([]),k=I()(J,2),D=k[0],L=k[1],Z=S.useIntl===null||S.useIntl===void 0?void 0:(0,S.useIntl)(),Q=r.ZP===null||r.ZP===void 0||(F=r.ZP.useMessage)===null||F===void 0?void 0:F.call(r.ZP),W=I()(Q,2),m=W[0],h=W[1],C=[].concat(R()(P.P===null||P.P===void 0?void 0:(0,P.P)(N)),[{title:(0,i.jsx)(S.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(u,n){var B;return[(0,i.jsx)(d,{trigger:(0,i.jsx)(p.ZP,{children:"\u7F16 \u8F91"}),id:n==null?void 0:n.id,onOk:_==null||(B=_.current)===null||B===void 0?void 0:B.reload},n.id)]}}]),t=function(){var j=l()(g()().mark(function u(n){var B;return g()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:a.Z===null||a.Z===void 0||(B=a.Z.confirm)===null||B===void 0||B.call(a.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(n==null?void 0:n.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){l()(g()().mark(function le(){var q,b,ee,z,re,ne;return g()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,o.IV===null||o.IV===void 0?void 0:(0,o.IV)(n==null||(q=n.map)===null||q===void 0?void 0:q.call(n,function(ae){return ae==null?void 0:ae.id}));case 2:if(b=V.sent,(b==null?void 0:b.code)===0){V.next=7;break}return V.abrupt("return",m==null||(ee=m.error)===null||ee===void 0?void 0:ee.call(m,(b==null?void 0:b.message)||"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5"));case 7:L==null||L([]),_==null||(z=_.current)===null||z===void 0||(re=z.reload)===null||re===void 0||re.call(z),m==null||(ne=m.success)===null||ne===void 0||ne.call(m,(b==null?void 0:b.message)||"\u5220\u9664\u64CD\u4F5C\u6210\u529F");case 10:case"end":return V.stop()}},le)}))()}});case 1:case"end":return X.stop()}},u)}));return function(n){return j.apply(this,arguments)}}(),O=function(){var u;$==null||$(P.V===null||P.V===void 0?void 0:(0,P.V)()),_==null||(u=_.current)===null||u===void 0||u.reload()};return v.useEffect===null||v.useEffect===void 0||(0,v.useEffect)(function(){$==null||$(P.V===null||P.V===void 0?void 0:(0,P.V)())},[]),(0,i.jsxs)(f._z,{children:[h,(0,i.jsx)(c.Z,{headerTitle:Z==null?void 0:Z.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:_,rowKey:"id",toolBarRender:function(){return[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(p.ZP,{danger:!0,disabled:!D||!D.length,onClick:function(){t(D)},children:"\u5220 \u9664"}),(0,i.jsx)(d,{trigger:(0,i.jsx)(p.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:Y,onOk:O})]})]},request:o.Md,columns:C,rowSelection:{onChange:function(u,n){L(n)}}})]})}},36285:function(ue,U,e){e.d(U,{FO:function(){return K},IV:function(){return o},Md:function(){return I},Vx:function(){return E}});var w=e(97857),g=e.n(w),G=e(15009),l=e.n(G),x=e(99289),R=e.n(x),s=e(12578);function I(d,f,c){return M.apply(this,arguments)}function M(){return M=R()(l()().mark(function d(f,c,p){var a;return l()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return a="/staff/web/userCenter/oa/post/page.json",S.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(a,{method:"GET",params:{params:f,sort:c,filter:p}}));case 2:case"end":return S.stop()}},d)})),M.apply(this,arguments)}function E(d){return y.apply(this,arguments)}function y(){return y=R()(l()().mark(function d(f){var c;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c="/staff/web/userCenter/oa/post/update.json",a.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(c,{method:"POST",data:f}));case 2:case"end":return a.stop()}},d)})),y.apply(this,arguments)}function K(d){return r.apply(this,arguments)}function r(){return r=R()(l()().mark(function d(f){var c;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c="/staff/web/userCenter/oa/post/getById.json",a.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(c,{method:"GET",params:{id:f}}));case 2:case"end":return a.stop()}},d)})),r.apply(this,arguments)}function o(d){return v.apply(this,arguments)}function v(){return v=R()(l()().mark(function d(f){var c;return l()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c="/staff/web/userCenter/oa/post/del.json",a.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(c,{method:"POST",data:g()({},f)}));case 2:case"end":return a.stop()}},d)})),v.apply(this,arguments)}function N(){return i.apply(this,arguments)}function i(){return i=_asyncToGenerator(_regeneratorRuntime().mark(function d(){var f;return _regeneratorRuntime().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f="/staff/web/userCenter/oa/post/page.json",p.abrupt("return",request==null?void 0:request(f,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return p.stop()}},d)})),i.apply(this,arguments)}},19515:function(ue,U,e){e.d(U,{P:function(){return I},V:function(){return s}});var w=e(64599),g=e.n(w),G=e(19632),l=e.n(G),x=e(27484),R=e.n(x);function s(){var M=R()().format("YYYYMMDDHHmmssSSS").toString();return M}function I(){var M=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=l()(M),y=g()(E),K;try{for(y.s();!(K=y.n()).done;){var r=K.value;!(r!=null&&r.valueType)||(r==null?void 0:r.valueType)!=="group"||!(r!=null&&r.columns)||!(r!=null&&r.columns.length)||E.push.apply(E,l()(r==null?void 0:r.columns))}}catch(o){y.e(o)}finally{y.f()}return E.filter(function(o){return o.valueType!=="group"})}}}]);
