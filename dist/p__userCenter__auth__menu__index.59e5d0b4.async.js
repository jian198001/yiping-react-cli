"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[65],{95840:function(ae,b,e){e.r(b),e.d(b,{default:function(){return ve}});var K=e(15009),l=e.n(K),L=e(99289),g=e.n(L),W=e(19632),H=e.n(W),Y=e(5574),M=e.n(Y),Z=e(97857),E=e.n(Z),j=e(37476),B=e(26855),n=e(2453),r=e(12578);function le(a,v,u){return G.apply(this,arguments)}function G(){return G=g()(l()().mark(function a(v,u,O){var t;return l()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return t="/userCenter/auth/menu/page.json",d.abrupt("return",r.request===null||r.request===void 0?void 0:(0,r.request)(t,{method:"GET",params:{params:v,sort:u,filter:O}}));case 2:case"end":return d.stop()}},a)})),G.apply(this,arguments)}function oe(a){return k.apply(this,arguments)}function k(){return k=g()(l()().mark(function a(v){var u;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u="/userCenter/auth/menu",t.abrupt("return",r.request===null||r.request===void 0?void 0:(0,r.request)(u,{method:"POST",data:v}));case 2:case"end":return t.stop()}},a)})),k.apply(this,arguments)}function w(a){return z.apply(this,arguments)}function z(){return z=g()(l()().mark(function a(v){var u;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u="/userCenter/auth/menu/getById.json",t.abrupt("return",r.request===null||r.request===void 0?void 0:(0,r.request)(u,{method:"GET",params:{id:v}}));case 2:case"end":return t.stop()}},a)})),z.apply(this,arguments)}function se(a){return J.apply(this,arguments)}function J(){return J=g()(l()().mark(function a(v){var u;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u="/userCenter/auth/menu/del.json",t.abrupt("return",r.request===null||r.request===void 0?void 0:(0,r.request)(u,{method:"POST",data:E()({},v)}));case 2:case"end":return t.stop()}},a)})),J.apply(this,arguments)}var P=e(67294),ne=[{valueType:"group",columns:[{title:"\u6807 \u9898",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]},width:"m"},{title:"\u8DEF \u5F84",dataIndex:"name",sorter:!0}]},{valueType:"group",columns:[{title:"\u56FE \u6807",dataIndex:"name",sorter:!0,valueType:"select"},{title:"\u7EC4\u4EF6\u8DEF\u5F84",dataIndex:"name",sorter:!0}]},{valueType:"group",columns:[{title:"\u76F4\u63A5\u8DF3\u8F6C",dataIndex:"name",sorter:!0,valueType:"select"}]}],m=e(85893),re=function(a){var v,u=(v=P.useRef)===null||v===void 0?void 0:v(),O=function(){var T=g()(l()().mark(function c(){var o,I,f,_,V;return l()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:if(!p){h.next=7;break}return h.next=3,w==null?void 0:w(p);case 3:if(f=h.sent,!(f!=null&&f.data)){h.next=6;break}return h.abrupt("return",u==null||(_=u.current)===null||_===void 0||(V=_.setFieldsValue)===null||V===void 0?void 0:V.call(_,E()({},f==null?void 0:f.data)));case 6:return h.abrupt("return",u==null||(o=u.current)===null||o===void 0||(I=o.setFieldsValue)===null||I===void 0?void 0:I.call(o,{id:p}));case 7:case"end":return h.stop()}},c)}));return function(){return T.apply(this,arguments)}}(),t={id:"",title:""},p=a.id,d=a.trigger,F=a.onOk,A=r.useRequest===null||r.useRequest===void 0?void 0:(0,r.useRequest)(oe,{manual:!0,onSuccess:function(){var c;n.ZP===null||n.ZP===void 0||(c=n.ZP.success)===null||c===void 0||c.call(n.ZP,"\u63D0\u4EA4\u6210\u529F"),F==null||F()},onError:function(){var c;n.ZP===null||n.ZP===void 0||(c=n.ZP.error)===null||c===void 0||c.call(n.ZP,"\u63D0\u4EA4\u5931\u8D25, \u8BF7\u91CD\u8BD5!")}}),S=A.run,C=A.loading,D=function(){var T=g()(l()().mark(function c(o){return l()().wrap(function(f){for(;;)switch(f.prev=f.next){case 0:return o=E()(E()({},o),{},{id:p}),S==null||S(o),f.abrupt("return",!0);case 3:case"end":return f.stop()}},c)}));return function(o){return T.apply(this,arguments)}}();return(0,m.jsx)(j.Y,{formRef:u,onFinish:D,modalProps:{destroyOnClose:!0,okButtonProps:{loading:C}},onOpenChange:O,initialValues:t,title:"\u7F16\u8F91\u4FE1\u606F",trigger:d,children:(0,m.jsx)(B.Z,{layoutType:"Embed",columns:ne})})},ie=e(97131),de=e(30077),N=e(14726),x=e(28248),R=e(19515),ve=function(){var a,v,u=(0,P.useState)(""),O=M()(u,2),t=O[0],p=O[1],d=(a=P.useRef)===null||a===void 0?void 0:a(),F=P.useState===null||P.useState===void 0?void 0:(0,P.useState)([]),A=M()(F,2),S=A[0],C=A[1],D=r.useIntl===null||r.useIntl===void 0?void 0:(0,r.useIntl)(),T=n.ZP===null||n.ZP===void 0||(v=n.ZP.useMessage)===null||v===void 0?void 0:v.call(n.ZP),c=M()(T,2),o=c[0],I=c[1],f=r.useRequest===null||r.useRequest===void 0?void 0:(0,r.useRequest)(se,{manual:!0,onSuccess:function(){var s,i,y;C==null||C([]),d==null||(s=d.current)===null||s===void 0||(i=s.reload)===null||i===void 0||i.call(s),o==null||(y=o.success)===null||y===void 0||y.call(o,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var s;o==null||(s=o.error)===null||s===void 0||s.call(o,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),_=f.run,V=f.loading,ue=[].concat(H()(R.P===null||R.P===void 0?void 0:(0,R.P)(ne)),[{title:(0,m.jsx)(r.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(s,i){var y;return[(0,m.jsx)(re,{trigger:(0,m.jsx)(N.ZP,{children:"\u7F16 \u8F91"}),id:i==null?void 0:i.id,onOk:d==null||(y=d.current)===null||y===void 0?void 0:y.reload},i.id)]}}]),h=(0,P.useCallback)(function(){var $=g()(l()().mark(function s(i){var y;return l()().wrap(function(Q){for(;;)switch(Q.prev=Q.next){case 0:x.Z===null||x.Z===void 0||(y=x.Z.confirm)===null||y===void 0||y.call(x.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(i==null?void 0:i.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var X;(X=function(){var fe=g()(l()().mark(function te(){var q;return l()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,_==null?void 0:_(i==null||(q=i.map)===null||q===void 0?void 0:q.call(i,function(ee){return ee==null?void 0:ee.id}));case 2:case"end":return U.stop()}},te)}));return function(){return fe.apply(this,arguments)}}())===null||X===void 0||X()}});case 1:case"end":return Q.stop()}},s)}));return function(s){return $.apply(this,arguments)}}(),[_]),ce=function(){var s;p==null||p(R.V===null||R.V===void 0?void 0:(0,R.V)()),d==null||(s=d.current)===null||s===void 0||s.reload()};return P.useEffect===null||P.useEffect===void 0||(0,P.useEffect)(function(){p==null||p(R.V===null||R.V===void 0?void 0:(0,R.V)())},[]),(0,m.jsxs)(ie._z,{children:[I,(0,m.jsx)(de.Z,{headerTitle:D==null?void 0:D.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:d,rowKey:"id",toolBarRender:function(){return[(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(N.ZP,{danger:!0,disabled:!S||!S.length,onClick:function(){h(S)},children:"\u5220 \u9664"}),(0,m.jsx)(re,{trigger:(0,m.jsx)(N.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:t,onOk:ce})]})]},request:le,columns:ue,rowSelection:{onChange:function(s,i){C(i)}}})]})}},19515:function(ae,b,e){e.d(b,{P:function(){return M},V:function(){return Y}});var K=e(64599),l=e.n(K),L=e(19632),g=e.n(L),W=e(27484),H=e.n(W);function Y(){var Z=H()().format("YYYYMMDDHHmmssSSS").toString();return Z}function M(){var Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=g()(Z),j=l()(E),B;try{for(j.s();!(B=j.n()).done;){var n=B.value;!(n!=null&&n.valueType)||(n==null?void 0:n.valueType)!=="group"||!(n!=null&&n.columns)||!(n!=null&&n.columns.length)||E.push.apply(E,g()(n==null?void 0:n.columns))}}catch(r){j.e(r)}finally{j.f()}return E.filter(function(r){return r.valueType!=="group"})}}}]);
