"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[170],{8795:function(ue,V,e){e.r(V),e.d(V,{default:function(){return te}});var w=e(15009),g=e.n(w),x=e(99289),t=e.n(x),G=e(19632),M=e.n(G),u=e(5574),R=e.n(u),S=e(97857),E=e.n(S),y=e(37476),U=e(26855),r=e(2453),o=e(51876),v=e(67294),H=[{valueType:"group",columns:[{title:"\u540D \u79F0",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]},width:"md"},{title:"\u6743 \u9650",dataIndex:"permission",sorter:!0,valueType:"select",width:"md",formItemProps:{mode:"multiple"}}]}],i=e(85893),d=function(D){var A,C=(A=v.useRef)===null||A===void 0?void 0:A(),Y=(0,v.useState)(!1),k=R()(Y,2),$=k[0],m=k[1],J=function(){var W=t()(g()().mark(function _(){var h,I,s,O,j;return g()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!K){n.next=7;break}return n.next=3,o.FO===null||o.FO===void 0?void 0:(0,o.FO)(K);case 3:if(s=n.sent,!(s!=null&&s.data)){n.next=6;break}return n.abrupt("return",C==null||(O=C.current)===null||O===void 0||(j=O.setFieldsValue)===null||j===void 0?void 0:j.call(O,E()({},s==null?void 0:s.data)));case 6:return n.abrupt("return",C==null||(h=C.current)===null||h===void 0||(I=h.setFieldsValue)===null||I===void 0?void 0:I.call(h,{id:K}));case 7:case"end":return n.stop()}},_)}));return function(){return W.apply(this,arguments)}}(),z={id:"",title:""},K=D.id,L=D.trigger,F=D.onOk,Q=function(){var W=t()(g()().mark(function _(h){var I,s,O;return g()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return m(!0),h=E()(E()({},h),{},{id:K}),l.next=4,o.Vx===null||o.Vx===void 0?void 0:(0,o.Vx)(h);case 4:if(s=l.sent,(s==null?void 0:s.code)===0){l.next=9;break}return r.ZP===null||r.ZP===void 0||(O=r.ZP.error)===null||O===void 0||O.call(r.ZP,s==null?void 0:s.message),m(!1),l.abrupt("return",!1);case 9:return r.ZP===null||r.ZP===void 0||(I=r.ZP.success)===null||I===void 0||I.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),F==null||F(),m(!1),l.abrupt("return",!0);case 13:case"end":return l.stop()}},_)}));return function(h){return W.apply(this,arguments)}}();return(0,i.jsx)(y.Y,{formRef:C,onFinish:Q,modalProps:{destroyOnClose:!0,okButtonProps:{loading:$}},onOpenChange:J,initialValues:z,title:"\u7F16\u8F91\u4FE1\u606F",trigger:L,children:(0,i.jsx)(U.Z,{layoutType:"Embed",columns:H})})},f=e(97131),c=e(30077),p=e(14726),a=e(28248),P=e(19515),T=e(12578),te=function(){var D,A,C=(0,v.useState)(""),Y=R()(C,2),k=Y[0],$=Y[1],m=(D=v.useRef)===null||D===void 0?void 0:D(),J=v.useState===null||v.useState===void 0?void 0:(0,v.useState)([]),z=R()(J,2),K=z[0],L=z[1],F=T.useIntl===null||T.useIntl===void 0?void 0:(0,T.useIntl)(),Q=r.ZP===null||r.ZP===void 0||(A=r.ZP.useMessage)===null||A===void 0?void 0:A.call(r.ZP),W=R()(Q,2),_=W[0],h=W[1],I=[].concat(M()(P.P===null||P.P===void 0?void 0:(0,P.P)(H)),[{title:(0,i.jsx)(T.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(l,n){var Z;return[(0,i.jsx)(d,{trigger:(0,i.jsx)(p.ZP,{type:"primary",disabled:(n==null?void 0:n.name)==="\u7CFB\u7EDF\u7BA1\u7406\u5458",children:"\u7F16 \u8F91"}),id:n==null?void 0:n.id,onOk:m==null||(Z=m.current)===null||Z===void 0?void 0:Z.reload},n.id),(0,i.jsx)(p.ZP,{danger:!0,onClick:function(){s(K)},disabled:(n==null?void 0:n.name)==="\u7CFB\u7EDF\u7BA1\u7406\u5458",children:"\u5220 \u9664"})]}}]),s=function(){var j=t()(g()().mark(function l(n){var Z;return g()().wrap(function(X){for(;;)switch(X.prev=X.next){case 0:a.Z===null||a.Z===void 0||(Z=a.Z.confirm)===null||Z===void 0||Z.call(a.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(n==null?void 0:n.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){t()(g()().mark(function se(){var q,b,ee,N,re,ne;return g()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,o.IV===null||o.IV===void 0?void 0:(0,o.IV)(n==null||(q=n.map)===null||q===void 0?void 0:q.call(n,function(ae){return ae==null?void 0:ae.id}));case 2:if(b=B.sent,(b==null?void 0:b.code)===0){B.next=7;break}return B.abrupt("return",_==null||(ee=_.error)===null||ee===void 0?void 0:ee.call(_,(b==null?void 0:b.message)||"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5"));case 7:L==null||L([]),m==null||(N=m.current)===null||N===void 0||(re=N.reload)===null||re===void 0||re.call(N),_==null||(ne=_.success)===null||ne===void 0||ne.call(_,(b==null?void 0:b.message)||"\u5220\u9664\u64CD\u4F5C\u6210\u529F");case 10:case"end":return B.stop()}},se)}))()}});case 1:case"end":return X.stop()}},l)}));return function(n){return j.apply(this,arguments)}}(),O=function(){var l;$==null||$(P.V===null||P.V===void 0?void 0:(0,P.V)()),m==null||(l=m.current)===null||l===void 0||l.reload()};return v.useEffect===null||v.useEffect===void 0||(0,v.useEffect)(function(){$==null||$(P.V===null||P.V===void 0?void 0:(0,P.V)())},[]),(0,i.jsxs)(f._z,{children:[h,(0,i.jsx)(c.Z,{headerTitle:F==null?void 0:F.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:m,rowKey:"id",toolBarRender:function(){return[(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(d,{trigger:(0,i.jsx)(p.ZP,{type:"primary",children:"\u65B0 \u5EFA"}),id:k,onOk:O})})]},request:o.Md,columns:I,rowSelection:{onChange:function(l,n){L(n)}}})]})}},51876:function(ue,V,e){e.d(V,{FO:function(){return U},IV:function(){return o},Md:function(){return R},Vx:function(){return E},ah:function(){return H}});var w=e(97857),g=e.n(w),x=e(15009),t=e.n(x),G=e(99289),M=e.n(G),u=e(12578);function R(d,f,c){return S.apply(this,arguments)}function S(){return S=M()(t()().mark(function d(f,c,p){var a;return t()().wrap(function(T){for(;;)switch(T.prev=T.next){case 0:return a="/staff/web/userCenter/auth/role/page.json",T.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(a,{method:"GET",params:{params:f,sort:c,filter:p}}));case 2:case"end":return T.stop()}},d)})),S.apply(this,arguments)}function E(d){return y.apply(this,arguments)}function y(){return y=M()(t()().mark(function d(f){var c;return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c="/staff/web/userCenter/auth/role/update.json",a.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(c,{method:"POST",data:f}));case 2:case"end":return a.stop()}},d)})),y.apply(this,arguments)}function U(d){return r.apply(this,arguments)}function r(){return r=M()(t()().mark(function d(f){var c;return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c="/staff/web/userCenter/auth/role/getById.json",a.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(c,{method:"GET",params:{id:f}}));case 2:case"end":return a.stop()}},d)})),r.apply(this,arguments)}function o(d){return v.apply(this,arguments)}function v(){return v=M()(t()().mark(function d(f){var c;return t()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return c="/staff/web/userCenter/auth/role/del.json",a.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(c,{method:"POST",data:g()({},f)}));case 2:case"end":return a.stop()}},d)})),v.apply(this,arguments)}function H(){return i.apply(this,arguments)}function i(){return i=M()(t()().mark(function d(){var f;return t()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return f="/staff/web/userCenter/auth/role/page.json",p.abrupt("return",u.request===null||u.request===void 0?void 0:(0,u.request)(f,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return p.stop()}},d)})),i.apply(this,arguments)}},19515:function(ue,V,e){e.d(V,{P:function(){return R},V:function(){return u}});var w=e(64599),g=e.n(w),x=e(19632),t=e.n(x),G=e(27484),M=e.n(G);function u(){var S=M()().format("YYYYMMDDHHmmssSSS").toString();return S}function R(){var S=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=t()(S),y=g()(E),U;try{for(y.s();!(U=y.n()).done;){var r=U.value;!(r!=null&&r.valueType)||(r==null?void 0:r.valueType)!=="group"||!(r!=null&&r.columns)||!(r!=null&&r.columns.length)||E.push.apply(E,t()(r==null?void 0:r.columns))}}catch(o){y.e(o)}finally{y.f()}return E.filter(function(o){return o.valueType!=="group"})}}}]);
