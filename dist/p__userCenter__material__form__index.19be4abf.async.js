(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[782],{60463:function(){var se=[{valueType:"group",columns:[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialName",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m"},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C"}]},width:"m"}]},{valueType:"group",columns:[{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m"},{title:"\u5931\u6548\u671F",dataIndex:"exp",sorter:!0,valueType:"date",tooltip:"\u65E5\u671F",formItemProps:{rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u5931\u6548\u671F"}]},width:"m",hideInSearch:!0,readonly:!0}]}]},62995:function(se,Z,r){"use strict";r.r(Z),r.d(Z,{default:function(){return V}});var L=r(19632),W=r.n(L),x=r(5574),i=r.n(x),H=r(97857),h=r.n(H),s=r(15009),g=r.n(s),j=r(99289),E=r.n(j),c=r(12578);function G(p,f,v){return o.apply(this,arguments)}function o(){return o=E()(g()().mark(function p(f,v,y){var u;return g()().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:return u="/staff/web/userCenter/material/form/page.json",C.abrupt("return",c.request===null||c.request===void 0?void 0:(0,c.request)(u,{method:"GET",params:{params:f,sort:v,filter:y}}));case 2:case"end":return C.stop()}},p)})),o.apply(this,arguments)}function k(p){return D.apply(this,arguments)}function D(){return D=_asyncToGenerator(_regeneratorRuntime().mark(function p(f){var v;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return v="/staff/web/userCenter/material/form/update.json",u.abrupt("return",request==null?void 0:request(v,{method:"POST",data:f}));case 2:case"end":return u.stop()}},p)})),D.apply(this,arguments)}function _e(p){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime().mark(function p(f){var v;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return v="/staff/web/userCenter/material/form/getById.json",u.abrupt("return",request==null?void 0:request(v,{method:"GET",params:{id:f}}));case 2:case"end":return u.stop()}},p)})),q.apply(this,arguments)}function ce(p){return B.apply(this,arguments)}function B(){return B=_asyncToGenerator(_regeneratorRuntime().mark(function p(f){var v;return _regeneratorRuntime().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return v="/staff/web/userCenter/material/form/del.json",u.abrupt("return",request==null?void 0:request(v,{method:"POST",data:_objectSpread({},f)}));case 2:case"end":return u.stop()}},p)})),B.apply(this,arguments)}function pe(){return F.apply(this,arguments)}function F(){return F=_asyncToGenerator(_regeneratorRuntime().mark(function p(){var f;return _regeneratorRuntime().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return f="/staff/web/userCenter/material/form/page.json",y.abrupt("return",request==null?void 0:request(f,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return y.stop()}},p)})),F.apply(this,arguments)}var me=r(97131),K=r(30077),_=r(67294),U=r(60463),P=r(19515),Y=r(37476),a=r(26855),t=r(2453),n=r(28248),d=r(6493),e=r(85893),z=function(p){var f,v,y,u=(f=_.useRef)===null||f===void 0?void 0:f(),I=(v=_.useRef)===null||v===void 0?void 0:v(),C=_.useState===null||_.useState===void 0?void 0:(0,_.useState)([]),N=i()(C,2),he=N[0],J=N[1],Q=t.ZP===null||t.ZP===void 0||(y=t.ZP.useMessage)===null||y===void 0?void 0:y.call(t.ZP),X=i()(Q,2),T=X[0],ee=X[1],M=c.useRequest===null||c.useRequest===void 0?void 0:(0,c.useRequest)(d.IV,{manual:!0,onSuccess:function(){var l,m,b;J==null||J([]),I==null||(l=I.current)===null||l===void 0||(m=l.reload)===null||m===void 0||m.call(l),T==null||(b=T.success)===null||b===void 0||b.call(T,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var l;T==null||(l=T.error)===null||l===void 0||l.call(T,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),S=M.run,re=M._,ge=function(){var w=E()(g()().mark(function l(){var m,b,O,$,ne;return g()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:if(!te){R.next=7;break}return R.next=3,d.FO===null||d.FO===void 0?void 0:(0,d.FO)(te);case 3:if(O=R.sent,!(O!=null&&O.data)){R.next=6;break}return R.abrupt("return",u==null||($=u.current)===null||$===void 0||(ne=$.setFieldsValue)===null||ne===void 0?void 0:ne.call($,h()({},O==null?void 0:O.data)));case 6:return R.abrupt("return",u==null||(m=u.current)===null||m===void 0||(b=m.setFieldsValue)===null||b===void 0?void 0:b.call(m,{id:te}));case 7:case"end":return R.stop()}},l)}));return function(){return w.apply(this,arguments)}}(),ye={id:"",title:""},te=p.id,Oe=p.trigger,le=p.onOk,ve=c.useRequest===null||c.useRequest===void 0?void 0:(0,c.useRequest)(d.Vx,{manual:!0,onSuccess:function(){var l;t.ZP===null||t.ZP===void 0||(l=t.ZP.success)===null||l===void 0||l.call(t.ZP,"\u63D0\u4EA4\u6210\u529F"),le==null||le()},onError:function(){var l;t.ZP===null||t.ZP===void 0||(l=t.ZP.error)===null||l===void 0||l.call(t.ZP,"\u63D0\u4EA4\u5931\u8D25, \u8BF7\u91CD\u8BD5!")}}),ie=ve.run,Ee=ve.loading,Ie=function(){var w=E()(g()().mark(function l(m){return g()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return m=h()(h()({},m),{},{id:te}),ie==null||ie(m),O.abrupt("return",!0);case 3:case"end":return O.stop()}},l)}));return function(m){return w.apply(this,arguments)}}(),Pe=(0,_.useCallback)(function(){var w=E()(g()().mark(function l(m){var b;return g()().wrap(function($){for(;;)switch($.prev=$.next){case 0:n.Z===null||n.Z===void 0||(b=n.Z.confirm)===null||b===void 0||b.call(n.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(m==null?void 0:m.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var ue;(ue=function(){var R=E()(g()().mark(function fe(){var oe;return g()().wrap(function(ae){for(;;)switch(ae.prev=ae.next){case 0:return ae.next=2,S==null?void 0:S(m==null||(oe=m.map)===null||oe===void 0?void 0:oe.call(m,function(de){return de==null?void 0:de.id}));case 2:case"end":return ae.stop()}},fe)}));return function(){return R.apply(this,arguments)}}())===null||ue===void 0||ue()}});case 1:case"end":return $.stop()}},l)}));return function(l){return w.apply(this,arguments)}}(),[S]),be=[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialId",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m",hideInSearch:!0},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C"}]},width:"m",hideInSearch:!0},{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m",hideInSearch:!0}];return(0,e.jsx)(e.Fragment,{children:(0,e.jsxs)(Y.Y,{formRef:u,onFinish:Ie,modalProps:{destroyOnClose:!0,okButtonProps:{loading:Ee}},onOpenChange:ge,initialValues:ye,title:"\u7F16\u8F91\u4FE1\u606F",trigger:Oe,children:[(0,e.jsx)(a.Z,{layoutType:"Embed",columns:U.formItems}),(0,e.jsx)(K.Z,{headerTitle:"\u660E\u7EC6\u8868\u683C",rowKey:"id",search:!1,toolBarRender:function(){return[(0,e.jsx)(e.Fragment,{children:" "})]},columns:be,request:d.Md})]})})},A=r(14726),V=function(){var p,f=(0,_.useState)(""),v=i()(f,2),y=v[0],u=v[1],I=(p=_.useRef)===null||p===void 0?void 0:p(),C=_.useState===null||_.useState===void 0?void 0:(0,_.useState)([]),N=i()(C,2),he=N[0],J=N[1],Q=c.useIntl===null||c.useIntl===void 0?void 0:(0,c.useIntl)(),X=[].concat(W()(P.P===null||P.P===void 0?void 0:(0,P.P)(U.formItems)),[{title:(0,e.jsx)(c.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(M,S){var re;return[(0,e.jsx)(e.Fragment,{children:(0,e.jsx)(z,{trigger:(0,e.jsx)(A.ZP,{type:"primary",children:"\u8BE6 \u60C5"}),id:S==null?void 0:S.id,onOk:I==null||(re=I.current)===null||re===void 0?void 0:re.reload},S.id)})]}}]),T=function(){var M;u==null||u(P.V===null||P.V===void 0?void 0:(0,P.V)()),I==null||(M=I.current)===null||M===void 0||M.reload()};return _.useEffect===null||_.useEffect===void 0||(0,_.useEffect)(function(){u==null||u(P.V===null||P.V===void 0?void 0:(0,P.V)())},[]),(0,e.jsx)(me._z,{children:(0,e.jsx)(K.Z,{headerTitle:Q==null?void 0:Q.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:I,rowKey:"id",toolBarRender:function(){return[]},request:G,columns:X,rowSelection:{onChange:function(M,S){J(S)}}})})}},6493:function(se,Z,r){"use strict";r.d(Z,{$G:function(){return pe},FO:function(){return G},IV:function(){return k},Md:function(){return g},Ps:function(){return _},Vx:function(){return E},ZI:function(){return ce},k9:function(){return P}});var L=r(97857),W=r.n(L),x=r(15009),i=r.n(x),H=r(99289),h=r.n(H),s=r(12578);function g(a,t,n){return j.apply(this,arguments)}function j(){return j=h()(i()().mark(function a(t,n,d){var e;return i()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return e="/staff/web/userCenter/purchaseOrder/purchaseOrder/page.json",A.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(e,{method:"GET",params:{params:t,sort:n,filter:d}}));case 2:case"end":return A.stop()}},a)})),j.apply(this,arguments)}function E(a){return c.apply(this,arguments)}function c(){return c=h()(i()().mark(function a(t){var n;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/update.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(n,{method:"POST",data:t}));case 2:case"end":return e.stop()}},a)})),c.apply(this,arguments)}function G(a){return o.apply(this,arguments)}function o(){return o=h()(i()().mark(function a(t){var n;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/getById.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(n,{method:"GET",params:{id:t}}));case 2:case"end":return e.stop()}},a)})),o.apply(this,arguments)}function k(a){return D.apply(this,arguments)}function D(){return D=h()(i()().mark(function a(t){var n;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/del.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(n,{method:"POST",data:W()({},t)}));case 2:case"end":return e.stop()}},a)})),D.apply(this,arguments)}function _e(){return q.apply(this,arguments)}function q(){return q=_asyncToGenerator(_regeneratorRuntime().mark(function a(){var t;return _regeneratorRuntime().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return t="/staff/web/userCenter/purchaseOrder/purchaseOrder/page.json",d.abrupt("return",request==null?void 0:request(t,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return d.stop()}},a)})),q.apply(this,arguments)}function ce(a,t,n,d){return B.apply(this,arguments)}function B(){return B=h()(i()().mark(function a(t,n,d,e){var z;return i()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return z="/staff/web/userCenter/purchaseOrder/purchaseOrderItem/page.json?orderId="+t,V.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(z,{method:"GET",params:{params:n,sort:d,filter:e}}));case 2:case"end":return V.stop()}},a)})),B.apply(this,arguments)}function pe(a){return F.apply(this,arguments)}function F(){return F=h()(i()().mark(function a(t){var n;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/updateItem.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(n,{method:"POST",data:t}));case 2:case"end":return e.stop()}},a)})),F.apply(this,arguments)}function me(a){return K.apply(this,arguments)}function K(){return K=_asyncToGenerator(_regeneratorRuntime().mark(function a(t){var n;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/del.json",e.abrupt("return",request==null?void 0:request(n,{method:"POST",data:_objectSpread({},t)}));case 2:case"end":return e.stop()}},a)})),K.apply(this,arguments)}function _(a){return U.apply(this,arguments)}function U(){return U=h()(i()().mark(function a(t){var n;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/purchaseOrder/purchaseOrder/submit.json?id="+t,e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(n,{method:"POST"}));case 2:case"end":return e.stop()}},a)})),U.apply(this,arguments)}function P(a){return Y.apply(this,arguments)}function Y(){return Y=h()(i()().mark(function a(t){var n;return i()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n="/staff/web/userCenter/inventory/inbill/purchaseInstock.json",e.abrupt("return",s.request===null||s.request===void 0?void 0:(0,s.request)(n,{method:"POST",data:t}));case 2:case"end":return e.stop()}},a)})),Y.apply(this,arguments)}},19515:function(se,Z,r){"use strict";r.d(Z,{P:function(){return g},V:function(){return s}});var L=r(64599),W=r.n(L),x=r(19632),i=r.n(x),H=r(27484),h=r.n(H);function s(){var j=h()().format("YYYYMMDDHHmmssSSS").toString();return j}function g(){var j=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],E=i()(j),c=W()(E),G;try{for(c.s();!(G=c.n()).done;){var o=G.value;!(o!=null&&o.valueType)||(o==null?void 0:o.valueType)!=="group"||!(o!=null&&o.columns)||!(o!=null&&o.columns.length)||E.push.apply(E,i()(o==null?void 0:o.columns))}}catch(k){c.e(k)}finally{c.f()}return E.filter(function(k){return k.valueType!=="group"})}}}]);
