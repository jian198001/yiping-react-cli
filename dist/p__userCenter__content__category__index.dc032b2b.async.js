"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[58],{92532:function(ne,I,e){e.r(I),e.d(I,{default:function(){return ie}});var w=e(15009),s=e.n(w),U=e(99289),p=e.n(U),K=e(19632),G=e.n(K),L=e(5574),R=e.n(L),_=e(97857),j=e.n(_),T=e(37476),F=e(26855),a=e(2453),r=e(12578);function ae(t,l,d){return W.apply(this,arguments)}function W(){return W=p()(s()().mark(function t(l,d,v){var n;return s()().wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return n="/staff/web/userCenter/content/category/page.json",i.abrupt("return",r.request===null||r.request===void 0?void 0:(0,r.request)(n,{method:"GET",params:{params:l,sort:d,filter:v}}));case 2:case"end":return i.stop()}},t)})),W.apply(this,arguments)}function te(t){return k.apply(this,arguments)}function k(){return k=p()(s()().mark(function t(l){var d;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return d="/staff/web/userCenter/content/category/update.json",n.abrupt("return",r.request===null||r.request===void 0?void 0:(0,r.request)(d,{method:"POST",data:l}));case 2:case"end":return n.stop()}},t)})),k.apply(this,arguments)}function ue(t){return H.apply(this,arguments)}function H(){return H=p()(s()().mark(function t(l){var d;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return d="/staff/web/userCenter/content/category/getById.json",n.abrupt("return",r.request===null||r.request===void 0?void 0:(0,r.request)(d,{method:"GET",params:{id:l}}));case 2:case"end":return n.stop()}},t)})),H.apply(this,arguments)}function le(t){return Y.apply(this,arguments)}function Y(){return Y=p()(s()().mark(function t(l){var d;return s()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return d="/staff/web/userCenter/content/category/del.json",n.abrupt("return",r.request===null||r.request===void 0?void 0:(0,r.request)(d,{method:"POST",data:j()({},l)}));case 2:case"end":return n.stop()}},t)})),Y.apply(this,arguments)}function pe(){return x.apply(this,arguments)}function x(){return x=_asyncToGenerator(_regeneratorRuntime().mark(function t(){var l;return _regeneratorRuntime().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return l="/staff/web/userCenter/content/category/page.json",v.abrupt("return",request==null?void 0:request(l,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return v.stop()}},t)})),x.apply(this,arguments)}var h=e(67294),Q=[{valueType:"group",columns:[{title:"\u6807 \u9898",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]},width:"m"}]}],f=e(85893),X=function(t){var l=(0,h.useRef)(),d=function(){var O=p()(s()().mark(function S(){var P;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:if(!n){c.next=7;break}return c.next=3,ue(n);case 3:if(P=c.sent,!P.data){c.next=6;break}return c.abrupt("return",l.current.setFieldsValue(j()({},P.data)));case 6:return c.abrupt("return",l.current.setFieldsValue({id:n}));case 7:case"end":return c.stop()}},S)}));return function(){return O.apply(this,arguments)}}(),v={id:"",title:""},n=t.id,E=t.trigger,i=t.onOk,D=(0,r.useRequest)(te,{manual:!0,onSuccess:function(){a.ZP.success("\u63D0\u4EA4\u6210\u529F"),i()},onError:function(){a.ZP.error("\u63D0\u4EA4\u5931\u8D25, \u8BF7\u91CD\u8BD5!")}}),Z=D.run,b=D.loading,M=function(){var O=p()(s()().mark(function S(P){return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return Z(P),c.abrupt("return",!0);case 2:case"end":return c.stop()}},S)}));return function(P){return O.apply(this,arguments)}}();return(0,f.jsx)(T.Y,{formRef:l,onFinish:M,modalProps:{destroyOnClose:!0,okButtonProps:{loading:b}},onOpenChange:d,initialValues:v,title:"\u7F16\u8F91\u4FE1\u606F",trigger:E,children:(0,f.jsx)(F.Z,{layoutType:"Embed",columns:Q})})},se=e(97131),oe=e(30077),A=e(28248),q=e(14726),y=e(19515),ie=function(){var t,l,d=(0,h.useState)(""),v=R()(d,2),n=v[0],E=v[1],i=(t=h.useRef)===null||t===void 0?void 0:t(),D=h.useState===null||h.useState===void 0?void 0:(0,h.useState)([]),Z=R()(D,2),b=Z[0],M=Z[1],O=r.useIntl===null||r.useIntl===void 0?void 0:(0,r.useIntl)(),S=a.ZP===null||a.ZP===void 0||(l=a.ZP.useMessage)===null||l===void 0?void 0:l.call(a.ZP),P=R()(S,2),m=P[0],c=P[1],ee=r.useRequest===null||r.useRequest===void 0?void 0:(0,r.useRequest)(le,{manual:!0,onSuccess:function(){var o,u,g;M==null||M([]),i==null||(o=i.current)===null||o===void 0||(u=o.reload)===null||u===void 0||u.call(o),m==null||(g=m.success)===null||g===void 0||g.call(m,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var o;m==null||(o=m.error)===null||o===void 0||o.call(m,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),B=ee.run,me=ee.loading,de=[].concat(G()(y.P===null||y.P===void 0?void 0:(0,y.P)(Q)),[{title:(0,f.jsx)(r.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(o,u){var g;return[(0,f.jsx)(X,{trigger:(0,f.jsx)("a",{children:"\u7F16 \u8F91"}),id:u==null?void 0:u.id,onOk:i==null||(g=i.current)===null||g===void 0?void 0:g.reload})]}}]),ce=(0,h.useCallback)(function(){var C=p()(s()().mark(function o(u){var g;return s()().wrap(function($){for(;;)switch($.prev=$.next){case 0:if(u!=null&&u.length){$.next=3;break}return m.warning("\u8BF7\u9009\u62E9\u5220\u9664\u9879"),$.abrupt("return");case 3:A.Z===null||A.Z===void 0||(g=A.Z.confirm)===null||g===void 0||g.call(A.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(u==null?void 0:u.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var z;(z=function(){var fe=p()(s()().mark(function re(){var N;return s()().wrap(function(V){for(;;)switch(V.prev=V.next){case 0:return V.next=2,B==null?void 0:B(u==null||(N=u.map)===null||N===void 0?void 0:N.call(u,function(J){return J==null?void 0:J.id}));case 2:case"end":return V.stop()}},re)}));return function(){return fe.apply(this,arguments)}}())===null||z===void 0||z()}});case 4:case"end":return $.stop()}},o)}));return function(o){return C.apply(this,arguments)}}(),[B]),ve=function(){var o;E==null||E(y.V===null||y.V===void 0?void 0:(0,y.V)()),i==null||(o=i.current)===null||o===void 0||o.reload()};return h.useEffect===null||h.useEffect===void 0||(0,h.useEffect)(function(){E==null||E(y.V===null||y.V===void 0?void 0:(0,y.V)())},[]),(0,f.jsxs)(se._z,{children:[c,(0,f.jsx)(oe.Z,{headerTitle:O==null?void 0:O.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:i,rowKey:"id",toolBarRender:function(){return[(0,f.jsxs)(f.Fragment,{children:[" ",(0,f.jsx)(q.ZP,{danger:!0,disabled:!b||!b.length,onClick:function(){ce(b)},children:"\u5220 \u9664"}),(0,f.jsx)(X,{trigger:(0,f.jsx)(q.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:n,onOk:ve})]})]},request:ae,columns:de,rowSelection:{onChange:function(o,u){M(u)}}})]})}},19515:function(ne,I,e){e.d(I,{P:function(){return R},V:function(){return L}});var w=e(64599),s=e.n(w),U=e(19632),p=e.n(U),K=e(27484),G=e.n(K);function L(){var _=G()().format("YYYYMMDDHHmmssSSS").toString();return _}function R(){var _=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],j=p()(_),T=s()(j),F;try{for(T.s();!(F=T.n()).done;){var a=F.value;!(a!=null&&a.valueType)||(a==null?void 0:a.valueType)!=="group"||!(a!=null&&a.columns)||!(a!=null&&a.columns.length)||j.push.apply(j,p()(a==null?void 0:a.columns))}}catch(r){T.e(r)}finally{T.f()}return j.filter(function(r){return r.valueType!=="group"})}}}]);
