"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[170],{8795:function(ue,B,e){e.r(B),e.d(B,{default:function(){return te}});var w=e(15009),h=e.n(w),x=e(99289),l=e.n(x),G=e(19632),S=e.n(G),t=e(5574),I=e.n(t),R=e(97857),j=e.n(R),b=e(37476),V=e(26855),n=e(2453),c=e(51876),v=e(67294),Y=[{valueType:"group",columns:[{title:"\u540D \u79F0",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]},width:"md"},{title:"\u6743 \u9650",dataIndex:"permission",sorter:!0,valueType:"select",width:"md",formItemProps:{mode:"multiple"}}]}],i=e(85893),d=function(D){var A,C=(A=v.useRef)===null||A===void 0?void 0:A(),k=(0,v.useState)(!1),z=I()(k,2),$=z[0],f=z[1],Q=function(){var L=l()(h()().mark(function p(){var E,M,a,T,W;return h()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!U){P.next=7;break}return P.next=3,c.FO===null||c.FO===void 0?void 0:(0,c.FO)(U);case 3:if(a=P.sent,!(a!=null&&a.data)){P.next=6;break}return P.abrupt("return",C==null||(T=C.current)===null||T===void 0||(W=T.setFieldsValue)===null||W===void 0?void 0:W.call(T,j()({},a==null?void 0:a.data)));case 6:return P.abrupt("return",C==null||(E=C.current)===null||E===void 0||(M=E.setFieldsValue)===null||M===void 0?void 0:M.call(E,{id:U}));case 7:case"end":return P.stop()}},p)}));return function(){return L.apply(this,arguments)}}(),N={id:"",title:""},U=D.id,K=D.trigger,F=D.onOk,X=function(){var L=l()(h()().mark(function p(E){var M,a,T;return h()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return f(!0),E=j()(j()({},E),{},{id:U}),y.next=4,c.Vx===null||c.Vx===void 0?void 0:(0,c.Vx)(E);case 4:if(a=y.sent,(a==null?void 0:a.code)===0){y.next=9;break}return n.ZP===null||n.ZP===void 0||(T=n.ZP.error)===null||T===void 0||T.call(n.ZP,a==null?void 0:a.message),f(!1),y.abrupt("return",!1);case 9:return n.ZP===null||n.ZP===void 0||(M=n.ZP.success)===null||M===void 0||M.call(n.ZP,"\u63D0\u4EA4\u6210\u529F"),F==null||F(),f(!1),y.abrupt("return",!0);case 13:case"end":return y.stop()}},p)}));return function(E){return L.apply(this,arguments)}}();return(0,i.jsx)(b.Y,{formRef:C,onFinish:X,modalProps:{destroyOnClose:!0,okButtonProps:{loading:$}},onOpenChange:Q,initialValues:N,title:"\u7F16\u8F91\u4FE1\u606F",trigger:K,children:(0,i.jsx)(V.Z,{layoutType:"Embed",columns:Y})})},g=e(97131),_=e(30077),s=e(12578),u=e(14726),H=e(28248),m=e(19515),te=function(){var D,A,C=(0,v.useState)(""),k=I()(C,2),z=k[0],$=k[1],f=(D=v.useRef)===null||D===void 0?void 0:D(),Q=v.useState===null||v.useState===void 0?void 0:(0,v.useState)([]),N=I()(Q,2),U=N[0],K=N[1],F=s.useIntl===null||s.useIntl===void 0?void 0:(0,s.useIntl)(),X=n.ZP===null||n.ZP===void 0||(A=n.ZP.useMessage)===null||A===void 0?void 0:A.call(n.ZP),L=I()(X,2),p=L[0],E=L[1],M=s.useRequest===null||s.useRequest===void 0?void 0:(0,s.useRequest)(c.IV,{manual:!0,onSuccess:function(){var o,r,O;K==null||K([]),f==null||(o=f.current)===null||o===void 0||(r=o.reload)===null||r===void 0||r.call(o),p==null||(O=p.success)===null||O===void 0||O.call(p,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var o;p==null||(o=p.error)===null||o===void 0||o.call(p,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),a=M.run,T=M.loading,W=[].concat(S()(m.P===null||m.P===void 0?void 0:(0,m.P)(Y)),[{title:(0,i.jsx)(s.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(o,r){var O;return[(0,i.jsx)(d,{trigger:(0,i.jsx)(u.ZP,{type:"primary",disabled:(r==null?void 0:r.name)==="\u7CFB\u7EDF\u7BA1\u7406\u5458",children:"\u7F16 \u8F91"}),id:r==null?void 0:r.id,onOk:f==null||(O=f.current)===null||O===void 0?void 0:O.reload},r.id),(0,i.jsx)(u.ZP,{danger:!0,onClick:function(){y(U)},disabled:(r==null?void 0:r.name)==="\u7CFB\u7EDF\u7BA1\u7406\u5458",children:"\u5220 \u9664"})]}}]),y=(0,v.useCallback)(function(){var Z=l()(h()().mark(function o(r){var O;return h()().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:H.Z===null||H.Z===void 0||(O=H.Z.confirm)===null||O===void 0||O.call(H.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(r==null?void 0:r.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var ee;(ee=function(){var se=l()(h()().mark(function ae(){var ne;return h()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return J.next=2,a==null?void 0:a(r==null||(ne=r.map)===null||ne===void 0?void 0:ne.call(r,function(re){return re==null?void 0:re.id}));case 2:case"end":return J.stop()}},ae)}));return function(){return se.apply(this,arguments)}}())===null||ee===void 0||ee()}});case 1:case"end":return q.stop()}},o)}));return function(o){return Z.apply(this,arguments)}}(),[a]),P=function(){var o;$==null||$(m.V===null||m.V===void 0?void 0:(0,m.V)()),f==null||(o=f.current)===null||o===void 0||o.reload()};return v.useEffect===null||v.useEffect===void 0||(0,v.useEffect)(function(){$==null||$(m.V===null||m.V===void 0?void 0:(0,m.V)())},[]),(0,i.jsxs)(g._z,{children:[E,(0,i.jsx)(_.Z,{headerTitle:F==null?void 0:F.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:f,rowKey:"id",toolBarRender:function(){return[(0,i.jsx)(i.Fragment,{children:(0,i.jsx)(d,{trigger:(0,i.jsx)(u.ZP,{type:"primary",children:"\u65B0 \u5EFA"}),id:z,onOk:P})})]},request:c.Md,columns:W,rowSelection:{onChange:function(o,r){K(r)}}})]})}},51876:function(ue,B,e){e.d(B,{FO:function(){return V},IV:function(){return c},Md:function(){return I},Vx:function(){return j},ah:function(){return Y}});var w=e(97857),h=e.n(w),x=e(15009),l=e.n(x),G=e(99289),S=e.n(G),t=e(12578);function I(d,g,_){return R.apply(this,arguments)}function R(){return R=S()(l()().mark(function d(g,_,s){var u;return l()().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return u="/staff/web/userCenter/auth/role/page.json",m.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(u,{method:"GET",params:{params:g,sort:_,filter:s}}));case 2:case"end":return m.stop()}},d)})),R.apply(this,arguments)}function j(d){return b.apply(this,arguments)}function b(){return b=S()(l()().mark(function d(g){var _;return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return _="/staff/web/userCenter/auth/role/update.json",u.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(_,{method:"POST",data:g}));case 2:case"end":return u.stop()}},d)})),b.apply(this,arguments)}function V(d){return n.apply(this,arguments)}function n(){return n=S()(l()().mark(function d(g){var _;return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return _="/staff/web/userCenter/auth/role/getById.json",u.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(_,{method:"GET",params:{id:g}}));case 2:case"end":return u.stop()}},d)})),n.apply(this,arguments)}function c(d){return v.apply(this,arguments)}function v(){return v=S()(l()().mark(function d(g){var _;return l()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return _="/staff/web/userCenter/auth/role/del.json",u.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(_,{method:"POST",data:h()({},g)}));case 2:case"end":return u.stop()}},d)})),v.apply(this,arguments)}function Y(){return i.apply(this,arguments)}function i(){return i=S()(l()().mark(function d(){var g;return l()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return g="/staff/web/userCenter/auth/role/page.json",s.abrupt("return",t.request===null||t.request===void 0?void 0:(0,t.request)(g,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return s.stop()}},d)})),i.apply(this,arguments)}},19515:function(ue,B,e){e.d(B,{P:function(){return I},V:function(){return t}});var w=e(64599),h=e.n(w),x=e(19632),l=e.n(x),G=e(27484),S=e.n(G);function t(){var R=S()().format("YYYYMMDDHHmmssSSS").toString();return R}function I(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],j=l()(R),b=h()(j),V;try{for(b.s();!(V=b.n()).done;){var n=V.value;!(n!=null&&n.valueType)||(n==null?void 0:n.valueType)!=="group"||!(n!=null&&n.columns)||!(n!=null&&n.columns.length)||j.push.apply(j,l()(n==null?void 0:n.columns))}}catch(c){b.e(c)}finally{b.f()}return j.filter(function(c){return c.valueType!=="group"})}}}]);
