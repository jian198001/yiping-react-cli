"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[648],{35250:function(oe,D,e){e.r(D),e.d(D,{default:function(){return fe}});var K=e(15009),i=e.n(K),L=e(99289),m=e.n(L),x=e(19632),G=e.n(x),W=e(5574),I=e.n(W),A=e(97857),T=e.n(A),M=e(37476),B=e(26855),r=e(2453),n=e(12578);function ie(u,s,a){return k.apply(this,arguments)}function k(){return k=m()(i()().mark(function u(s,a,c){var t;return i()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return t="/staff/web/userCenter/content/article/page.json",o.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(t,{method:"GET",params:{params:s,sort:a,filter:c}}));case 2:case"end":return o.stop()}},u)})),k.apply(this,arguments)}function H(u){return Y.apply(this,arguments)}function Y(){return Y=m()(i()().mark(function u(s){var a;return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="/staff/web/userCenter/content/article/update.json",t.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"POST",data:s}));case 2:case"end":return t.stop()}},u)})),Y.apply(this,arguments)}function z(u){return N.apply(this,arguments)}function N(){return N=m()(i()().mark(function u(s){var a;return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="/staff/web/userCenter/content/article/getById.json",t.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"GET",params:{id:s}}));case 2:case"end":return t.stop()}},u)})),N.apply(this,arguments)}function de(u){return J.apply(this,arguments)}function J(){return J=m()(i()().mark(function u(s){var a;return i()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a="/staff/web/userCenter/content/article/del.json",t.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"POST",data:T()({},s)}));case 2:case"end":return t.stop()}},u)})),J.apply(this,arguments)}function me(){return Q.apply(this,arguments)}function Q(){return Q=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var s;return _regeneratorRuntime().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return s="/staff/web/userCenter/content/category/page.json",c.abrupt("return",request==null?void 0:request(s,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return c.stop()}},u)})),Q.apply(this,arguments)}var g=e(67294),te=[{valueType:"group",columns:[{title:"\u6807 \u9898",dataIndex:"name",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6807\u9898"}]},width:"lg"}]},{valueType:"group",columns:[{title:"\u680F \u76EE",dataIndex:"categoryId",sorter:!0,valueType:"select",width:"sm"}]},{valueType:"group",columns:[{title:"\u5185 \u5BB9",dataIndex:"content",sorter:!1,valueType:"textarea",hideInTable:!0,hideInSearch:!0,width:"lg"}]}],p=e(85893),ue=function(u){var s,a=(s=g.useRef)===null||s===void 0?void 0:s(),c=(0,g.useState)(!1),t=I()(c,2),_=t[0],o=t[1],X=function(){var Z=m()(i()().mark(function f(){var h,S,l,j,F;return i()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:if(!R){P.next=7;break}return P.next=3,z==null?void 0:z(R);case 3:if(l=P.sent,!(l!=null&&l.data)){P.next=6;break}return P.abrupt("return",a==null||(j=a.current)===null||j===void 0||(F=j.setFieldsValue)===null||F===void 0?void 0:F.call(j,T()({},l==null?void 0:l.data)));case 6:return P.abrupt("return",a==null||(h=a.current)===null||h===void 0||(S=h.setFieldsValue)===null||S===void 0?void 0:S.call(h,{id:R}));case 7:case"end":return P.stop()}},f)}));return function(){return Z.apply(this,arguments)}}(),V={id:"",title:""},R=u.id,b=u.trigger,$=u.onOk,q=function(){var Z=m()(i()().mark(function f(h){var S,l,j;return i()().wrap(function(y){for(;;)switch(y.prev=y.next){case 0:return o(!0),h=T()(T()({},h),{},{id:R}),y.next=4,H==null?void 0:H(h);case 4:if(l=y.sent,(l==null?void 0:l.code)===0){y.next=9;break}return r.ZP===null||r.ZP===void 0||(j=r.ZP.error)===null||j===void 0||j.call(r.ZP,l==null?void 0:l.message),o(!1),y.abrupt("return",!1);case 9:return r.ZP===null||r.ZP===void 0||(S=r.ZP.success)===null||S===void 0||S.call(r.ZP,"\u63D0\u4EA4\u6210\u529F"),$==null||$(),o(!1),y.abrupt("return",!0);case 13:case"end":return y.stop()}},f)}));return function(h){return Z.apply(this,arguments)}}();return(0,p.jsx)(M.Y,{formRef:a,onFinish:q,modalProps:{destroyOnClose:!0,okButtonProps:{loading:_}},onOpenChange:X,initialValues:V,title:"\u7F16\u8F91\u4FE1\u606F",trigger:b,children:(0,p.jsx)(B.Z,{layoutType:"Embed",columns:te})})},ve=e(97131),ce=e(30077),w=e(28248),le=e(14726),O=e(19515),fe=function(){var u,s,a=(0,g.useState)(""),c=I()(a,2),t=c[0],_=c[1],o=(u=g.useRef)===null||u===void 0?void 0:u(),X=g.useState===null||g.useState===void 0?void 0:(0,g.useState)([]),V=I()(X,2),R=V[0],b=V[1],$=n.useIntl===null||n.useIntl===void 0?void 0:(0,n.useIntl)(),q=r.ZP===null||r.ZP===void 0||(s=r.ZP.useMessage)===null||s===void 0?void 0:s.call(r.ZP),Z=I()(q,2),f=Z[0],h=Z[1],S=n.useRequest===null||n.useRequest===void 0?void 0:(0,n.useRequest)(de,{manual:!0,onSuccess:function(){var d,v,E;b==null||b([]),o==null||(d=o.current)===null||d===void 0||(v=d.reload)===null||v===void 0||v.call(d),f==null||(E=f.success)===null||E===void 0||E.call(f,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var d;f==null||(d=f.error)===null||d===void 0||d.call(f,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),l=S.run,j=S.loading,F=[].concat(G()(O.P===null||O.P===void 0?void 0:(0,O.P)(te)),[{title:(0,p.jsx)(n.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(d,v){var E;return[(0,p.jsx)(ue,{trigger:(0,p.jsx)("a",{children:"\u7F16 \u8F91"}),id:v==null?void 0:v.id,onOk:o==null||(E=o.current)===null||E===void 0?void 0:E.reload})]}}]),y=(0,g.useCallback)(function(){var C=m()(i()().mark(function d(v){var E;return i()().wrap(function(ee){for(;;)switch(ee.prev=ee.next){case 0:w.Z===null||w.Z===void 0||(E=w.Z.confirm)===null||E===void 0||E.call(w.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(v==null?void 0:v.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var re;(re=function(){var pe=m()(i()().mark(function se(){var ne;return i()().wrap(function(U){for(;;)switch(U.prev=U.next){case 0:return U.next=2,l==null?void 0:l(v==null||(ne=v.map)===null||ne===void 0?void 0:ne.call(v,function(ae){return ae==null?void 0:ae.id}));case 2:case"end":return U.stop()}},se)}));return function(){return pe.apply(this,arguments)}}())===null||re===void 0||re()}});case 1:case"end":return ee.stop()}},d)}));return function(d){return C.apply(this,arguments)}}(),[l]),P=function(){var d;_==null||_(O.V===null||O.V===void 0?void 0:(0,O.V)()),o==null||(d=o.current)===null||d===void 0||d.reload()};return g.useEffect===null||g.useEffect===void 0||(0,g.useEffect)(function(){_==null||_(O.V===null||O.V===void 0?void 0:(0,O.V)())},[]),(0,p.jsxs)(ve._z,{children:[h,(0,p.jsx)(ce.Z,{headerTitle:$==null?void 0:$.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:o,rowKey:"id",toolBarRender:function(){return[(0,p.jsxs)(p.Fragment,{children:[" ",(0,p.jsx)(le.ZP,{danger:!0,disabled:!R||!R.length,onClick:function(){y(R)},children:"\u5220 \u9664"}),(0,p.jsx)(ue,{trigger:(0,p.jsx)(le.ZP,{type:"primary",children:" \u65B0 \u5EFA "}),id:t,onOk:P})]})]},request:ie,columns:F,rowSelection:{onChange:function(d,v){b(v)}}})]})}},19515:function(oe,D,e){e.d(D,{P:function(){return I},V:function(){return W}});var K=e(64599),i=e.n(K),L=e(19632),m=e.n(L),x=e(27484),G=e.n(x);function W(){var A=G()().format("YYYYMMDDHHmmssSSS").toString();return A}function I(){var A=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=m()(A),M=i()(T),B;try{for(M.s();!(B=M.n()).done;){var r=B.value;!(r!=null&&r.valueType)||(r==null?void 0:r.valueType)!=="group"||!(r!=null&&r.columns)||!(r!=null&&r.columns.length)||T.push.apply(T,m()(r==null?void 0:r.columns))}}catch(n){M.e(n)}finally{M.f()}return T.filter(function(n){return n.valueType!=="group"})}}}]);
