"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[745],{97410:function(te,A,r){r.r(A),r.d(A,{default:function(){return x}});var U=r(19632),L=r.n(U),Z=r(5574),l=r.n(Z),G=r(68848),g=r(97131),n=r(30077),h=r(12578),o=r(67294),T=[{valueType:"group",columns:[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialName",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m"},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C"}]},width:"m"}]},{valueType:"group",columns:[{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m"},{title:"\u64CD\u4F5C\u65F6\u95F4",dataIndex:"logTime",sorter:!0,valueType:"datetime",formItemProps:{rules:[{required:!0,message:"\u8BF7\u9009\u62E9\u64CD\u4F5C\u65F6\u95F4"}]},width:"m"}]}],I=[{valueType:"group",columns:[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialName",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m",hideInSearch:!0,readonly:!0},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m",hideInSearch:!0,readonly:!0},{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m",hideInSearch:!0,readonly:!0},{title:"\u5F52\u8FD8\u6570\u91CF",dataIndex:"instockQuantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u5F52\u8FD8\u6570\u91CF"}]},width:"m",hideInSearch:!0}]}],y=r(19515),d=r(15009),E=r.n(d),M=r(97857),V=r.n(M),C=r(99289),q=r.n(C),D=r(37476),f=r(26855),s=r(2453),_=r(28248),m=r(6493),t=r(85893),W=function(u){var i,a,p,e=(i=o.useRef)===null||i===void 0?void 0:i(),b=(a=o.useRef)===null||a===void 0?void 0:a(),$=o.useState===null||o.useState===void 0?void 0:(0,o.useState)([]),R=l()($,2),oe=R[0],H=R[1],Y=s.ZP===null||s.ZP===void 0||(p=s.ZP.useMessage)===null||p===void 0?void 0:p.call(s.ZP),N=l()(Y,2),B=N[0],z=N[1],F=h.useRequest===null||h.useRequest===void 0?void 0:(0,h.useRequest)(m.IV,{manual:!0,onSuccess:function(){var c,v,P;H==null||H([]),b==null||(c=b.current)===null||c===void 0||(v=c.reload)===null||v===void 0||v.call(c),B==null||(P=B.success)===null||P===void 0||P.call(B,"\u5220\u9664\u64CD\u4F5C\u6210\u529F")},onError:function(){var c;B==null||(c=B.error)===null||c===void 0||c.call(B,"\u5220\u9664\u64CD\u4F5C\u5931\u8D25,\u8BF7\u91CD\u8BD5")}}),j=F.run,Q=F._,de=function(){var w=q()(E()().mark(function c(){var v,P,O,K,X;return E()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:if(!J){S.next=7;break}return S.next=3,m.FO===null||m.FO===void 0?void 0:(0,m.FO)(J);case 3:if(O=S.sent,!(O!=null&&O.data)){S.next=6;break}return S.abrupt("return",e==null||(K=e.current)===null||K===void 0||(X=K.setFieldsValue)===null||X===void 0?void 0:X.call(K,V()({},O==null?void 0:O.data)));case 6:return S.abrupt("return",e==null||(v=e.current)===null||v===void 0||(P=v.setFieldsValue)===null||P===void 0?void 0:P.call(v,{id:J}));case 7:case"end":return S.stop()}},c)}));return function(){return w.apply(this,arguments)}}(),ce={id:"",title:""},J=u.id,_e=u.trigger,ne=u.onOk,le=h.useRequest===null||h.useRequest===void 0?void 0:(0,h.useRequest)(m.Vx,{manual:!0,onSuccess:function(){var c;s.ZP===null||s.ZP===void 0||(c=s.ZP.success)===null||c===void 0||c.call(s.ZP,"\u63D0\u4EA4\u6210\u529F"),ne==null||ne()},onError:function(){var c;s.ZP===null||s.ZP===void 0||(c=s.ZP.error)===null||c===void 0||c.call(s.ZP,"\u63D0\u4EA4\u5931\u8D25, \u8BF7\u91CD\u8BD5!")}}),ue=le.run,me=le.loading,pe=function(){var w=q()(E()().mark(function c(v){return E()().wrap(function(O){for(;;)switch(O.prev=O.next){case 0:return v=V()(V()({},v),{},{id:J}),ue==null||ue(v),O.abrupt("return",!0);case 3:case"end":return O.stop()}},c)}));return function(v){return w.apply(this,arguments)}}(),fe=(0,o.useCallback)(function(){var w=q()(E()().mark(function c(v){var P;return E()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:_.Z===null||_.Z===void 0||(P=_.Z.confirm)===null||P===void 0||P.call(_.Z,{title:"\u64CD\u4F5C\u63D0\u793A",content:"\u662F\u5426\u786E\u5B9A\u5220\u9664\u8FD9"+(v==null?void 0:v.length)+"\u9879\u4FE1\u606F?\u5220\u9664\u540E\u5C06\u4E0D\u53EF\u6062\u590D",onOk:function(){var ee;(ee=function(){var S=q()(E()().mark(function ie(){var ae;return E()().wrap(function(re){for(;;)switch(re.prev=re.next){case 0:return re.next=2,j==null?void 0:j(v==null||(ae=v.map)===null||ae===void 0?void 0:ae.call(v,function(se){return se==null?void 0:se.id}));case 2:case"end":return re.stop()}},ie)}));return function(){return S.apply(this,arguments)}}())===null||ee===void 0||ee()}});case 1:case"end":return K.stop()}},c)}));return function(c){return w.apply(this,arguments)}}(),[j]),ve=[{title:"\u7269\u6599\u540D\u79F0",dataIndex:"materialId",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u7269\u6599\u540D\u79F0"}]},width:"m",hideInSearch:!0},{title:"\u89C4 \u683C",dataIndex:"materialSku",sorter:!0,formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u89C4\u683C"}]},width:"m",hideInSearch:!0},{title:"\u6570 \u91CF",dataIndex:"quantity",sorter:!0,valueType:"digit",tooltip:"\u6B63\u6570",formItemProps:{rules:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u91CF"}]},width:"m",hideInSearch:!0}];return(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)(D.Y,{formRef:e,onFinish:pe,modalProps:{destroyOnClose:!0,okButtonProps:{loading:me}},onOpenChange:de,initialValues:ce,title:"\u7F16\u8F91\u4FE1\u606F",trigger:_e,children:[(0,t.jsx)(f.Z,{layoutType:"Embed",columns:T}),(0,t.jsx)(n.Z,{headerTitle:"\u660E\u7EC6\u8868\u683C",rowKey:"id",search:!1,toolBarRender:function(){return[(0,t.jsx)(t.Fragment,{children:" "})]},columns:ve,request:m.Md})]})})},k=r(14726),x=function(){var u,i=(0,o.useState)(""),a=l()(i,2),p=a[0],e=a[1],b=(u=o.useRef)===null||u===void 0?void 0:u(),$=o.useState===null||o.useState===void 0?void 0:(0,o.useState)([]),R=l()($,2),oe=R[0],H=R[1],Y=h.useIntl===null||h.useIntl===void 0?void 0:(0,h.useIntl)(),N=[].concat(L()(y.P===null||y.P===void 0?void 0:(0,y.P)(T)),[{title:(0,t.jsx)(h.FormattedMessage,{id:"pages.searchTable.titleOption",defaultMessage:"Operating"}),dataIndex:"option",valueType:"option",render:function(F,j){var Q;return[(0,t.jsx)(t.Fragment,{children:(0,t.jsx)(W,{trigger:(0,t.jsx)(k.ZP,{type:"primary",children:"\u8BE6 \u60C5"}),id:j==null?void 0:j.id,onOk:b==null||(Q=b.current)===null||Q===void 0?void 0:Q.reload},j.id)})]}}]),B=function(){var F;e==null||e(y.V===null||y.V===void 0?void 0:(0,y.V)()),b==null||(F=b.current)===null||F===void 0||F.reload()};return o.useEffect===null||o.useEffect===void 0||(0,o.useEffect)(function(){e==null||e(y.V===null||y.V===void 0?void 0:(0,y.V)())},[]),(0,t.jsx)(g._z,{children:(0,t.jsx)(n.Z,{headerTitle:Y==null?void 0:Y.formatMessage({id:"pages.searchTable.title",defaultMessage:"\u67E5\u8BE2\u8868\u683C"}),actionRef:b,rowKey:"id",toolBarRender:function(){return[]},request:G.Md,columns:N,rowSelection:{onChange:function(F,j){H(j)}}})})}},68848:function(te,A,r){r.d(A,{Md:function(){return h},uj:function(){return q}});var U=r(97857),L=r.n(U),Z=r(15009),l=r.n(Z),G=r(99289),g=r.n(G),n=r(12578);function h(f,s,_){return o.apply(this,arguments)}function o(){return o=g()(l()().mark(function f(s,_,m){var t;return l()().wrap(function(k){for(;;)switch(k.prev=k.next){case 0:return t="/staff/web/userCenter/inventory/inbill/page.json",k.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(t,{method:"GET",params:{params:s,sort:_,filter:m}}));case 2:case"end":return k.stop()}},f)})),o.apply(this,arguments)}function T(f){return I.apply(this,arguments)}function I(){return I=_asyncToGenerator(_regeneratorRuntime().mark(function f(s){var _;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _="/staff/web/userCenter/inventory/inbill/update.json",t.abrupt("return",request==null?void 0:request(_,{method:"POST",data:s}));case 2:case"end":return t.stop()}},f)})),I.apply(this,arguments)}function y(f){return d.apply(this,arguments)}function d(){return d=_asyncToGenerator(_regeneratorRuntime().mark(function f(s){var _;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _="/staff/web/userCenter/inventory/inbill/getById.json",t.abrupt("return",request==null?void 0:request(_,{method:"GET",params:{id:s}}));case 2:case"end":return t.stop()}},f)})),d.apply(this,arguments)}function E(f){return M.apply(this,arguments)}function M(){return M=_asyncToGenerator(_regeneratorRuntime().mark(function f(s){var _;return _regeneratorRuntime().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _="/staff/web/userCenter/inventory/inbill/del.json",t.abrupt("return",request==null?void 0:request(_,{method:"POST",data:_objectSpread({},s)}));case 2:case"end":return t.stop()}},f)})),M.apply(this,arguments)}function V(){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function f(){var s;return _regeneratorRuntime().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:return s="/staff/web/userCenter/inventory/inbill/page.json",m.abrupt("return",request==null?void 0:request(s,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return m.stop()}},f)})),C.apply(this,arguments)}function q(f){return D.apply(this,arguments)}function D(){return D=g()(l()().mark(function f(s){var _;return l()().wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return _="/staff/web/userCenter/inventory/inbill/consumeInstock.json",t.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(_,{method:"POST",data:s}));case 2:case"end":return t.stop()}},f)})),D.apply(this,arguments)}},6493:function(te,A,r){r.d(A,{$G:function(){return f},FO:function(){return y},IV:function(){return E},Md:function(){return h},Ps:function(){return t},Vx:function(){return T},ZI:function(){return q},k9:function(){return k}});var U=r(97857),L=r.n(U),Z=r(15009),l=r.n(Z),G=r(99289),g=r.n(G),n=r(12578);function h(u,i,a){return o.apply(this,arguments)}function o(){return o=g()(l()().mark(function u(i,a,p){var e;return l()().wrap(function($){for(;;)switch($.prev=$.next){case 0:return e="/staff/web/userCenter/purchaseOrder/purchaseOrder/page.json",$.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(e,{method:"GET",params:{params:i,sort:a,filter:p}}));case 2:case"end":return $.stop()}},u)})),o.apply(this,arguments)}function T(u){return I.apply(this,arguments)}function I(){return I=g()(l()().mark(function u(i){var a;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/update.json",e.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"POST",data:i}));case 2:case"end":return e.stop()}},u)})),I.apply(this,arguments)}function y(u){return d.apply(this,arguments)}function d(){return d=g()(l()().mark(function u(i){var a;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/getById.json",e.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"GET",params:{id:i}}));case 2:case"end":return e.stop()}},u)})),d.apply(this,arguments)}function E(u){return M.apply(this,arguments)}function M(){return M=g()(l()().mark(function u(i){var a;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/del.json",e.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"POST",data:L()({},i)}));case 2:case"end":return e.stop()}},u)})),M.apply(this,arguments)}function V(){return C.apply(this,arguments)}function C(){return C=_asyncToGenerator(_regeneratorRuntime().mark(function u(){var i;return _regeneratorRuntime().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return i="/staff/web/userCenter/purchaseOrder/purchaseOrder/page.json",p.abrupt("return",request==null?void 0:request(i,{method:"GET",params:{pageNum:1,pageSize:0}}));case 2:case"end":return p.stop()}},u)})),C.apply(this,arguments)}function q(u,i,a,p){return D.apply(this,arguments)}function D(){return D=g()(l()().mark(function u(i,a,p,e){var b;return l()().wrap(function(R){for(;;)switch(R.prev=R.next){case 0:return b="/staff/web/userCenter/purchaseOrder/purchaseOrderItem/page.json?orderId="+i,R.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(b,{method:"GET",params:{params:a,sort:p,filter:e}}));case 2:case"end":return R.stop()}},u)})),D.apply(this,arguments)}function f(u){return s.apply(this,arguments)}function s(){return s=g()(l()().mark(function u(i){var a;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/updateItem.json",e.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"POST",data:i}));case 2:case"end":return e.stop()}},u)})),s.apply(this,arguments)}function _(u){return m.apply(this,arguments)}function m(){return m=_asyncToGenerator(_regeneratorRuntime().mark(function u(i){var a;return _regeneratorRuntime().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/del.json",e.abrupt("return",request==null?void 0:request(a,{method:"POST",data:_objectSpread({},i)}));case 2:case"end":return e.stop()}},u)})),m.apply(this,arguments)}function t(u){return W.apply(this,arguments)}function W(){return W=g()(l()().mark(function u(i){var a;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/purchaseOrder/purchaseOrder/submit.json?id="+i,e.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"POST"}));case 2:case"end":return e.stop()}},u)})),W.apply(this,arguments)}function k(u){return x.apply(this,arguments)}function x(){return x=g()(l()().mark(function u(i){var a;return l()().wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="/staff/web/userCenter/inventory/inbill/purchaseInstock.json",e.abrupt("return",n.request===null||n.request===void 0?void 0:(0,n.request)(a,{method:"POST",data:i}));case 2:case"end":return e.stop()}},u)})),x.apply(this,arguments)}},19515:function(te,A,r){r.d(A,{P:function(){return h},V:function(){return n}});var U=r(64599),L=r.n(U),Z=r(19632),l=r.n(Z),G=r(27484),g=r.n(G);function n(){var o=g()().format("YYYYMMDDHHmmssSSS").toString();return o}function h(){var o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],T=l()(o),I=L()(T),y;try{for(I.s();!(y=I.n()).done;){var d=y.value;!(d!=null&&d.valueType)||(d==null?void 0:d.valueType)!=="group"||!(d!=null&&d.columns)||!(d!=null&&d.columns.length)||T.push.apply(T,l()(d==null?void 0:d.columns))}}catch(E){I.e(E)}finally{I.f()}return T.filter(function(E){return E.valueType!=="group"})}}}]);
